try{!function(){var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="6a88ba90-5447-4019-a625-fd8daf55751a",t._sentryDebugIdIdentifier="sentry-dbid-6a88ba90-5447-4019-a625-fd8daf55751a")}()}catch(t){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.01.28-fd13201"}}catch(t){}}(),exports.id=678,exports.ids=[678],exports.modules={"./src/components/text-input.tsx":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{A:()=>p});var s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../ink/build/index.js"),o=n("../../node_modules/.pnpm/chalk@5.4.1/node_modules/chalk/source/index.js"),l=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),c=n("./src/context/theme-context.tsx"),u=n("./src/context/vim-mode-context.tsx"),a=n("./src/hooks/use-text-input.ts"),f=t([i,c,a]);[i,c,a]=f.then?(await f)():f;const d=new RegExp(`\\[${"Pasted text".replace(/[.*+?^${}()|[\]\\]/g,"\\$&")} #(\\d+)(?: \\+\\d+(?: lines)?)?\\]`,"g"),h=/(?:^|\s)(\/[\w-]+)/g,m=(t,e)=>t.replace(d,(t=>e?o.Ay.dim.gray(t):o.Ay.dim.cyan(t))),g=(t,e,n)=>n&&0!==n.size?t.replace(h,((t,r)=>{const s=r.slice(1).toLowerCase();return n.has(s)?t.slice(0,t.length-r.length)+(e?o.Ay.bold.blue(r):o.Ay.bold.cyan(r)):t})):t,p=l.memo((function({value:t,placeholder:e="",rightPlaceholder:n,ghostText:r,focus:f=!0,visualFocus:d=!1,mask:h,highlightPastedText:p=!1,showCursor:v=!0,dimmed:b=!1,onChange:x,onSubmit:y,onTab:M,onCtrlC:w,onShiftTab:O,cursorToEndSignal:C,cursorToStartSignal:j,replaceValueRef:A,onReplace:k,onCursorInfoChange:$,onUpAtFirstLine:T,onDownAtLastLine:E,onPaste:R,allowExplicitNewline:L,onCtrlR:S,onCtrlD:D,validSlashCommands:_,suppressArrowKeys:W,disableTextInput:V,debounceMs:I}){var P;const{mode:J,vimEnabled:F}=(0,u.v)(),{stdout:G}=(0,i.t$)(),{cursorOffset:N,cursorWidth:H,displayValue:z}=(0,a.t)(t,x,{focus:f,showCursor:v,highlightPastedText:p,onSubmit:y,onTab:M,onShiftTab:O,onCtrlC:w,onCtrlD:D,onCtrlR:S,cursorToEndSignal:C,cursorToStartSignal:j,replaceValueRef:A,onReplace:k,onCursorInfoChange:$,onUpAtFirstLine:T,onDownAtLastLine:E,onPaste:R,allowExplicitNewline:L,suppressArrowKeys:W,disableTextInput:V,debounceMs:I}),U=p?H:0,B=(0,c.pW)(),Q=h?h.repeat(z.length):z;let Z=Q,K=e?o.Ay.grey(e):void 0;if(v&&(f||d)){const t=F&&"normal"===J?o.Ay.bgGray:o.Ay.inverse;K=e.length>0?t(e[0])+(B?o.Ay.dim(o.Ay.grey(e.slice(1))):o.Ay.grey(e.slice(1))):t(" "),Z=Q.length>0?"":t(" ");let n=0,r=0;const s=null!==(P=null==G?void 0:G.columns)&&void 0!==P?P:0;let i=!1;for(const e of Q){if("\n"===e){const e=n>=N-U&&n<N,o=0===U&&N===n&&(0===n||"\n"!==Q[n-1]);if(i||!e&&!o||(s>0&&r===s-1||(Z+=t(" ")),i=!0),Z+="\n",n++,r=0,!i&&0===U&&N===n){const e=Q[n];null!=e&&"\n"!==e||(Z+=t(" "),i=!0)}continue}const o=0===U&&n===N;U>0&&n>=N-U&&n<N||o?(Z+=t(e),o&&(i=!0)):Z+=e,n+=e.length,r++,s>0&&r>=s&&(r=0)}!i&&Q.length>0&&N===Q.length&&(Z+=t(" "),i=!0)}const{isRawModeSupported:q}=(0,i.mT)();(0,l.useEffect)((()=>(q&&process.stdin.setRawMode(!0),()=>{q&&process.stdin.setRawMode(!1)})),[q]);const X=e?Q.length>0?Z:K:Z,Y="string"==typeof X?g(m(X,null!=B&&B),null!=B&&B,_):X,tt=r&&Q.length>0&&N===Q.length;return(0,s.jsxs)(i.az,{flexDirection:"row",justifyContent:"space-between",width:"100%",children:[(0,s.jsx)(i.az,{flexGrow:1,marginRight:2,children:(0,s.jsxs)(i.EY,{dimColor:b,children:[Y,tt&&(0,s.jsx)(i.EY,{color:"gray",dimColor:!0,children:r})]})}),n&&0===Q.length&&(0,s.jsx)(i.az,{flexShrink:0,marginLeft:1,marginRight:1,children:(0,s.jsx)(i.EY,{color:"gray",dimColor:null!=B&&B,children:n})})]})}));r()}catch(t){r(t)}}))},"./src/context/theme-context.tsx":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{NP:()=>u,cb:()=>f,pW:()=>a});var s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/hooks/use-theme-detection.ts"),l=t([o]);o=(l.then?(await l)():l)[0];const c=(0,i.createContext)({isLightTheme:!1,syncTheme:()=>{return t=void 0,e=void 0,r=function*(){},new((n=void 0)||(n=Promise))((function(s,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,l)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}}),u=({children:t,detection:e})=>{const{isLightTheme:n,sync:r}=(0,o.A)(Object.assign({},e));return(0,s.jsx)(c.Provider,{value:{isLightTheme:null!=n&&n,syncTheme:r},children:t})},a=()=>{const{isLightTheme:t}=(0,i.useContext)(c);return t},f=()=>{const{syncTheme:t}=(0,i.useContext)(c);return t};r()}catch(t){r(t)}}))},"./src/context/vim-mode-context.tsx":(t,e,n)=>{n.d(e,{l:()=>o,v:()=>l});var r=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js");const i=(0,s.createContext)(void 0),o=({children:t,configProvider:e})=>{const[n,o]=(0,s.useState)("insert"),[l,c]=(0,s.useState)(e.get().editor.vimMode);return(0,r.jsx)(i.Provider,{value:{mode:l?n:"insert",setMode:o,toggleMode:()=>{o((t=>"normal"===t?"insert":"normal"))},vimEnabled:l,toggleVimEnabled:()=>{c((t=>{const n=!t;try{e.transform((t=>Object.assign(Object.assign({},t),{editor:Object.assign(Object.assign({},t.editor),{vimMode:n})}))).catch((()=>{}))}catch(t){}return n||o("insert"),n}))}},children:t})},l=()=>{const t=(0,s.useContext)(i);if(void 0===t)throw new Error("useVimMode must be used within a VimModeProvider");return t}},"./src/hooks/use-text-input-sync.ts":(t,e,n)=>{function r(t,e,n,r){const s=null!=t?t:"";return""===s?{shouldOverwriteRefs:!0,clampedCursor:0}:null!=r&&s!==e||s.length<e.length?{shouldOverwriteRefs:!1,clampedCursor:null}:{shouldOverwriteRefs:!0,clampedCursor:Math.max(0,Math.min(n,s.length))}}n.d(e,{l:()=>r})},"./src/hooks/use-text-input.ts":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{t:()=>h});var s=n("../ink/build/index.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/constants.ts"),l=n("./src/context/vim-mode-context.tsx"),c=n("./src/debug.ts"),u=n("./src/utils/cursor-navigation.ts"),a=n("./src/utils/vim-engine.ts"),f=n("./src/hooks/use-text-input-sync.ts"),d=t([s]);s=(d.then?(await d)():d)[0];const g=/^(?:\u001b\[H|\u001b\[1~|\u001b\[7~|\u001bOH|\u001b\[1;1H)$/u,p=/^(?:\u001b\[F|\u001b\[4~|\u001b\[8~|\u001bOF|\u001b\[1;1F)$/u,v=t=>g.test(t),b=t=>p.test(t),x=/\u001b?\](?:10|11|12|4);[^\\\u0007]*(?:\u0007|\u001b\\|\\)/g,y=/\u001b?\[200~/,M=/\u001b?\[201~/;function h(t,e,n={}){const{focus:r=!0,showCursor:d=!0,highlightPastedText:h=!1,onSubmit:g,onTab:p,onShiftTab:w,onCtrlC:O,onCtrlD:C,onCtrlR:j,cursorToEndSignal:A,cursorToStartSignal:k,replaceValueRef:$,onReplace:T,onCursorInfoChange:E,onUpAtFirstLine:R,onDownAtLastLine:L,allowExplicitNewline:S=!0,onPaste:D,suppressArrowKeys:_=!1,disableTextInput:W=!1,debounceMs:V=0}=n,[I,P]=(0,i.useState)({cursorOffset:(t||"").length,cursorWidth:0,displayValue:t||""}),{cursorOffset:J,cursorWidth:F,displayValue:G}=I,N=(0,i.useRef)(t),H=(0,i.useRef)(J),z=(0,i.useRef)(null),U=(0,i.useRef)(0),B=(0,i.useRef)(0),Q=(0,i.useRef)(!1),Z=(0,i.useRef)(""),K=(0,i.useRef)(""),q=(0,i.useRef)(!1),X=(0,i.useRef)(!1),Y=(0,i.useRef)(function(){let t=!1,e="";return function(n){if(x.test(n)){const t=n.replace(x,"");return t.length>0?t:""}let r="",s=0;for(;s<n.length;)if(t){const r=n[s++];e+=r;const i=e.length,o=e[i-1];if(""===o||"\\"===o){t=!1,e="";continue}i>=2&&""===e[i-2]&&"\\"===o&&(t=!1,e="")}else{const l=""===(i=n)[o=s]&&"]"===i[o+1]&&/^(?:10|11|12|4);/.test(i.slice(o+2))?4:"]"===i[o]&&/^(?:10|11|12|4);/.test(i.slice(o+1))?3:0;if(l>0){t=!0,e="",s+=l;continue}r+=n[s++]}var i,o;return r}}()),{mode:tt,setMode:et,vimEnabled:nt}=(0,l.v)(),[rt,st]=(0,i.useState)(null),[it,ot]=(0,i.useState)(null),[lt,ct]=(0,i.useState)(null),ut=(0,i.useRef)(A),at=(0,i.useRef)(k),ft=(0,i.useRef)(null),dt=(0,i.useRef)(null),ht=(0,i.useCallback)((t=>{V>0?(ft.current=t,dt.current&&clearTimeout(dt.current),dt.current=setTimeout((()=>{const t=ft.current;ft.current=null,dt.current=null,null!=t&&e(t)}),V)):e(t)}),[e,V]),mt=(0,i.useCallback)((()=>{var t;dt.current&&(clearTimeout(dt.current),dt.current=null);const n=null!==(t=ft.current)&&void 0!==t?t:N.current;ft.current=null,null!=n&&(z.current=n,e(n))}),[e]);(0,i.useLayoutEffect)((()=>{if($)return $.current=t=>{dt.current&&(clearTimeout(dt.current),dt.current=null),ft.current=null;const e=null!=t?t:"";N.current=e;const n=e.length;H.current=n,z.current=null,P({cursorOffset:n,cursorWidth:0,displayValue:e}),null==T||T(e)},()=>{$.current=null}}),[$,T]);const{internal_eventEmitter:gt}=(0,s.mT)(),pt=(0,i.useCallback)((t=>{const e=N.current,n=Math.max(0,Math.min(e.length,t));H.current=n,P((t=>Object.assign(Object.assign({},t),{cursorOffset:n,cursorWidth:0})))}),[]);return(0,i.useEffect)((()=>{if(!r)return;const t=t=>{if(t&&!Q.current&&!y.test(t)&&!M.test(t)&&(v(t)||b(t))){const e=N.current,n=H.current,r=v(t)?(0,u.Jh)(e,n):nt&&"normal"===tt?(0,u.cs)(e,n):(0,u.GD)(e,n);q.current=!0,pt(r)}};return null==gt||gt.on("input",t),()=>{var e,n;null===(e=null==gt?void 0:gt.off)||void 0===e||e.call(gt,"input",t),null===(n=null==gt?void 0:gt.removeListener)||void 0===n||n.call(gt,"input",t)}}),[r,gt,nt,tt,pt]),(0,i.useLayoutEffect)((()=>{if(void 0===A)return;if(ut.current===A)return;ut.current=A;const e=t||"";P({cursorOffset:e.length,cursorWidth:0,displayValue:e}),H.current=e.length,N.current=e}),[A,t]),(0,i.useLayoutEffect)((()=>{if(void 0===k)return;if(at.current===k)return;at.current=k;const e=t||"";P({cursorOffset:0,cursorWidth:0,displayValue:e}),H.current=0,N.current=e}),[k,t]),(0,i.useEffect)((()=>{const t=G||"",e=(0,u.q5)(t,J);null==E||E({offset:J,isAtLastLine:e})}),[J,G,E]),(0,i.useLayoutEffect)((()=>{const e=t||"",n=z.current;if(e===N.current&&null===n)return;const s=(0,f.l)(e,N.current,H.current,n);if(null!=n&&e===n&&(z.current=null),!s.shouldOverwriteRefs)return;N.current=e;const i=r&&d?s.clampedCursor:null;null!==i&&(H.current=i),P((t=>{const n=Object.assign({},t);let r=!1;return t.displayValue!==e&&(n.displayValue=e,r=!0),null===i||t.cursorOffset===i&&0===t.cursorWidth||(n.cursorOffset=i,n.cursorWidth=0,r=!0),r?n:t}))}),[t,r,d]),(0,i.useEffect)((()=>{try{process.stdout.write("[?2004h")}catch(t){}return()=>{try{process.stdout.write("[?2004l")}catch(t){}dt.current&&(clearTimeout(dt.current),dt.current=null)}}),[]),(0,s.Ge)(((e,n)=>{if(W)return;if(X.current)return void(X.current=!1);if(("\r"===e||"\n"===e)&&!n.return){if(S){const e=N.current,n=H.current,r=`${e.slice(0,n)}\n${e.slice(n)}`;N.current=r,H.current=n+1,P((t=>Object.assign(Object.assign({},t),{cursorOffset:n+1,cursorWidth:0,displayValue:r}))),r!==t&&(z.current=r,ht(r))}return}if(K.current.length>0&&(e=K.current+e,K.current=""),n.backspace&&n.ctrl||""===e||"[127;5u"===e||"u"===e&&n.ctrl){const e=N.current,n=H.current,r=(0,u.Jh)(e,n),s=e.slice(0,r)+e.slice(n),i=r;return N.current=s,H.current=i,P((t=>Object.assign(Object.assign({},t),{cursorOffset:i,cursorWidth:0,displayValue:s}))),void(s!==t&&(z.current=s,ht(s)))}const r=Date.now(),s=r-U.current;U.current=r,B.current=s<35?B.current+1:1;let i=N.current,l=H.current;const f=(e,n,r=0)=>{const s=e,i=Math.max(0,Math.min(s.length,n));N.current=s,H.current=i,P((t=>Object.assign(Object.assign({},t),{cursorOffset:i,cursorWidth:r,displayValue:s}))),s!==t&&(z.current=s,ht(s))};if(Q.current||y.test(e)||M.test(e)||e.includes("[200~")||e.includes("[201~")){let t=e;if(!Q.current){const e=t.search(y);if(-1!==e){const n=t.match(y),r=n?n[0].length:0;if(Q.current=!0,Z.current="",e>0){const n=t.slice(0,e),r=i.slice(0,l)+n+i.slice(l);i=r,l=r.length,f(r,l,0)}t=t.slice(e+r)}}if(Q.current){const e=Z.current+t,n=e.indexOf("[201~"),r=e.indexOf("[201~");let s=-1,o=0;if(-1!==n&&(-1===r||n<r)?(s=n,o=6):-1!==r&&(s=r,o=5),-1!==s){const t=e.slice(0,s),n=e.slice(s+o),r=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");Q.current=!1,Z.current="",i=N.current,l=H.current;let c=r;try{const t=null==D?void 0:D({kind:"bracketed",content:r});null!=t&&(c=t)}catch(t){}c.includes("\t")&&(c=c.replace(/\t/g,"  "));const u=i.slice(0,l)+c+i.slice(l);return f(u,l+c.length,0),void(n.length>0&&(K.current=n))}return void(Z.current=e)}}if(n.ctrl&&"c"===e)return i.length>0?(null==O||O(),void f("",0,0)):void(null==O||O());if(o.hD&&(n.ctrl&&("r"===e||"R"===e)||""===e))return void(null==j||j());if(n.ctrl&&("o"===e||"O"===e)||""===e)return;if(n.ctrl&&("k"===e||"K"===e)||"\v"===e){if(0===i.length)return;const t=(0,u.GD)(i,l);let e=t;l===t&&l<i.length&&"\n"===i[l]&&(e=l+1);const n=i.slice(0,l)+i.slice(e);return void f(n,l,0)}if(n.ctrl&&("d"===e||"D"===e)||""===e){if(C)return void C();if(l>=i.length)return;const t=l+1,e=i.slice(0,l)+i.slice(t);return void f(e,l,0)}if(n.ctrl&&("t"===e||"T"===e)||""===e){const t=i,e=l;if(t.length<2)return;const n=(0,u.Jh)(t,e),r=(0,u.GD)(t,e);if(e===n)return;if(r-n<2)return;const s=e===r?e-1:e;if(s-1<n||s>=r)return;const o=t.slice(0,s-1),c=t[s-1],a=o+t[s]+c+t.slice(s+1);return void f(a,Math.min(s+1,a.length),0)}if(n.tab)return n.shift?void(null==w||w()):void(null==p||p());const h=n.ctrl&&n.leftArrow||n.ctrl&&"a"===e||""===e||"[1;5D"===e||"[1;2D"===e,v=n.ctrl&&n.rightArrow||n.ctrl&&"e"===e||""===e||"[1;5C"===e||"[1;2C"===e,b=n.meta&&n.leftArrow||n.meta&&"b"===e||"[1;3D"===e||"b"===e||"[1;5D"===e,x=n.meta&&n.rightArrow||n.meta&&"f"===e||"[1;3C"===e||"f"===e||"[1;5C"===e,A="[H"===e||"[1~"===e||"[7~"===e||"OH"===e||"[1;1H"===e,k="[F"===e||"[4~"===e||"[8~"===e||"OF"===e||"[1;1F"===e;if(q.current&&(A||k))return void(q.current=!1);if(h||v||b||x||A||k){if(h||A)pt((0,u.Jh)(i,l));else if(v||k){const t=nt&&"normal"===tt?(0,u.cs)(i,l):(0,u.GD)(i,l);pt(t)}else pt(b?(0,a.y0)(i,l):(0,a.Qn)(i,l));return}const $=n.ctrl&&("p"===e||"P"===e)||""===e,T=n.ctrl&&("n"===e||"N"===e)||""===e;if($){const t=(0,u.te)(i,l);return null==t?void(0===l?null==R||R():pt(0)):(H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0}))))}if(T){const t=(0,u.kC)(i,l);if(null==t||t===l){if(l<i.length){if(-1!==i.indexOf("\n",l)){const t=Math.min(i.length,l+1);return H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}return void pt(i.length)}return void(null==L||L())}return H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}if(n.ctrl&&("b"===e||"B"===e)||""===e)return void pt(Math.max(0,l-1));if(n.ctrl&&("f"===e||"F"===e)||""===e)return void pt(Math.min(N.current.length,l+1));if(n.upArrow){if(_)return;const t=(0,u.te)(i,l);return null==t?void(0===l?null==R||R():pt(0)):(H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0}))))}if(n.downArrow){if(_)return;const t=(0,u.kC)(i,l);if(null==t||t===l){if(l<i.length){if(-1!==i.indexOf("\n",l)){const t=Math.min(i.length,l+1);return H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}return void pt(i.length)}return void(null==L||L())}return H.current=t,void P((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}if(n.shift&&n.tab)return;const E=["[13;2~","[27;2;13~","[13;2~","[27;2;13~","[13;2~","[27;2;13~","[13;2u","[13;2u","[13;2u"].includes(e)||/^(?:\u001b|\x1b)?\[[0-9]{1,3};2;13~$/.test(e)||/^(?:\u001b|\x1b)?\[13;2u$/.test(e),V=n.meta&&n.return,I="\n"===e&&1===e.length&&B.current<2;if(n.shift&&n.return||E||V||I){if(!S)return;const t=`${i.slice(0,l)}\n${i.slice(l)}`;return void f(t,l+1,0)}if(n.return){if(B.current>=3){if(!S||0===i.length)return void(g&&(mt(),g(i)));const t=`${i.slice(0,l)}\n${i.slice(l)}`;return void f(t,t.length,0)}if(S&&l>0&&"\\"===i[l-1]){const t=`${i.slice(0,l-1)}\n${i.slice(l)}`;return void f(t,l,0)}return void(g&&(mt(),g(i)))}if(nt&&"normal"===tt){const r=()=>{ot(null),ct(null)};if(n.ctrl&&"w"===e||""===e){const t=(0,a.y0)(i,l),e=i.slice(0,t)+i.slice(l);return f(e,t,0),void r()}const s=()=>{const t=null!=lt?lt:1,e=(0,a.JZ)(it,1);return{op:t,motion:e,total:t*e}};if(/^[1-9]$/.test(e))return void ot((t=>null==t?e:t+e));if("0"===e){if(null!=it)return void ot(`${it}0`);if(null==rt){const e=(0,u.Jh)(t,l);return pt(e),void r()}}if("d"===rt){const n=t,i=(t,e)=>{if(e<=t)return st(null),void r();const s=(0,a.Xo)(n,{start:t,end:e});f(s.text,s.cursor,0),st(null),r()},o={w:"w",W:"W",b:"b",B:"B",e:"e",E:"E",0:"0",$:"$",h:"h",l:"l"};if(e in o){const{total:t}=s(),r=(0,a.IA)(o[e],n,J,t);return void i(r.start,r.end)}if("d"===e){const{total:t}=s(),e=(0,u.Jh)(n,J);let r=J;for(let e=0;e<t;e++){const t=n.indexOf("\n",r);if(-1===t){r=n.length;break}r=t+1}return void(r===n.length&&e>0&&"\n"===n[e-1]?i(e-1,r):i(e,r))}return st(null),void r()}if("d"===e)return null!=it&&(ct((0,a.JZ)(it,1)),ot(null)),void st("d");if("i"===e)return et("insert"),void r();if("a"===e){et("insert");const e=Math.min(l+1,t.length);return pt(e),void r()}if("A"===e){et("insert");const e=t,n=(0,u.Jh)(e,l),s=e.indexOf("\n",n),i=-1===s?e.length:s;return pt(i),void r()}if("k"===e){const{motion:t}=s();if(null==(0,u.te)(i,l))return null==R||R(),void r();const e=function(t,e,n){let r=e;for(let e=0;e<n;e++){const e=(0,u.te)(t,r);if(null==e)break;r=e}return r}(i,l,t);return pt(e),void r()}if("j"===e){const{motion:t}=s(),{pos:e,hitEnd:n}=m(i,l,t);return n&&(0,u.q5)(i,l)&&(null==L||L()),pt(e),void r()}if("o"===e){if(!S)return et("insert"),void r();const{value:t,newOffset:e}=(0,u.Vs)(i,l);return f(t,e,0),et("insert"),void r()}if("O"===e){if(!S)return et("insert"),void r();const{value:t,newOffset:e}=(0,u.V)(i,l);return f(t,e,0),et("insert"),void r()}if("I"===e){et("insert");const t=(0,u.Jh)(i,l);return pt(t),void r()}if("h"===e||n.leftArrow){const{motion:t}=s(),e=Math.max(0,l-t);return pt(e),void r()}if("l"===e||n.rightArrow){const{motion:t}=s(),e=Math.min(Math.max(0,i.length-1),l+t);return pt(e),void r()}if("$"===e){const{motion:t}=s();let e=l;if(t>1){const{pos:n,hitEnd:r}=m(i,l,t-1);r&&(0,u.q5)(i,l)&&(null==L||L()),e=n}const n=(0,u.cs)(i,e);return pt(n),void r()}if("x"===e){const{motion:t}=s(),e=Math.max(1,t);if(l<i.length){const t=Math.min(i.length,l+e),n=i.slice(0,l)+i.slice(t),r=Math.min(l,Math.max(0,n.length-1));f(n,r,0)}return void r()}if("X"===e){const{motion:t}=s(),e=Math.max(1,t);if(l>0){const t=Math.max(0,l-e),n=i.slice(0,t)+i.slice(l);f(n,t,0)}return void r()}if("w"===e){const{motion:t}=s();let e=l;for(let n=0;n<t;n++)e=(0,a.Qn)(i,e);return pt(e),void r()}if("e"===e){const{motion:t}=s();let e=l;for(let n=0;n<t;n++)e=(0,a.ek)(i,e);return pt(e),void r()}if("E"===e){const{motion:t}=s();let e=l;for(let n=0;n<t;n++)e=(0,a.Pg)(i,e);return pt(e),void r()}if("b"===e){const{motion:t}=s();let e=l;for(let n=0;n<t;n++)e=(0,a.y0)(i,e);return pt(e),void r()}if("B"===e){const{motion:t}=s(),e=i;if(e.length>0){let n=l;for(let r=0;r<t&&!(n<=0);r++){for(n=Math.min(n,e.length-1);n>0&&/\s/.test(e[n]);)n--;for(;n>0&&!/\s/.test(e[n-1]);)n--}pt(n)}return void r()}if("W"===e){const{motion:t}=s(),e=i;if(e.length>0){let n=l;for(let r=0;r<t;r++){if(n<e.length&&!/\s/.test(e[n]))for(;n<e.length&&!/\s/.test(e[n]);)n++;for(;n<e.length&&/\s/.test(e[n]);)n++}const r=Math.min(Math.max(0,e.length-1),n);pt(r)}return void r()}if("D"===e){const{motion:t}=s(),e=i;let n=l;if(t>1){const{pos:r}=m(e,l,t-1);n=r}const o=(0,u.GD)(e,n),c=e.slice(0,l)+e.slice(o);return f(c,l,0),void r()}if("C"===e){const{motion:t}=s(),e=i;let n=l;if(t>1){const{pos:r}=m(e,l,t-1);n=r}const o=(0,u.GD)(e,n),c=e.slice(0,l)+e.slice(o);return f(c,l,0),et("insert"),void r()}if("s"===e){const{motion:t}=s(),e=i,n=Math.max(1,t),o=(0,u.GD)(e,l),c=Math.min(o,l+n),a=e.slice(0,l)+e.slice(c);return f(a,l,0),et("insert"),void r()}if("S"===e){const{motion:t}=s(),e=i,n=Math.max(1,t),o=(0,u.Jh)(e,l);let c=l;for(let t=0;t<n;t++){const t=e.indexOf("\n",c);if(-1===t){c=e.length;break}c=t+1}let a=o;const d=c;d===e.length&&a>0&&"\n"===e[a-1]&&(a-=1);const h=e.slice(0,a)+e.slice(d);return f(h,a,0),et("insert"),void r()}return void r()}if(n.escape)return void(nt&&(et("normal"),pt(Math.max(0,l-1)),ot(null),ct(null)));const F=e.length>1?e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"):e,G=Y.current(F).replace(/\u001b?\[27(?:;\d+)?u/g,"");if("\t"===G)return(0,c.debugLog)("input.tab.single",{mode:tt,vimEnabled:nt}),void(n.shift?null==w||w():null==p||p());const ut=0===G.length&&F.length>0,at=n.backspace||n.delete||n.return||n.tab||n.upArrow||n.downArrow||n.leftArrow||n.rightArrow||n.ctrl||n.meta;if(ut&&!at)return;let ft=l,dt=i,gt=0;if(n.leftArrow)d&&ft--;else if(n.rightArrow)d&&ft++;else if(n.backspace||n.delete){(n.meta||n.ctrl)&&(n.backspace||n.delete)&&(0,c.debugLog)("Modifier key event:",{input:JSON.stringify(e),inputHex:Array.from(e).map((t=>`0x${t.charCodeAt(0).toString(16)}`)).join(" "),key:{backspace:n.backspace,delete:n.delete,meta:n.meta,ctrl:n.ctrl,shift:n.shift}});const t=n.backspace&&(n.meta||n.ctrl)||n.delete&&n.meta&&""===e||""===e||"\b"===e||"[8;3~"===e||"[127;3u"===e,r=n.delete&&(n.meta||n.ctrl)&&""!==e||"[3;3~"===e||"d"===e||"[3~"===e&&n.meta;if(t||r)if(t){const t=(0,a.y0)(i,l);dt=i.slice(0,t)+i.slice(l),ft=t}else{const t=(0,a.Qn)(i,l);dt=i.slice(0,l)+i.slice(t),ft=l}else l>0&&(dt=i.slice(0,l-1)+i.slice(l,i.length),ft--)}else if(nt&&"normal"===tt||!(n.meta&&"w"===G||"w"===G||n.ctrl&&"w"===G||""===G))if(nt&&"normal"===tt||!(n.meta&&"d"===G||"d"===G)){let t=G;if(G.length>1){if(/^\t+$/.test(G)){const t=G.length;(0,c.debugLog)("input.tabs.aggregated",{count:t});for(let e=0;e<t;e++)try{null==p||p()}catch(t){}return}const e=G;let n=0,r=0,s=0;for(;s<e.length;){const t=e[s];if(""!==t){if(""!==t)break;r++,s++}else n++,s++}if(n>0||r>0){const t=Math.min(n,l);let e=i.slice(0,l-t)+i.slice(l);const s=l-t;if(r>0){const t=Math.min(r,e.length-s);t>0&&(e=e.slice(0,s)+e.slice(s+t))}return void f(e,s,0)}try{const e=null==D?void 0:D({kind:"aggregated",content:G});null!=e&&(t=e)}catch(t){}if(/^\n+$/.test(t)&&(!S||0===N.current.length))return void(g&&(mt(),g(i)))}t.includes("\t")&&(t=t.replace(/\t/g,"  ")),dt=i.slice(0,l)+t+i.slice(l,i.length),t.includes("\n")?(ft=l+t.length,gt=0):(ft=l+t.length,t.length>1&&(gt=0))}else{const t=(0,a.Qn)(i,l);dt=i.slice(0,l)+i.slice(t),ft=l}else{const t=(0,a.y0)(i,l);dt=i.slice(0,t)+i.slice(l),ft=t}ft<0&&(ft=0),ft>dt.length&&(ft=dt.length),f(dt,ft,gt)}),{isActive:r}),{cursorOffset:J,cursorWidth:h?F:0,setCursorOffset:pt,displayValue:G}}function m(t,e,n){let r=e,s=!1;for(let e=0;e<n;e++){const e=(0,u.kC)(t,r);if(null==e){s=!0;break}r=e}return{pos:r,hitEnd:s}}r()}catch(w){r(w)}}))},"./src/hooks/use-theme-detection.ts":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{A:()=>u});var s=n("../ink/build/index.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/utils/terminal-theme.ts"),l=t([s]);s=(l.then?(await l)():l)[0];var c=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,l)}c((r=r.apply(t,e||[])).next())}))};function u(t){const e=!0===(null==t?void 0:t.ignoreEnvHint),n=(0,i.useMemo)((()=>{var t,n;if(e)return null;const r=null===(t=process.env.TERM_THEME)||void 0===t?void 0:t.toLowerCase(),s=null===(n=process.env.VSCODE_THEME)||void 0===n?void 0:n.toLowerCase();if("1"===process.env.ANSI_LIGHT)return!0;if("light"===r)return!0;if("dark"===r)return!1;if(s){if(s.includes("light"))return!0;if(s.includes("dark"))return!1}return null}),[e]),[r,l]=(0,i.useState)(n),{stdin:u}=(0,s.mT)(),{stdout:a}=(0,s.t$)(),f=(0,i.useRef)(!1),d=(0,i.useRef)(0),h=(0,i.useCallback)(((...t)=>c(this,[...t],void 0,(function*(t=!1){if(!f.current){f.current=!0;try{const e=t?null:n;if(null!=e)return void l(e);try{(0,o.jf)()}catch(t){}const r=(0,o.lf)(),s=Boolean(process.env.TMUX),i=r||s?300:100,c=yield(0,o._J)(u,a,i);l(c),d.current=Date.now()}catch(t){}finally{f.current=!1}}}))),[u,a,n]);return(0,i.useEffect)((()=>{let t=!1;return(()=>{c(this,void 0,void 0,(function*(){t||(yield h())}))})(),()=>{t=!0}}),[h]),{isLightTheme:r,sync:(0,i.useCallback)((()=>c(this,void 0,void 0,(function*(){yield h(!0)}))),[h])}}r()}catch(a){r(a)}}))},"./src/utils/cursor-navigation.ts":(t,e,n)=>{function r(t,e){const n=Math.min(Math.max(0,e),t.length);return-1===t.indexOf("\n",n)}function s(t,e){if(-1===t.indexOf("\n"))return null;const n=Math.min(Math.max(0,e),t.length),r=n<=0?-1:t.lastIndexOf("\n",n-1);if(-1===r)return null;const s=t.lastIndexOf("\n",Math.max(0,r-1)),i=-1===s?0:s+1,o=n-(r+1),l=r-i;return i+Math.min(o,l)}function i(t,e){if(-1===t.indexOf("\n"))return null;const n=Math.min(Math.max(0,e),t.length),r=t.indexOf("\n",n);if(-1===r)return null;const s=n<=0?-1:t.lastIndexOf("\n",n-1),i=n-(-1===s?0:s+1),o=r+1,l=t.indexOf("\n",o),c=(-1===l?t.length:l)-o;return o+Math.min(i,c)}function o(t,e){const n=Math.min(Math.max(0,e),0===t.length?0:t.length-1),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r+1;return{value:`${t.slice(0,s)}\n${t.slice(s)}`,newOffset:s+1}}function l(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length)));return{value:`${t.slice(0,n)}\n${t.slice(n)}`,newOffset:n}}function c(t,e){const n=Math.min(Math.max(0,e),Math.max(0,t.length));if(n<=0)return 0;const r=t.lastIndexOf("\n",n-1);return-1===r?0:r+1}function u(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length))),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r;return 0===Math.max(0,s-n)?n:Math.min(Math.max(0,s-1),Math.max(0,t.length-1))}function a(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length))),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r;return Math.max(0,Math.min(t.length,s))}n.d(e,{GD:()=>a,Jh:()=>c,V:()=>l,Vs:()=>o,cs:()=>u,kC:()=>i,q5:()=>r,te:()=>s})},"./src/utils/rule-command-utils.ts":(t,e,n)=>{function r(t){return t.toLowerCase().split(/\s+/).slice(0,4).join("-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")}function s(t){return t.replace(/^\/+/,"").replace(/\//g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")}function i(t){return t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}function o(t){const e=new Set(["true","false","null","yes","no","y","n","on","off"]);return/[#:[\]{}|>&*!?'"`\n\r]/.test(t)||t!==t.trim()||t.startsWith("- ")||e.has(t.toLowerCase())?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:t}function l({description:t,name:e,ruleType:n,globPattern:r}){const s=i(e),l=o(t);let c;switch(n){case"always":c=`---\ndescription: ${l}\nalwaysApply: true\n---`;break;case"auto":case"manual":c=`---\ndescription: ${l}\nalwaysApply: false\n---`;break;case"glob":c=`---\ndescription: ${l}\nglobs: ${o(r||"")}\nalwaysApply: false\n---`;break;default:throw new Error(`Unhandled rule type: ${n}`)}return`${c}\n\n# ${s}\n\n${t}\n`}function c({name:t,description:e}){return`# ${i(t)}\n\n${e}\n`}function u(t){return"skills"===t?[{value:"project",label:"Project Skill",hint:".cursor/skills/"},{value:"user",label:"Just for Me",hint:"~/.cursor/skills/"}]:[{value:"project",label:"Project "+("rules"===t?"Rule":"Command"),hint:".cursor/"},{value:"user",label:"Just for Me",hint:"~/.cursor/"}]}function a(t){return t.includes("/")}function f(){return"No slash needed - just enter the command name (e.g., 'run-tests')"}function d(t){return t.toLowerCase().split(/\s+/).slice(0,3).join("-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")||"my-command"}n.d(e,{Fv:()=>r,K8:()=>p,TP:()=>h,Ux:()=>a,Zc:()=>d,Zs:()=>u,_M:()=>s,i5:()=>o,jh:()=>l,kt:()=>c,mc:()=>m,nQ:()=>f,uM:()=>g});const h=[{value:"always",label:"Always Apply",description:"Apply to every chat session"},{value:"auto",label:"Apply Intelligently",description:"Agent decides based on description"},{value:"glob",label:"Apply to Specific Files",description:"When file matches a pattern"},{value:"manual",label:"Apply Manually",description:"Only when @-mentioned in chat"}],m=function(t){return t.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")},g=r;function p({name:t,description:e}){const n=i(t);return`---\nname: ${t}\ndescription: ${o(e)}\n---\n\n# ${n}\n\n## Overview\n\n${e}\n\n## When to Use\n\nUse this skill when:\n- [Describe trigger scenarios]\n\n## Instructions\n\n[Add step-by-step instructions here]\n`}},"./src/utils/vim-engine.ts":(t,e,n)=>{n.d(e,{IA:()=>m,JZ:()=>p,Pg:()=>f,Qn:()=>o,Xo:()=>g,ek:()=>c,y0:()=>l});var r=n("./src/utils/cursor-navigation.ts");function s(t){return/[A-Za-z0-9_]/.test(t)}function i(t){return/\s/.test(t)}function o(t,e){let n=e;if(n<t.length&&s(t[n]))for(;n<t.length&&s(t[n]);)n++;for(;n<t.length&&!s(t[n]);)n++;return Math.min(t.length,Math.max(0,n))}function l(t,e){let n=e;if(n<=0)return 0;for(n--;n>0&&!s(t[n]);)n--;for(;n>0&&s(t[n-1]);)n--;return n}function c(t,e){const n=t.length;if(0===n)return e;let r=e;if(r>=n-1)return e;if(s(t[r])&&r+1<n&&s(t[r+1]))for(;r+1<n&&s(t[r+1]);)r++;else{for(r++;r<n&&!s(t[r]);)r++;if(r<n)for(;r+1<n&&s(t[r+1]);)r++}return Math.min(Math.max(0,n-1),r)}function u(t,e){const n=t.length;if(0===n)return e;let r=e;if(r<n&&!i(t[r]))for(;r<n&&!i(t[r]);)r++;for(;r<n&&i(t[r]);)r++;return Math.min(t.length,Math.max(0,r))}function a(t,e){const n=t.length;if(0===n||e<=0)return 0;let r=Math.min(e,n-1);for(r>0&&r--;r>0&&i(t[r]);)r--;for(;r>0&&!i(t[r-1]);)r--;return r}function f(t,e){const n=t.length;if(0===n)return e;let r=e;if(r>=n-1)return Math.min(Math.max(0,n-1),r);if(!i(t[r])&&r+1<n&&!i(t[r+1]))for(;r+1<n&&!i(t[r+1]);)r++;else{for(r++;r<n&&i(t[r]);)r++;if(r<n)for(;r+1<n&&!i(t[r+1]);)r++}return Math.min(Math.max(0,n-1),r)}function d(t,e){return(0,r.Jh)(t,e)}function h(t,e){return(0,r.GD)(t,e)}function m(t,e,n,s=1){switch(t){case"w":{let t=n;for(let n=0;n<s;n++)t=o(e,t);return{start:n,end:t}}case"W":{let t=n;for(let n=0;n<s;n++)t=u(e,t);return{start:n,end:t}}case"b":{let t=n;for(let n=0;n<s;n++)t=l(e,t);return{start:t,end:n}}case"B":{let t=n;for(let n=0;n<s;n++)t=a(e,t);return{start:t,end:n}}case"e":{let t=n;for(let n=0;n<s;n++)t=c(e,t);return{start:n,end:Math.min(e.length,t+1)}}case"E":{let t=n;for(let n=0;n<s;n++)t=f(e,t);return{start:n,end:Math.min(e.length,t+1)}}case"0":return{start:d(e,n),end:n};case"$":{let t=n;return s>1&&(t=function(t,e,n=1){let s=e,i=!1;for(let e=0;e<n;e++){const e=(0,r.kC)(t,s);if(null===e){i=!0;break}s=e}return{cursor:s,hitEnd:i}}(e,n,s-1).cursor),{start:n,end:h(e,t)}}case"h":{const t=function(t,e,n=1){return Math.max(0,e-n)}(0,n,s);return{start:t,end:n}}case"l":return{start:n,end:Math.min(e.length,n+s)};default:return{start:n,end:n}}}function g(t,e){const{start:n,end:r}=e;if(r<=n)return{text:t,cursor:n};const s=t.slice(0,n)+t.slice(r),i=Math.min(n,Math.max(0,s.length-1));return{text:s,cursor:Math.max(0,i)}}function p(t,e=1){if(null===t||0===t.length)return e;const n=Number(t);return Number.isNaN(n)?e:Math.max(0,n)||e}}};