try{!function(){var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new n.Error).stack;r&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[r]="9be8084f-2a69-4755-ad67-461b85058a3e",n._sentryDebugIdIdentifier="sentry-dbid-9be8084f-2a69-4755-ad67-461b85058a3e")}()}catch(n){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.01.28-fd13201"}}catch(n){}}(),exports.id=761,exports.ids=[761],exports.modules={"./src/commands/install-core-posix.ts":(n,r,e)=>{e.d(r,{BV:()=>d});var o=e("node:child_process"),t=e("node:fs"),i=e("node:os"),c=e("node:path"),s=function(n,r,e,o){return new(e||(e=Promise))((function(t,i){function c(n){try{a(o.next(n))}catch(n){i(n)}}function s(n){try{a(o.throw(n))}catch(n){i(n)}}function a(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(n){n(r)}))).then(c,s)}a((o=o.apply(n,r||[])).next())}))};const a=6e4;function l(n){const r=c.join(i.homedir(),".local","bin");t.mkdirSync(r,{recursive:!0});const e=c.join(n,"cursor-agent"),o=c.join(r,"agent"),s=c.join(r,"cursor-agent"),a=(n,r)=>{try{t.unlinkSync(r)}catch(n){}t.symlinkSync(n,r)};a(e,o),a(e,s)}function u(){const n=c.join(i.homedir(),".local","bin");t.mkdirSync(n,{recursive:!0});const r=c.join(n,"cursor"),e=["#!/bin/sh","set -eu","","# Find cursor executable in PATH, excluding the current shim","find_cursor() {",'  old_IFS="$IFS"',"  IFS=:","  for dir in $PATH; do",'    [ -n "$dir" ] || continue','    cursor_path="$dir/cursor"','    if [ "$cursor_path" != "$HOME/.local/bin/cursor" ] && [ -x "$cursor_path" ]; then','      IFS="$old_IFS"','      echo "$cursor_path"',"      return 0","    fi","  done",'  IFS="$old_IFS"',"  return 1","}","","OTHER_CURSOR=$(find_cursor || true)","",'if [ -n "${OTHER_CURSOR:-}" ]; then','  exec "$OTHER_CURSOR" "$@"',"else",'  if [ "$1" != "agent" ]; then',"    echo \"Error: No Cursor IDE installation found. Use 'cursor agent' or 'agent' to run the agent.\" 1>&2",'    echo "Or, install Cursor at https://cursor.com/download" 1>&2',"    exit 1","  fi",'  exec "$HOME/.local/bin/agent" "$@"',"fi",""].join("\n");t.writeFileSync(r,e,{mode:493});try{t.chmodSync(r,493)}catch(n){}}function d(n){return s(this,void 0,void 0,(function*(){const{version:r,urlPrefix:e,showProgress:s=!1,skipIfLocked:d=!1}=n,f=c.join(i.homedir(),".local","share","cursor-agent",".install.lock"),h=function(n){const r=c.dirname(n);try{t.mkdirSync(r,{recursive:!0})}catch(n){}try{if(t.existsSync(n)){const r=t.statSync(n);if(Date.now()-r.mtimeMs>a)try{t.statSync(n).ino===r.ino&&t.unlinkSync(n)}catch(n){}}return t.openSync(n,"wx")}catch(n){if(n&&"object"==typeof n&&"code"in n&&"EEXIST"===n.code)return null;throw n}}(f);if(null===h){if(d)return;throw new Error("Another CLI update is already in progress. Wait for it to finish or remove ~/.local/share/cursor-agent/.install.lock if no update is running.")}try{const{os:a,arch:d}=function(){const n=i.platform(),r=i.arch();let e,o;switch(n){case"linux":e="linux";break;case"darwin":e="darwin";break;default:throw new Error(`Unsupported operating system: ${n}`)}switch(r){case"x64":o="x64";break;case"arm64":o="arm64";break;default:throw new Error(`Unsupported architecture: ${r}`)}return{os:e,arch:o}}(),f=c.join(i.homedir(),".local","share","cursor-agent","versions"),h=c.join(f,r),y=c.join(f,`.${r}`);if(t.existsSync(h))return l(h),void u();try{t.rmSync(y,{recursive:!0,force:!0})}catch(n){}t.mkdirSync(y,{recursive:!0});const p=`${e.endsWith("/")?e:`${e}/`}${a}/${d}/agent-cli-package.tar.gz`;try{const r=s?["-fSL","--progress-bar",p]:["-fSL","-s",p];yield new Promise(((e,t)=>{const i=n.showProgress?"inherit":"ignore",c=(0,o.spawn)("tar",["--strip-components=1","-xzf","-","-C",y],{stdio:["pipe","ignore",i]}),s=(0,o.spawn)("curl",r,{stdio:["ignore","pipe",i]});s.stdout.pipe(c.stdin);let a=null,l=null,u=!1;const d=()=>{null===a||null===l||u||(u=!0,0===a?0===l?e():t(new Error(`Extraction failed (tar exit ${l})`)):t(new Error(`Download failed (curl exit ${a})`)))};s.on("error",(n=>{if(!u){u=!0;try{c.kill("SIGTERM")}catch(n){}t(n)}})),c.on("error",(n=>{if(!u){u=!0;try{s.kill("SIGTERM")}catch(n){}t(n)}})),s.on("close",(n=>{var r;a=null!=n?n:1;try{null===(r=c.stdin)||void 0===r||r.end()}catch(n){}if(0!==a)try{c.kill("SIGTERM")}catch(n){}d()})),c.on("close",(n=>{if(l=null!=n?n:1,0!==l)try{s.kill("SIGTERM")}catch(n){}d()}))}));try{t.rmSync(h,{recursive:!0,force:!0})}catch(n){}t.renameSync(y,h)}catch(n){try{t.rmSync(y,{recursive:!0,force:!0})}catch(n){}throw new Error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}l(h),u()}finally{!function(n,r){try{t.closeSync(r)}catch(n){}try{t.unlinkSync(n)}catch(n){}}(f,h)}}))}},"./src/commands/install.ts":(n,r,e)=>{e.r(r),e.d(r,{handleInstall:()=>c});var o=e("./src/console-io.ts"),t=e("./src/commands/install-core-posix.ts"),i=function(n,r,e,o){return new(e||(e=Promise))((function(t,i){function c(n){try{a(o.next(n))}catch(n){i(n)}}function s(n){try{a(o.throw(n))}catch(n){i(n)}}function a(n){var r;n.done?t(n.value):(r=n.value,r instanceof e?r:new e((function(n){n(r)}))).then(c,s)}a((o=o.apply(n,r||[])).next())}))};function c(n,r){return i(this,arguments,void 0,(function*(n,r,e=!1){try{e&&(0,o.p2)(`Downloading version ${n}...`),yield(0,t.BV)({version:n,urlPrefix:r,showProgress:e}),e&&(0,o.p2)(`Successfully installed version ${n}`),process.exit(0)}catch(n){throw new Error(`Installation failed: ${n instanceof Error?n.message:String(n)}`)}}))}}};