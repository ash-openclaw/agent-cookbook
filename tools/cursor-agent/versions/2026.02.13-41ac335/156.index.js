try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e2988b6c-d07e-4705-954c-e75374bb15d2",e._sentryDebugIdIdentifier="sentry-dbid-e2988b6c-d07e-4705-954c-e75374bb15d2")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.02.13-41ac335"}}catch(e){}}(),exports.id=156,exports.ids=[156],exports.modules={"./src/utils/git-diffs.ts":(e,t,n)=>{n.r(t),n.d(t,{buildFileChanges:()=>y,buildUnifiedDiff:()=>f,collectGitStatuses:()=>b});var o=n("node:child_process"),i=n("node:fs"),r=n.n(i),s=n("node:os"),d=n.n(s),c=n("node:path"),l=n.n(c);const f=e=>{const t=r().mkdtempSync(l().join(d().tmpdir(),"delta-full-")),n=l().join(t,"before"),i=l().join(t,"after");r().mkdirSync(n,{recursive:!0}),r().mkdirSync(i,{recursive:!0});const s=(e,t,n)=>{const o=l().join(e,t);r().mkdirSync(l().dirname(o),{recursive:!0}),r().writeFileSync(o,n)};for(const t of e){const e=l().isAbsolute(t.path)?l().relative(process.cwd(),t.path):t.path;void 0!==t.before&&s(n,e,t.before),void 0!==t.after&&s(i,e,t.after)}const c=["diff","--no-index","--no-prefix","--diff-algorithm=patience","--unified=3","--","before","after"];let f="";try{f=(0,o.execFileSync)("git",c,{encoding:"utf8",cwd:t})}catch(e){const t=e;if(!(null==t?void 0:t.stdout))throw e;f=t.stdout}const a=(e=>{const t=l().join(n,""),o=l().join(i,"");let r=e.split(t).join("").split(o).join("");const s=l().join("before",""),d=l().join("after","");return r=r.split(s).join("").split(d).join(""),r})(f);return r().rmSync(t,{recursive:!0,force:!0}),a};function a(e){return(0,o.execFileSync)("git",e,{encoding:"utf8"}).trim()}function u(e){try{return(0,o.execFileSync)("git",["show",`HEAD:${e}`],{encoding:"utf8"})}catch(e){return}}let p=null;function h(e){const t=p||(p=a(["rev-parse","--show-toplevel"]),p),n=l().isAbsolute(e)?e:l().join(t,e);try{return(0,i.readFileSync)(n,"utf8")}catch(e){return""}}function b(){const e=a(["diff","--name-status","HEAD"]),t=(""===e?[]:e.split("\n")).filter(Boolean).map((e=>{var t,n,o,i,r;const s=e.split("\t"),d=(null!==(t=s[0])&&void 0!==t?t:"")[0];if("R"===d||"C"===d){const e=null!==(n=s[1])&&void 0!==n?n:"";return{code:d,path:null!==(o=s[2])&&void 0!==o?o:e,oldPath:e}}return{code:d,path:null!==(r=null!==(i=s[1])&&void 0!==i?i:s[0])&&void 0!==r?r:""}})),n=a(["ls-files","--others","--exclude-standard"]),o=""===n?[]:n.split("\n");for(const e of o)e&&t.push({code:"A",path:e});return t}function y(e){var t,n,o;const i=[];for(const r of e)if(r.path)switch(r.code){case"A":{const e=h(r.path);i.push({path:r.path,before:void 0,after:e});break}case"M":{const e=null!==(t=u(r.path))&&void 0!==t?t:"",n=h(r.path);i.push({path:r.path,before:e,after:n});break}case"D":{const e=null!==(n=u(r.path))&&void 0!==n?n:"";i.push({path:r.path,before:e,after:void 0});break}case"R":{const e=r.oldPath&&null!==(o=u(r.oldPath))&&void 0!==o?o:"",t=h(r.path);i.push({path:r.path,before:e,after:t});break}}return i}}};