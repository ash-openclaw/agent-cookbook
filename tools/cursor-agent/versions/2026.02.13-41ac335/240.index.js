/*! For license information please see 240.index.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="aa61a284-987b-4389-9bb5-ab454a3f8291",e._sentryDebugIdIdentifier="sentry-dbid-aa61a284-987b-4389-9bb5-ab454a3f8291")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.02.13-41ac335"}}catch(e){}}(),exports.id=240,exports.ids=[240],exports.modules={"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/admin.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(const{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())};const r=[]},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/backoff-timeout.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");class s{constructor(e,t){this.callback=e,this.initialDelay=1e3,this.multiplier=1.6,this.maxDelay=12e4,this.jitter=.2,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,this.id=s.getNextId(),t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay),this.nextDelay=this.initialDelay,this.timerId=setTimeout((()=>{}),0),clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(e){o.trace(n.LogVerbosity.DEBUG,"backoff","{"+this.id+"} "+e)}runTimer(e){var t,r;this.trace("runTimer(delay="+e+")"),this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e),clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.trace("timer fired"),this.running=!1,this.callback()}),e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.trace("runOnce()"),this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;var r,n;this.nextDelay=e+(r=-t,n=t,Math.random()*(n-r)+r)}stop(){this.trace("stop()"),clearTimeout(this.timerId),this.running=!1}reset(){if(this.trace("reset() running="+this.running),this.nextDelay=this.initialDelay,this.running){const e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=s,s.nextId=0},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-credentials.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js");class o{static createFromMetadataGenerator(e){return new i(e)}static createFromGoogleCredential(e){return o.createFromMetadataGenerator(((t,r)=>{let o;var s;o="getRequestHeaders"in(s=e)&&"function"==typeof s.getRequestHeaders?e.getRequestHeaders(t.service_url):new Promise(((r,n)=>{e.getRequestMetadata(t.service_url,((e,t)=>{e?n(e):t?r(t):n(new Error("Headers not set by metadata plugin"))}))})),o.then((e=>{const t=new n.Metadata;for(const r of Object.keys(e))t.add(r,e[r]);r(null,t)}),(e=>{r(e)}))}))}static createEmpty(){return new a}}t.CallCredentials=o;class s extends o{constructor(e){super(),this.creds=e}async generateMetadata(e){const t=new n.Metadata,r=await Promise.all(this.creds.map((t=>t.generateMetadata(e))));for(const e of r)t.merge(e);return t}compose(e){return new s(this.creds.concat([e]))}_equals(e){return this===e||e instanceof s&&this.creds.every(((t,r)=>t._equals(e.creds[r])))}}class i extends o{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise(((t,r)=>{this.metadataGenerator(e,((e,n)=>{void 0!==n?t(n):r(e)}))}))}compose(e){return new s([this,e])}_equals(e){return this===e||e instanceof i&&this.metadataGenerator===e.metadataGenerator}}class a extends o{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof a}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-interface.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.InterceptingListenerImpl=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()}))}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,(e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())}))}onReceiveStatus(e){this.listener.onReceiveStatus(e,(e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)}))}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-number.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=function(){return r++};let r=0},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=void 0,t.callErrorFromStatus=function(e,t){const r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=`${new Error(r).stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:n})};const n=r("events"),o=r("stream"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");class i extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=i;class a extends o.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=a;class l extends o.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=l;class c extends o.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=c},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/certificate-provider.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileWatcherCertificateProvider=void 0;const n=r("fs"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");function i(e){o.trace(s.LogVerbosity.DEBUG,"certificate_provider",e)}const a=(0,r("util").promisify)(n.readFile);t.FileWatcherCertificateProvider=class{constructor(e){if(this.config=e,this.refreshTimer=null,this.fileResultPromise=null,this.latestCaUpdate=void 0,this.caListeners=new Set,this.latestIdentityUpdate=void 0,this.identityListeners=new Set,this.lastUpdateTime=null,void 0===e.certificateFile!=(void 0===e.privateKeyFile))throw new Error("certificateFile and privateKeyFile must be set or unset together");if(void 0===e.certificateFile&&void 0===e.caCertificateFile)throw new Error("At least one of certificateFile and caCertificateFile must be set");i("File watcher constructed with config "+JSON.stringify(e))}updateCertificates(){this.fileResultPromise||(this.fileResultPromise=Promise.allSettled([this.config.certificateFile?a(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?a(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?a(this.config.caCertificateFile):Promise.reject()]),this.fileResultPromise.then((([e,t,r])=>{if(this.refreshTimer){i("File watcher read certificates certificate "+e.status+", privateKey "+t.status+", CA certificate "+r.status),this.lastUpdateTime=new Date,this.fileResultPromise=null,"fulfilled"===e.status&&"fulfilled"===t.status?this.latestIdentityUpdate={certificate:e.value,privateKey:t.value}:this.latestIdentityUpdate=null,"fulfilled"===r.status?this.latestCaUpdate={caCertificate:r.value}:this.latestCaUpdate=null;for(const e of this.identityListeners)e(this.latestIdentityUpdate);for(const e of this.caListeners)e(this.latestCaUpdate)}})),i("File watcher initiated certificate update"))}maybeStartWatchingFiles(){if(!this.refreshTimer){const e=this.lastUpdateTime?(new Date).getTime()-this.lastUpdateTime.getTime():1/0;e>this.config.refreshIntervalMs&&this.updateCertificates(),e>2*this.config.refreshIntervalMs&&(this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0),this.refreshTimer=setInterval((()=>this.updateCertificates()),this.config.refreshIntervalMs),i("File watcher started watching")}}maybeStopWatchingFiles(){0===this.caListeners.size&&0===this.identityListeners.size&&(this.fileResultPromise=null,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null))}addCaCertificateListener(e){this.caListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestCaUpdate&&process.nextTick(e,this.latestCaUpdate)}removeCaCertificateListener(e){this.caListeners.delete(e),this.maybeStopWatchingFiles()}addIdentityCertificateListener(e){this.identityListeners.add(e),this.maybeStartWatchingFiles(),void 0!==this.latestIdentityUpdate&&process.nextTick(e,this.latestIdentityUpdate)}removeIdentityCertificateListener(e){this.identityListeners.delete(e),this.maybeStopWatchingFiles()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-credentials.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0,t.createCertificateProviderChannelCredentials=function(e,t,r){return new f(e,t,null!=r?r:{})};const n=r("tls"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-credentials.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/tls-helpers.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");function u(e,t){if(e&&!(e instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}class p{compose(e){return new y(this,e)}static createSsl(e,t,r,o){var i;if(u(e,"Root certificate"),u(t,"Private key"),u(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");const a=(0,n.createSecureContext)({ca:null!==(i=null!=e?e:(0,s.getDefaultRootsData)())&&void 0!==i?i:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES});return new g(a,null!=o?o:{})}static createFromSecureContext(e,t){return new g(e,null!=t?t:{})}static createInsecure(){return new d}}t.ChannelCredentials=p;class d extends p{constructor(){super()}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return!1}_equals(e){return e instanceof d}_createSecureConnector(e,t,r){return{connect:e=>Promise.resolve({socket:e,secure:!1}),waitForReady:()=>Promise.resolve(),getCallCredentials:()=>null!=r?r:o.CallCredentials.createEmpty(),destroy(){}}}}function m(e,t,r,o){var s,l,c,u;const p={secureContext:e};if(t.checkServerIdentity&&(p.checkServerIdentity=t.checkServerIdentity),void 0!==t.rejectUnauthorized&&(p.rejectUnauthorized=t.rejectUnauthorized),p.ALPNProtocols=["h2"],o["grpc.ssl_target_name_override"]){const e=o["grpc.ssl_target_name_override"],t=null!==(s=p.checkServerIdentity)&&void 0!==s?s:n.checkServerIdentity;p.checkServerIdentity=(r,n)=>t(e,n),p.servername=e}else if("grpc.http_connect_target"in o){const e=(0,a.getDefaultAuthority)(null!==(l=(0,i.parseUri)(o["grpc.http_connect_target"]))&&void 0!==l?l:{path:"localhost"}),t=(0,i.splitHostPort)(e);p.servername=null!==(c=null==t?void 0:t.host)&&void 0!==c?c:e}o["grpc-node.tls_enable_trace"]&&(p.enableTrace=!0);let d=r;if("grpc.http_connect_target"in o){const e=(0,i.parseUri)(o["grpc.http_connect_target"]);e&&(d=e)}const m=(0,a.getDefaultAuthority)(d),h=(0,i.splitHostPort)(m),g=null!==(u=null==h?void 0:h.host)&&void 0!==u?u:m;return p.host=g,p.servername=g,p}class h{constructor(e,t){this.connectionOptions=e,this.callCredentials=t}connect(e){const t=Object.assign({socket:e},this.connectionOptions);return new Promise(((e,r)=>{const o=(0,n.connect)(t,(()=>{var t;null!==(t=this.connectionOptions.rejectUnauthorized)&&void 0!==t&&!t||o.authorized?e({socket:o,secure:!0}):r(o.authorizationError)}));o.on("error",(e=>{r(e)}))}))}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}}class g extends p{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t}_isSecure(){return!0}_equals(e){return this===e||e instanceof g&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}_createSecureConnector(e,t,r){const n=m(this.secureContext,this.verifyOptions,e,t);return new h(n,null!=r?r:o.CallCredentials.createEmpty())}}class f extends p{constructor(e,t,r){super(),this.caCertificateProvider=e,this.identityCertificateProvider=t,this.verifyOptions=r,this.refcount=0,this.latestCaUpdate=void 0,this.latestIdentityUpdate=void 0,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this),this.secureContextWatchers=[]}_isSecure(){return!0}_equals(e){var t,r;return this===e||e instanceof f&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&(null===(t=this.verifyOptions)||void 0===t?void 0:t.checkServerIdentity)===(null===(r=e.verifyOptions)||void 0===r?void 0:r.checkServerIdentity)}ref(){var e;0===this.refcount&&(this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.addIdentityCertificateListener(this.identityCertificateUpdateListener)),this.refcount+=1}unref(){var e;this.refcount-=1,0===this.refcount&&(this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener),null===(e=this.identityCertificateProvider)||void 0===e||e.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_createSecureConnector(e,t,r){return this.ref(),new f.SecureConnectorImpl(this,e,t,null!=r?r:o.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(const e of this.secureContextWatchers)e(this.getLatestSecureContext());this.secureContextWatchers=[]}}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.maybeUpdateWatchers()}hasReceivedUpdates(){return void 0!==this.latestCaUpdate&&(!this.identityCertificateProvider||void 0!==this.latestIdentityUpdate)}getSecureContext(){return this.hasReceivedUpdates()?Promise.resolve(this.getLatestSecureContext()):new Promise((e=>{this.secureContextWatchers.push(e)}))}getLatestSecureContext(){var e,t;if(!this.latestCaUpdate)return null;if(null!==this.identityCertificateProvider&&!this.latestIdentityUpdate)return null;try{return(0,n.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:null===(e=this.latestIdentityUpdate)||void 0===e?void 0:e.privateKey,cert:null===(t=this.latestIdentityUpdate)||void 0===t?void 0:t.certificate,ciphers:s.CIPHER_SUITES})}catch(e){return(0,l.log)(c.LogVerbosity.ERROR,"Failed to createSecureContext with error "+e.message),null}}}f.SecureConnectorImpl=class{constructor(e,t,r,n){this.parent=e,this.channelTarget=t,this.options=r,this.callCredentials=n}connect(e){return new Promise(((t,r)=>{const o=this.parent.getLatestSecureContext();if(!o)return void r(new Error("Failed to load credentials"));e.closed&&r(new Error("Socket closed while loading credentials"));const s=m(o,this.parent.verifyOptions,this.channelTarget,this.options),i=Object.assign({socket:e},s),a=()=>{r(new Error("Socket closed"))},l=e=>{r(e)},c=(0,n.connect)(i,(()=>{var e;c.removeListener("close",a),c.removeListener("error",l),null!==(e=this.parent.verifyOptions.rejectUnauthorized)&&void 0!==e&&!e||c.authorized?t({socket:c,secure:!0}):r(c.authorizationError)}));c.once("close",a),c.once("error",l)}))}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};class y extends p{constructor(e,t){if(super(),this.channelCredentials=e,this.callCredentials=t,!e._isSecure())throw new Error("Cannot compose insecure credentials")}compose(e){const t=this.callCredentials.compose(e);return new y(this.channelCredentials,t)}_isSecure(){return!0}_equals(e){return this===e||e instanceof y&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}_createSecureConnector(e,t,r){const n=this.callCredentials.compose(null!=r?r:o.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,t,n)}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-options.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recognizedOptions=void 0,t.channelOptionsEqual=function(e,t){const r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let o=0;o<r.length;o+=1){if(r[o]!==n[o])return!1;if(e[r[o]]!==t[n[o]])return!1}return!0},t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0,"grpc.lb.ring_hash.ring_size_cap":!0,"grpc-node.retry_max_attempts_limit":!0,"grpc-node.flow_control_window":!0}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-credentials.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/internal-channel.js");t.ChannelImplementation=class{constructor(e,t,r){if("string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.internalChannel=new o.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,o)}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTrackerStub=t.ChannelzCallTracker=t.ChannelzChildrenTrackerStub=t.ChannelzChildrenTracker=t.ChannelzTrace=t.ChannelzTraceStub=void 0,t.unregisterChannelzRef=function(e){f[e.kind].eraseElementByKey(e.id)},t.getChannelzHandlers=A,t.getChannelzServiceDefinition=M,t.setup=function(){(0,l.registerAdminService)(M,A)};const n=r("net"),o=r("../../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/ordered-map/dist/esm/index.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/admin.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/make-client.js");function u(e){return{channel_id:e.id,name:e.name}}function p(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{socket_id:e.id,name:e.name}}const m=100;t.ChannelzTraceStub=class{constructor(){this.events=[],this.creationTimestamp=new Date,this.eventsLogged=0}addTrace(){}getTraceMessage(){return{creation_timestamp:T(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}},t.ChannelzTrace=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:"channel"===(null==r?void 0:r.kind)?r:void 0,childSubchannel:"subchannel"===(null==r?void 0:r.kind)?r:void 0}),this.events.length>=64&&(this.events=this.events.slice(32)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:T(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map((e=>({description:e.description,severity:e.severity,timestamp:T(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?p(e.childSubchannel):null})))}}};class h{constructor(){this.channelChildren=new o.OrderedMap,this.subchannelChildren=new o.OrderedMap,this.socketChildren=new o.OrderedMap,this.trackerMap={channel:this.channelChildren,subchannel:this.subchannelChildren,socket:this.socketChildren}}refChild(e){const t=this.trackerMap[e.kind],r=t.find(e.id);r.equals(t.end())?t.setElement(e.id,{ref:e,count:1},r):r.pointer[1].count+=1}unrefChild(e){const t=this.trackerMap[e.kind],r=t.getElementByKey(e.id);void 0!==r&&(r.count-=1,0===r.count&&t.eraseElementByKey(e.id))}getChildLists(){return{channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}}t.ChannelzChildrenTracker=h,t.ChannelzChildrenTrackerStub=class extends h{refChild(){}unrefChild(){}};class g{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=g,t.ChannelzCallTrackerStub=class extends g{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}};const f={channel:new o.OrderedMap,subchannel:new o.OrderedMap,server:new o.OrderedMap,socket:new o.OrderedMap},y=e=>{let t=1;const r=f[e];return(n,o,s)=>{const i=t++,a={id:i,name:n,kind:e};return s&&r.setElement(i,{ref:a,getInfo:o}),a}};function b(e){if(""===e)return[];const t=e.split(":").map((e=>function(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}(e)));return[].concat(...t)}function v(e){return Buffer.from(Uint8Array.from(e.split(".").map((e=>Number.parseInt(e)))))}function _(e){if((0,n.isIPv4)(e))return v(e);if(function(e){return(0,n.isIPv6)(e)&&e.toLowerCase().startsWith("::ffff:")&&(0,n.isIPv4)(e.substring(7))}(e))return v(e.substring(7));if((0,n.isIPv6)(e)){let t,r;const n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));const o=Buffer.from(b(t)),s=Buffer.from(b(r)),i=Buffer.alloc(16-o.length-s.length,0);return Buffer.concat([o,i,s])}return null}function S(e){switch(e){case s.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case s.ConnectivityState.IDLE:return{state:"IDLE"};case s.ConnectivityState.READY:return{state:"READY"};case s.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case s.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function T(e){if(!e)return null;const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function x(e){const t=e.getInfo(),r=[],n=[];return t.children.channels.forEach((e=>{r.push(u(e[1].ref))})),t.children.subchannels.forEach((e=>{n.push(p(e[1].ref))})),{ref:u(e.ref),data:{target:t.target,state:S(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:T(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:r,subchannel_ref:n}}function E(e,t){const r=parseInt(e.request.channel_id,10),n=f.channel.getElementByKey(r);void 0!==n?t(null,{channel:x(n)}):t({code:i.Status.NOT_FOUND,details:"No channel data found for id "+r})}function C(e,t){const r=parseInt(e.request.max_results,10)||m,n=[],o=parseInt(e.request.start_channel_id,10),s=f.channel;let i;for(i=s.lowerBound(o);!i.equals(s.end())&&n.length<r;i=i.next())n.push(x(i.pointer[1]));t(null,{channel:n,end:i.equals(s.end())})}function w(e){const t=e.getInfo(),r=[];return t.listenerChildren.sockets.forEach((e=>{r.push(d(e[1].ref))})),{ref:(n=e.ref,{server_id:n.id}),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:T(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:r};var n}function j(e,t){const r=parseInt(e.request.server_id,10),n=f.server.getElementByKey(r);void 0!==n?t(null,{server:w(n)}):t({code:i.Status.NOT_FOUND,details:"No server data found for id "+r})}function O(e,t){const r=parseInt(e.request.max_results,10)||m,n=parseInt(e.request.start_server_id,10),o=f.server,s=[];let i;for(i=o.lowerBound(n);!i.equals(o.end())&&s.length<r;i=i.next())s.push(w(i.pointer[1]));t(null,{server:s,end:i.equals(o.end())})}function P(e,t){const r=parseInt(e.request.subchannel_id,10),n=f.subchannel.getElementByKey(r);if(void 0===n)return void t({code:i.Status.NOT_FOUND,details:"No subchannel data found for id "+r});const o=n.getInfo(),s=[];o.children.sockets.forEach((e=>{s.push(d(e[1].ref))})),t(null,{subchannel:{ref:p(n.ref),data:{target:o.target,state:S(o.state),calls_started:o.callTracker.callsStarted,calls_succeeded:o.callTracker.callsSucceeded,calls_failed:o.callTracker.callsFailed,last_call_started_timestamp:T(o.callTracker.lastCallStartedTimestamp),trace:o.trace.getTraceMessage()},socket_ref:s}})}function R(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=_(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function N(e,t){var r,n,o,s,a;const l=parseInt(e.request.socket_id,10),c=f.socket.getElementByKey(l);if(void 0===c)return void t({code:i.Status.NOT_FOUND,details:"No socket data found for id "+l});const u=c.getInfo(),p=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=u.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=u.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(o=u.security.localCertificate)&&void 0!==o?o:void 0,remote_certificate:null!==(s=u.security.remoteCertificate)&&void 0!==s?s:void 0}}:null;t(null,{socket:{ref:d(c.ref),local:u.localAddress?R(u.localAddress):null,remote:u.remoteAddress?R(u.remoteAddress):null,remote_name:null!==(a=u.remoteName)&&void 0!==a?a:void 0,security:p,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:T(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:T(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:T(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:T(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}}})}function k(e,t){const r=parseInt(e.request.server_id,10),n=f.server.getElementByKey(r);if(void 0===n)return void t({code:i.Status.NOT_FOUND,details:"No server data found for id "+r});const o=parseInt(e.request.start_socket_id,10),s=parseInt(e.request.max_results,10)||m,a=n.getInfo().sessionChildren.sockets,l=[];let c;for(c=a.lowerBound(o);!c.equals(a.end())&&l.length<s;c=c.next())l.push(d(c.pointer[1].ref));t(null,{socket_ref:l,end:c.equals(a.end())})}function A(){return{GetChannel:E,GetTopChannels:C,GetServer:j,GetServers:O,GetSubchannel:P,GetSocket:N,GetServerSockets:k}}t.registerChannelzChannel=y("channel"),t.registerChannelzSubchannel=y("subchannel"),t.registerChannelzServer=y("server"),t.registerChannelzSocket=y("socket");let I=null;function M(){if(I)return I;const e=(0,r("../../node_modules/.pnpm/@grpc+proto-loader@0.7.13/node_modules/@grpc/proto-loader/build/src/index.js").Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]}),t=(0,c.loadPackageDefinition)(e);return I=t.grpc.channelz.v1.Channelz.service,I}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client-interceptors.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0,t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let o=[];o=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map((e=>e(t)))).filter((e=>e)):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map((e=>e(t)))).filter((e=>e));const s=Object.assign({},r,{method_definition:t}),i=o.reduceRight(((e,t)=>r=>t(r,e)),(e=>function(e,t,r){const n=function(e,t,r){var n,o;const s=null!==(n=r.deadline)&&void 0!==n?n:1/0,i=r.host,a=null!==(o=r.parent)&&void 0!==o?o:null,l=r.propagate_flags,c=r.credentials,u=e.createCall(t,s,i,a,l);return c&&u.setCredentials(c),u}(e,r.path,t);return r.responseStream?new d(n,r):new p(n,r)}(n,e,t)));return i(s)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-interface.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/error.js");class a extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,a)}}t.InterceptorConfigurationError=a,t.ListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}},t.RequesterBuilder=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};const l={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},c={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};t.InterceptingCall=class{constructor(e,t){var r,n,o,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,this.requester=t?{start:null!==(r=t.start)&&void 0!==r?r:c.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:c.sendMessage,halfClose:null!==(o=t.halfClose)&&void 0!==o?o:c.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:c.cancel}:c}cancelWithStatus(e,t){this.requester.cancel((()=>{this.nextCall.cancelWithStatus(e,t)}))}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,i,a,c;const u={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(i=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==i?i:e=>{},onReceiveStatus:null!==(c=null===(a=null==t?void 0:t.onReceiveStatus)||void 0===a?void 0:a.bind(t))&&void 0!==c?c:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,((e,t)=>{var r,n,s;let i;if(this.processingMetadata=!1,(0,o.isInterceptingListener)(t))i=t;else{const e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:l.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:l.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:l.onReceiveStatus};i=new o.InterceptingListenerImpl(e,u)}this.nextCall.start(e,i),this.processPendingMessage(),this.processPendingHalfClose()}))}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,(r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())}))}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose((()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()}))}};class u{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){return void this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,i.getErrorMessage)(e)}`)}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var o;let a;try{a=this.methodDefinition.responseDeserialize(e)}catch(e){return r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,i.getErrorMessage)(e)}`,metadata:new n.Metadata},void this.call.cancelWithStatus(r.code,r.details)}null===(o=null==t?void 0:t.onReceiveMessage)||void 0===o||o.call(t,a)},onReceiveStatus:e=>{var n,o;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o||o.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class p extends u{constructor(e,t){super(e,t)}start(e,t){var r,n;let o=!1;const s={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;o=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;o||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class d extends u{}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client-interceptors.js"),c=Symbol(),u=Symbol(),p=Symbol(),d=Symbol();function m(e){return"function"==typeof e}function h(e){var t;return(null===(t=e.stack)||void 0===t?void 0:t.split("\n").slice(1).join("\n"))||"no stack trace available"}t.Client=class{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[u]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[p]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[u].length>0&&this[p].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[d]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[c]=r.channelOverride;else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[c]=n(e,t,r)}else this[c]=new o.ChannelImplementation(e,t,r)}close(){this[c].close()}getChannel(){return this[c]}waitForReady(e,t){const r=n=>{if(n)return void t(new Error("Failed to connect before the deadline"));let o;try{o=this[c].getConnectivityState(!0)}catch(e){return void t(new Error("The channel has been closed"))}if(o===s.ConnectivityState.READY)t();else try{this[c].watchConnectivityState(o,e,r)}catch(e){t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(m(e))return{metadata:new a.Metadata,options:{},callback:e};if(m(t))return e instanceof a.Metadata?{metadata:e,options:{},callback:t}:{metadata:new a.Metadata,options:e,callback:t};if(!(e instanceof a.Metadata&&t instanceof Object&&m(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,o,s,a,m){var g,f;const y=this.checkOptionalUnaryResponseArguments(s,a,m),b={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r};let v={argument:o,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[c],methodDefinition:b,callOptions:y.options,callback:y.callback};this[d]&&(v=this[d](v));const _=v.call,S={clientInterceptors:this[u],clientInterceptorProviders:this[p],callInterceptors:null!==(g=v.callOptions.interceptors)&&void 0!==g?g:[],callInterceptorProviders:null!==(f=v.callOptions.interceptor_providers)&&void 0!==f?f:[]},T=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);_.call=T;let x=null,E=!1,C=new Error;return T.start(v.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==x&&T.cancelWithStatus(i.Status.UNIMPLEMENTED,"Too many responses received"),x=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===i.Status.OK)if(null===x){const t=h(C);v.callback((0,n.callErrorFromStatus)({code:i.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else v.callback(null,x);else{const t=h(C);v.callback((0,n.callErrorFromStatus)(e,t))}C=null,_.emit("status",e)}}}),T.sendMessage(o),T.halfClose(),_}makeClientStreamRequest(e,t,r,o,s,a){var m,g;const f=this.checkOptionalUnaryResponseArguments(o,s,a),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r};let b={metadata:f.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[c],methodDefinition:y,callOptions:f.options,callback:f.callback};this[d]&&(b=this[d](b));const v=b.call,_={clientInterceptors:this[u],clientInterceptorProviders:this[p],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,l.getInterceptingCall)(_,b.methodDefinition,b.callOptions,b.channel);v.call=S;let T=null,x=!1,E=new Error;return S.start(b.metadata,{onReceiveMetadata:e=>{v.emit("metadata",e)},onReceiveMessage(e){null!==T&&S.cancelWithStatus(i.Status.UNIMPLEMENTED,"Too many responses received"),T=e,S.startRead()},onReceiveStatus(e){if(!x){if(x=!0,e.code===i.Status.OK)if(null===T){const t=h(E);b.callback((0,n.callErrorFromStatus)({code:i.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else b.callback(null,T);else{const t=h(E);b.callback((0,n.callErrorFromStatus)(e,t))}E=null,v.emit("status",e)}}}),v}checkMetadataAndOptions(e,t){let r,n;return e instanceof a.Metadata?(r=e,n=t||{}):(n=e||{},r=new a.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,o,s,a){var m,g;const f=this.checkMetadataAndOptions(s,a),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r};let b={argument:o,metadata:f.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[c],methodDefinition:y,callOptions:f.options};this[d]&&(b=this[d](b));const v=b.call,_={clientInterceptors:this[u],clientInterceptorProviders:this[p],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,l.getInterceptingCall)(_,b.methodDefinition,b.callOptions,b.channel);v.call=S;let T=!1,x=new Error;return S.start(b.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!T){if(T=!0,v.push(null),e.code!==i.Status.OK){const t=h(x);v.emit("error",(0,n.callErrorFromStatus)(e,t))}x=null,v.emit("status",e)}}}),S.sendMessage(o),S.halfClose(),v}makeBidiStreamRequest(e,t,r,o,s){var a,m;const g=this.checkMetadataAndOptions(o,s),f={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r};let y={metadata:g.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[c],methodDefinition:f,callOptions:g.options};this[d]&&(y=this[d](y));const b=y.call,v={clientInterceptors:this[u],clientInterceptorProviders:this[p],callInterceptors:null!==(a=y.callOptions.interceptors)&&void 0!==a?a:[],callInterceptorProviders:null!==(m=y.callOptions.interceptor_providers)&&void 0!==m?m:[]},_=(0,l.getInterceptingCall)(v,y.methodDefinition,y.callOptions,y.channel);b.call=_;let S=!1,T=new Error;return _.start(y.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!S){if(S=!0,b.push(null),e.code!==i.Status.OK){const t=h(T);b.emit("error",(0,n.callErrorFromStatus)(e,t))}T=null,b.emit("status",e)}}}),b}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/compression-algorithms.js":(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/compression-filter.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r("zlib"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/compression-algorithms.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");class l{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));const n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){const t=1===e.readUInt8(0);let r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends l{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class u extends l{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise(((t,r)=>{n.deflate(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{let o=0;const i=[],a=n.createInflate();a.on("data",(e=>{i.push(e),o+=e.byteLength,-1!==this.maxRecvMessageLength&&o>this.maxRecvMessageLength&&(a.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))})),a.on("end",(()=>{t(Buffer.concat(i))})),a.write(e),a.end()}))}}class p extends l{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise(((t,r)=>{n.gzip(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{let o=0;const i=[],a=n.createGunzip();a.on("data",(e=>{i.push(e),o+=e.byteLength,-1!==this.maxRecvMessageLength&&o>this.maxRecvMessageLength&&(a.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))})),a.on("end",(()=>{t(Buffer.concat(i))})),a.write(e),a.end()}))}}class d extends l{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function m(e,t){switch(e){case"identity":return new c;case"deflate":return new u(t);case"gzip":return new p(t);default:return new d(e)}}class h extends i.BaseFilter{constructor(e,t){var r,n,i;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";const l=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!==(r=e["grpc.max_receive_message_length"])&&void 0!==r?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.maxSendMessageLength=null!==(n=e["grpc.max_send_message_length"])&&void 0!==n?n:s.DEFAULT_MAX_SEND_MESSAGE_LENGTH,void 0!==l)if("number"==typeof(u=l)&&"string"==typeof o.CompressionAlgorithms[u]){const e=o.CompressionAlgorithms[l],r=null===(i=t.serverSupportedEncodingHeader)||void 0===i?void 0:i.split(",");r&&!r.includes(e)||(this.currentCompressionAlgorithm=e,this.sendCompression=m(this.currentCompressionAlgorithm,-1))}else a.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${l}`);var u}async sendMetadata(e){const t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];"string"==typeof e&&(this.receiveCompression=m(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;const r=await e;if(-1!==this.maxSendMessageLength&&r.message.length>this.maxSendMessageLength)throw{code:s.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`};let n;return n=!(this.sendCompression instanceof c||2&(null!==(t=r.flags)&&void 0!==t?t:0)),{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=h,t.CompressionFilterFactory=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new h(this.options,this.sharedFilterConfig)}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js":(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js":(e,t)=>{var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(o||(t.Propagate=o={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/control-plane-status.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=function(e,t){return o.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),o=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS]},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/deadline.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.minDeadline=function(...e){let t=1/0;for(const r of e){const e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t},t.getDeadlineTimeoutString=function(e){const t=(new Date).getTime();e instanceof Date&&(e=e.getTime());const n=Math.max(e-t,0);for(const[e,t]of r){const r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw new Error("Deadline is too far in the future")},t.getRelativeTimeout=function(e){const t=(e instanceof Date?e.getTime():e)-(new Date).getTime();return t<0?0:t>n?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{const t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}},t.formatDateDifference=function(e,t){return((t.getTime()-e.getTime())/1e3).toFixed(3)+"s"};const r=[["m",1],["S",1e3],["M",6e4],["H",36e5]],n=2147483647},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/duration.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos},t.parseDuration=function(e){const t=e.match(r);return t?{seconds:Number.parseInt(t[1],10),nanos:t[2]?Number.parseInt(t[2].padEnd(9,"0"),10):0}:null};const r=/^(\d+)(?:\.(\d+))?s$/},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/environment.js":(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0,t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER="true"===(null!==(r=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)&&void 0!==r?r:"false")},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/error.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/experimental.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=t.createCertificateProviderChannelCredentials=t.FileWatcherCertificateProvider=t.createCertificateProviderServerCredentials=t.createServerCredentialsWithInterceptors=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.EndpointMap=t.endpointHasAddress=t.endpointToString=t.subchannelAddressToString=t.LeafLoadBalancer=t.isLoadBalancerNameRegistered=t.parseLoadBalancingConfig=t.selectLbConfigFromList=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.parseDuration=t.durationToMs=t.splitHostPort=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js");Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return o.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return o.createResolver}});var s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js");Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}}),Object.defineProperty(t,"splitHostPort",{enumerable:!0,get:function(){return s.splitHostPort}});var i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/duration.js");Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return i.durationToMs}}),Object.defineProperty(t,"parseDuration",{enumerable:!0,get:function(){return i.parseDuration}});var a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/backoff-timeout.js");Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return a.BackoffTimeout}});var l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js");Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"selectLbConfigFromList",{enumerable:!0,get:function(){return l.selectLbConfigFromList}}),Object.defineProperty(t,"parseLoadBalancingConfig",{enumerable:!0,get:function(){return l.parseLoadBalancingConfig}}),Object.defineProperty(t,"isLoadBalancerNameRegistered",{enumerable:!0,get:function(){return l.isLoadBalancerNameRegistered}});var c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-pick-first.js");Object.defineProperty(t,"LeafLoadBalancer",{enumerable:!0,get:function(){return c.LeafLoadBalancer}});var u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js");Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}}),Object.defineProperty(t,"endpointToString",{enumerable:!0,get:function(){return u.endpointToString}}),Object.defineProperty(t,"endpointHasAddress",{enumerable:!0,get:function(){return u.endpointHasAddress}}),Object.defineProperty(t,"EndpointMap",{enumerable:!0,get:function(){return u.EndpointMap}});var p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-child-handler.js");Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return p.ChildLoadBalancerHandler}});var d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js");Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter.js");Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return m.BaseFilter}});var h=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter-stack.js");Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return h.FilterStackFactory}});var g=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/admin.js");Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return g.registerAdminService}});var f=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-interface.js");Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return f.BaseSubchannelWrapper}});var y=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-credentials.js");Object.defineProperty(t,"createServerCredentialsWithInterceptors",{enumerable:!0,get:function(){return y.createServerCredentialsWithInterceptors}}),Object.defineProperty(t,"createCertificateProviderServerCredentials",{enumerable:!0,get:function(){return y.createCertificateProviderServerCredentials}});var b=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/certificate-provider.js");Object.defineProperty(t,"FileWatcherCertificateProvider",{enumerable:!0,get:function(){return b.FileWatcherCertificateProvider}});var v=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-credentials.js");Object.defineProperty(t,"createCertificateProviderChannelCredentials",{enumerable:!0,get:function(){return v.createCertificateProviderChannelCredentials}});var _=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/internal-channel.js");Object.defineProperty(t,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:!0,get:function(){return _.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter-stack.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map((e=>e.createFilter())))}}t.FilterStackFactory=n},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0,t.BaseFilter=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/http_proxy.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCIDR=h,t.mapProxyName=function(e,t){var r;const i={target:e,extraOptions:{}};if(0===(null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1))return i;if("unix"===e.scheme)return i;const a=function(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new u.URL(t)}catch(e){return(0,n.log)(o.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(o.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(o.LogVerbosity.INFO,"userinfo found in proxy URI"),s=decodeURIComponent(`${e.username}:${e.password}`)):s=e.username);const i=e.hostname;let a=e.port;""===a&&(a="80");const l={address:`${i}:${a}`};return s&&(l.creds=s),m("Proxy server "+l.address+" set by environment variable "+r),l}();if(!a.address)return i;const l=(0,c.splitHostPort)(e.path);if(!l)return i;if(function(e){for(const t of function(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return e||(e=process.env.no_proxy,t="no_proxy"),e?(m("No proxy server list set by environment variable "+t),e.split(",")):[]}()){const r=h(t);if((0,s.isIPv4)(e)&&r&&f(r,e))return!0;if(e.endsWith(t))return!0}return!1}(l.host))return m("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),i;const p={"grpc.http_connect_target":(0,c.uriToString)(e)};return a.creds&&(p["grpc.http_connect_creds"]=a.creds),{target:{scheme:"dns",path:a.address},extraOptions:p}},t.getProxiedConnection=function(e,t){var r;if(!("grpc.http_connect_target"in t))return Promise.resolve(null);const s=t["grpc.http_connect_target"],a=(0,c.parseUri)(s);if(null===a)return Promise.resolve(null);const u=(0,c.splitHostPort)(a.path);if(null===u)return Promise.resolve(null);const d=`${u.host}:${null!==(r=u.port)&&void 0!==r?r:p.DEFAULT_PORT}`,h={method:"CONNECT",path:d},g={Host:d};(0,l.isTcpSubchannelAddress)(e)?(h.host=e.host,h.port=e.port):h.socketPath=e.path,"grpc.http_connect_creds"in t&&(g["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),h.headers=g;const f=(0,l.subchannelAddressToString)(e);return m("Using proxy "+f+" to connect to "+h.path),new Promise(((e,t)=>{const r=i.request(h);r.once("connect",((s,i,a)=>{r.removeAllListeners(),i.removeAllListeners(),200===s.statusCode?(m("Successfully connected to "+h.path+" through proxy "+f),a.length>0&&i.unshift(a),m("Successfully established a plaintext connection to "+h.path+" through proxy "+f),e(i)):((0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to "+h.path+" through proxy "+f+" with status "+s.statusCode),t())})),r.once("error",(e=>{r.removeAllListeners(),(0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to proxy "+f+" with error "+e.message),t()})),r.end()}))};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("net"),i=r("http"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),u=r("url"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-dns.js"),d="proxy";function m(e){a.trace(o.LogVerbosity.DEBUG,d,e)}function h(e){const t=e.split("/");if(2!==t.length)return null;const r=parseInt(t[1],10);return!(0,s.isIPv4)(t[0])||Number.isNaN(r)||r<0||r>32?null:{ip:g(t[0]),prefixLength:r}}function g(e){return e.split(".").reduce(((e,t)=>(e<<8)+parseInt(t,10)),0)}function f(e,t){const r=e.ip,n=-1<<32-e.prefixLength;return(g(t)&n)==(r&n)}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-credentials.js");Object.defineProperty(t,"CallCredentials",{enumerable:!0,get:function(){return n.CallCredentials}});const o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel.js");Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return o.ChannelImplementation}});const s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/compression-algorithms.js");Object.defineProperty(t,"compressionAlgorithms",{enumerable:!0,get:function(){return s.CompressionAlgorithms}});const i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js");Object.defineProperty(t,"connectivityState",{enumerable:!0,get:function(){return i.ConnectivityState}});const a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-credentials.js");Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return a.ChannelCredentials}});const l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client.js");Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return l.Client}});const c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");Object.defineProperty(t,"logVerbosity",{enumerable:!0,get:function(){return c.LogVerbosity}}),Object.defineProperty(t,"status",{enumerable:!0,get:function(){return c.Status}}),Object.defineProperty(t,"propagate",{enumerable:!0,get:function(){return c.Propagate}});const u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/make-client.js");Object.defineProperty(t,"loadPackageDefinition",{enumerable:!0,get:function(){return p.loadPackageDefinition}}),Object.defineProperty(t,"makeClientConstructor",{enumerable:!0,get:function(){return p.makeClientConstructor}}),Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:!0,get:function(){return p.makeClientConstructor}});const d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js");Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return d.Metadata}});const m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server.js");Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return m.Server}});const h=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-credentials.js");Object.defineProperty(t,"ServerCredentials",{enumerable:!0,get:function(){return h.ServerCredentials}});const g=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/status-builder.js");Object.defineProperty(t,"StatusBuilder",{enumerable:!0,get:function(){return g.StatusBuilder}}),t.credentials={combineChannelCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),combineCallCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},t.closeClient=e=>e.close(),t.waitForClientReady=(e,t,r)=>e.waitForReady(t,r),t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.setLogger=e=>{u.setLogger(e)},t.setLogVerbosity=e=>{u.setLoggerVerbosity(e)},t.getClientChannel=e=>l.Client.prototype.getChannel.call(e);var f=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client-interceptors.js");Object.defineProperty(t,"ListenerBuilder",{enumerable:!0,get:function(){return f.ListenerBuilder}}),Object.defineProperty(t,"RequesterBuilder",{enumerable:!0,get:function(){return f.RequesterBuilder}}),Object.defineProperty(t,"InterceptingCall",{enumerable:!0,get:function(){return f.InterceptingCall}}),Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:!0,get:function(){return f.InterceptorConfigurationError}});var y=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js");Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return y.getChannelzServiceDefinition}}),Object.defineProperty(t,"getChannelzHandlers",{enumerable:!0,get:function(){return y.getChannelzHandlers}});var b=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/admin.js");Object.defineProperty(t,"addAdminServicesToServer",{enumerable:!0,get:function(){return b.addAdminServicesToServer}});var v=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-interceptors.js");Object.defineProperty(t,"ServerListenerBuilder",{enumerable:!0,get:function(){return v.ServerListenerBuilder}}),Object.defineProperty(t,"ResponderBuilder",{enumerable:!0,get:function(){return v.ResponderBuilder}}),Object.defineProperty(t,"ServerInterceptingCall",{enumerable:!0,get:function(){return v.ServerInterceptingCall}});const _=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/experimental.js");t.experimental=_;const S=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-dns.js"),T=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-uds.js"),x=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-ip.js"),E=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-pick-first.js"),C=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-round-robin.js"),w=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-outlier-detection.js"),j=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js");S.setup(),T.setup(),x.setup(),E.setup(),C.setup(),w.setup(),j.setup()},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/internal-channel.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-credentials.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolving-load-balancer.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-pool.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/filter-stack.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/compression-filter.js"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/http_proxy.js"),h=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),g=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),f=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js"),y=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancing-call.js"),b=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/deadline.js"),v=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolving-call.js"),_=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-number.js"),S=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/control-plane-status.js"),T=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/retrying-call.js"),x=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-interface.js"),E=new Map;class C extends x.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,o)=>{t.throttleKeepalive(o)}}ref(){0===this.refCount&&(this.child.addConnectivityStateListener(this.subchannelStateListener),this.channel.addWrappedSubchannel(this)),this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class w{pick(e){return{pickResultType:i.PickResultType.DROP,status:{code:l.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new a.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}}t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";class j{constructor(e){this.target=e,this.trace=new f.ChannelzTrace,this.callTracker=new f.ChannelzCallTracker,this.childrenTracker=new f.ChannelzChildrenTracker,this.state=g.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}}t.InternalChannel=class{constructor(e,r,a){var y,b,v,_,x,w;if(this.credentials=r,this.options=a,this.connectivityState=g.ConnectivityState.IDLE,this.currentPicker=new i.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.callRefTimer=null,this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),"string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(r instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(a&&"object"!=typeof a)throw new TypeError("Channel options must be an object");this.channelzInfoTracker=new j(e);const O=(0,h.parseUri)(e);if(null===O)throw new Error(`Could not parse target name "${e}"`);const P=(0,p.mapUriDefaultScheme)(O);if(null===P)throw new Error(`Could not find a default scheme for target name "${e}"`);0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,f.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,p.getDefaultAuthority)(P);const R=(0,m.mapProxyName)(P,a);this.target=R.target,this.options=Object.assign({},this.options,R.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)(0===(null!==(y=this.options["grpc.use_local_subchannel_pool"])&&void 0!==y?y:0)),this.retryBufferTracker=new T.MessageBufferTracker(null!==(b=this.options["grpc.retry_buffer_size"])&&void 0!==b?b:16777216,null!==(v=this.options["grpc.per_rpc_retry_buffer_size"])&&void 0!==v?v:1048576),this.keepaliveTime=null!==(_=this.options["grpc.keepalive_time_ms"])&&void 0!==_?_:-1,this.idleTimeoutMs=Math.max(null!==(x=this.options["grpc.client_idle_timeout_ms"])&&void 0!==x?x:18e5,1e3);const N={createSubchannel:(e,r)=>{const n={};for(const[e,o]of Object.entries(r))e.startsWith(t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)||(n[e]=o);const o=this.subchannelPool.getOrCreateSubchannel(this.target,e,n,this.credentials);return o.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",o.getChannelzRef()),new C(o,this)},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[],r.length>0&&this.callRefTimerUnref();for(const e of r)e.doPick();this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.channelzInfoTracker.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new o.ResolvingLoadBalancer(this.target,N,this.options,((e,t)=>{var r;e.retryThrottling?E.set(this.getTarget(),new T.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,E.get(this.getTarget()))):E.delete(this.getTarget()),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded"),null===(r=this.configSelector)||void 0===r||r.unref(),this.configSelector=t,this.currentResolutionError=null,process.nextTick((()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref();for(const t of e)t.getConfig()}))}),(e=>{this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));const t=this.configSelectionQueue;this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref();for(const r of t)r.reportResolverError(e)})),this.filterStackFactory=new c.FilterStackFactory([new u.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(a,void 0,2));const k=new Error;(0,d.isTracerEnabled)("channel_stacktrace")&&(0,d.trace)(l.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(w=k.stack)||void 0===w?void 0:w.substring(k.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}trace(e,t){(0,d.trace)(null!=t?t:l.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,h.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;this.callRefTimer||(this.callRefTimer=setInterval((()=>{}),2147483647)),(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t,r;(null===(e=this.callRefTimer)||void 0===e?void 0:e.hasRef)&&!this.callRefTimer.hasRef()||(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(r=null===(t=this.callRefTimer)||void 0===t?void 0:t.unref)||void 0===r||r.call(t))}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex((t=>t===e));t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,d.trace)(l.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,h.uriToString)(this.target)+" "+g.ConnectivityState[this.connectivityState]+" -> "+g.ConnectivityState[e]),this.channelzEnabled&&this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+g.ConnectivityState[e]),this.connectivityState=e,this.channelzInfoTracker.state=e;const t=this.connectivityStateWatchers.slice();for(const r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==g.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels)t.throttleKeepalive(e)}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.connectivityState!==g.ConnectivityState.SHUTDOWN&&this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector.invoke(e,t,this.randomChannelId)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(g.ConnectivityState.IDLE),this.currentPicker=new i.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.callRefTimer&&(clearInterval(this.callRefTimer),this.callRefTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout((()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);const e=(new Date).valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)}),e),null===(r=(t=this.idleTimer).unref)||void 0===r||r.call(t)}maybeStartIdleTimer(){this.connectivityState===g.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.channelzInfoTracker.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===l.Status.OK?this.channelzInfoTracker.callTracker.addCallSucceeded():this.channelzInfoTracker.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,o){const s=(0,_.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new y.LoadBalancingCall(this,e,t,r,n,o,s)}createRetryingCall(e,t,r,n,o){const s=(0,_.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new T.RetryingCall(this,e,t,r,n,o,s,this.retryBufferTracker,E.get(this.getTarget()))}createResolvingCall(e,t,r,n,o){const s=(0,_.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,b.deadlineToString)(t));const i={deadline:t,flags:null!=o?o:l.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},a=new v.ResolvingCall(this,e,i,this.filterStackFactory.clone(),s);return this.onCallStart(),a.addStatusWatcher((e=>{this.onCallEnd(e)})),a}close(){var e;this.resolvingLoadBalancer.destroy(),this.updateState(g.ConnectivityState.SHUTDOWN),this.currentPicker=new w;for(const e of this.configSelectionQueue)e.cancelWithStatus(l.Status.UNAVAILABLE,"Channel closed before call started");this.configSelectionQueue=[];for(const e of this.pickQueue)e.cancelWithStatus(l.Status.UNAVAILABLE,"Channel closed before call started");this.pickQueue=[],this.callRefTimer&&clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,f.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels(),null===(e=this.configSelector)||void 0===e||e.unref(),this.configSelector=null}getTarget(){return(0,h.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let n=null;if(t!==1/0){const e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,new Error("Deadline passed without connectivity state change"));n=setTimeout((()=>{this.removeConnectivityStateWatcher(o),r(new Error("Deadline passed without connectivity state change"))}),e.getTime()-s.getTime())}const o={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(o)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,o)}getOptions(){return this.options}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-child-handler.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js");t.ChildLoadBalancerHandler=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t,r){var n;if(this.calledByPendingChild()){if(e===o.ConnectivityState.CONNECTING)return;null===(n=this.parent.currentChild)||void 0===n||n.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t,r)}requestReresolution(){var e;const t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let o;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){const e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,o=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,o=this.pendingChild)}else o=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,o.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return"child_load_balancer_helper"}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-outlier-detection.js":(e,t,r)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0,t.setup=function(){f&&(0,a.registerLoadBalancerType)(g,w,T)};const o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/duration.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/experimental.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-child-handler.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-interface.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");function h(e){m.trace(s.LogVerbosity.DEBUG,"outlier_detection",e)}const g="outlier_detection",f="true"===(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true"),y={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function v(e,t,r,n){if(t in e&&void 0!==e[t]&&typeof e[t]!==r)throw new Error(`outlier detection config ${n?`${n}.${t}`:t} parse error: expected ${r}, got ${typeof e[t]}`)}function _(e,t,r){const n=r?`${r}.${t}`:t;if(t in e&&void 0!==e[t]){if(!(0,i.isDuration)(e[t]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function S(e,t,r){const n=r?`${r}.${t}`:t;if(v(e,t,"number",r),t in e&&void 0!==e[t]&&!(e[t]>=0&&e[t]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class T{constructor(e,t,r,n,o,s,i){if(this.childPolicy=i,"pick_first"===i.getLoadBalancerName())throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=o?Object.assign(Object.assign({},y),o):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return g}toJsonObject(){var e,t;return{outlier_detection:{interval:(0,i.msToDuration)(this.intervalMs),base_ejection_time:(0,i.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,i.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:null!==(e=this.successRateEjection)&&void 0!==e?e:void 0,failure_percentage_ejection:null!==(t=this.failurePercentageEjection)&&void 0!==t?t:void 0,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var t;if(_(e,"interval"),_(e,"base_ejection_time"),_(e,"max_ejection_time"),S(e,"max_ejection_percent"),"success_rate_ejection"in e&&void 0!==e.success_rate_ejection){if("object"!=typeof e.success_rate_ejection)throw new Error("outlier detection config success_rate_ejection must be an object");v(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),S(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),v(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),v(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e&&void 0!==e.failure_percentage_ejection){if("object"!=typeof e.failure_percentage_ejection)throw new Error("outlier detection config failure_percentage_ejection must be an object");S(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),S(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),v(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),v(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in e)||!Array.isArray(e.child_policy))throw new Error("outlier detection config child_policy must be an array");const r=(0,l.selectLbConfigFromList)(e.child_policy);if(!r)throw new Error("outlier detection config child_policy: no valid recognized policy found");return new T(e.interval?(0,i.durationToMs)(e.interval):null,e.base_ejection_time?(0,i.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,i.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,r)}}t.OutlierDetectionLoadBalancingConfig=T;class x extends d.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.refCount=0}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.setHealthy(!1)}uneject(){this.setHealthy(!0)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}class E{constructor(){this.activeBucket={success:0,failure:0},this.inactiveBucket={success:0,failure:0}}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket={success:0,failure:0}}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class C{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===u.PickResultType.COMPLETE){const e=t.subchannel,r=e.getMapEntry();if(r){let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(n=t.onCallEnded)||void 0===n||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}return t}}class w{constructor(e){this.entryMap=new p.EndpointMap,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new c.ChildLoadBalancerHandler((0,a.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r),o=this.entryMap.getForSubchannelAddress(t),s=new x(n,o);return null!==(null==o?void 0:o.currentEjectionTimestamp)&&s.eject(),null==o||o.subchannelWrappers.push(s),s},updateState:(t,r,n)=>{t===o.ConnectivityState.READY?e.updateState(t,new C(r,this.isCountingEnabled()),n):e.updateState(t,r,n)}})),this.ejectionTimer=setInterval((()=>{}),0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(const t of this.entryMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;h("Running success rate check");const r=t.request_volume;let n=0;const o=[];for(const[e,t]of this.entryMap.entries()){const s=t.counter.getLastSuccesses(),i=t.counter.getLastFailures();h("Stats for "+(0,p.endpointToString)(e)+": successes="+s+" failures="+i+" targetRequestVolume="+r),s+i>=r&&(n+=1,o.push(s/(s+i)))}if(h("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+o+"]"),n<t.minimum_hosts)return;const s=o.reduce(((e,t)=>e+t))/o.length;let i=0;for(const e of o){const t=e-s;i+=t*t}const a=i/o.length,l=Math.sqrt(a),c=s-l*(t.stdev_factor/1e3);h("stdev="+l+" ejectionThreshold="+c);for(const[n,o]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const s=o.counter.getLastSuccesses(),i=o.counter.getLastFailures();if(s+i<r)continue;const a=s/(s+i);if(h("Checking candidate "+n+" successRate="+a),a<c){const r=100*Math.random();h("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(h("Ejecting candidate "+n),this.eject(o,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;h("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.entryMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(const[r,n]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const o=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((h("Candidate successes="+o+" failures="+s),!(o+s<t.request_volume))&&100*s/(s+o)>t.threshold){const o=100*Math.random();h("Candidate "+r+" randomNumber="+o+" enforcement_percentage="+t.enforcement_percentage),o<t.enforcement_percentage&&(h("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers)t.eject()}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(const e of this.entryMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout((()=>this.runChecks()),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){const e=new Date;if(h("Ejection timer running"),this.switchAllBuckets(),this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(const[e,t]of this.entryMap.entries())if(null===t.currentEjectionTimestamp)t.ejectionTimeMultiplier>0&&(t.ejectionTimeMultiplier-=1);else{const r=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(t.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n))),o<new Date&&(h("Unejecting "+e),this.uneject(t))}}}updateAddressList(e,t,r){if(!(t instanceof T))return;h("Received update with config: "+JSON.stringify(t.toJsonObject(),void 0,2));for(const t of e)this.entryMap.has(t)||(h("Adding map entry for "+(0,p.endpointToString)(t)),this.entryMap.set(t,{counter:new E,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));this.entryMap.deleteMissing(e);const n=t.getChildPolicy();if(this.childBalancer.updateAddressList(e,n,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){h("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else h("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{h("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(const e of this.entryMap.values())this.uneject(e),e.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}t.OutlierDetectionLoadBalancer=w},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-pick-first.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LeafLoadBalancer=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0,t.shuffled=g,t.setup=function(){(0,n.registerLoadBalancerType)(d,y,m),(0,n.registerDefaultLoadBalancerType)(d)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),u=r("net");function p(e){a.trace(l.LogVerbosity.DEBUG,"pick_first",e)}const d="pick_first";class m{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return d}toJsonObject(){return{[d]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new m(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=m;class h{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function g(e){const t=e.slice();for(let e=t.length-1;e>1;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}const f="grpc-node.internal.pick-first.report_health_status";class y{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=o.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,o)=>{this.onSubchannelStateUpdate(e,t,r,o)},this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState(),this.stickyTransientFailureMode=!1,this.reportHealthStatus=!1,this.lastError=null,this.latestAddressList=null,this.latestOptions={},this.connectionDelayTimeout=setTimeout((()=>{}),0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every((e=>e.hasReportedTransientFailure))}resetChildrenReportedTF(){this.children.every((e=>e.hasReportedTransientFailure=!1))}calculateAndReportNewState(){var e;if(this.currentPick)if(this.reportHealthStatus&&!this.currentPick.isHealthy()){const e=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else this.updateState(o.ConnectivityState.READY,new h(this.currentPick),null);else if(0===(null===(e=this.latestAddressList)||void 0===e?void 0:e.length)){const e=`No connection established. Last error: ${this.lastError}`;this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else if(0===this.children.length)this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this),null);else if(this.stickyTransientFailureMode){const e=`No connection established. Last error: ${this.lastError}`;this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this),null)}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF())if(this.requestReresolution(),this.resetChildrenReportedTF(),this.stickyTransientFailureMode)this.calculateAndReportNewState();else{this.stickyTransientFailureMode=!0;for(const{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){null!==this.currentPick&&(this.currentPick.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick.unref(),this.currentPick=null)}onSubchannelStateUpdate(e,t,r,n){var s;if(null===(s=this.currentPick)||void 0===s?void 0:s.realSubchannelEquals(e))r!==o.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState());else for(const[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel))return r===o.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===o.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),void s.subchannel.startConnecting()}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(const[t,r]of this.children.entries())if(t>=e){const e=r.subchannel.getConnectivityState();if(e===o.ConnectivityState.IDLE||e===o.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.maybeEnterStickyTransientFailureMode()}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===o.ConnectivityState.IDLE&&(p("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick((()=>{var t;null===(t=this.children[e])||void 0===t||t.subchannel.startConnecting()}))),this.connectionDelayTimeout=setTimeout((()=>{this.startNextSubchannelConnecting(e+1)}),250),null===(r=(t=this.connectionDelayTimeout).unref)||void 0===r||r.call(t)}pickSubchannel(e){p("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.removeCurrentPick(),this.resetSubchannelList(),e.addConnectivityStateListener(this.subchannelStateListener),e.addHealthStateWatcher(this.pickedSubchannelHealthListener),this.currentPick=e,clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState()}updateState(e,t,r){p(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children)e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[]}connectToAddressList(e,t){p("connectToAddressList(["+e.map((e=>(0,i.subchannelAddressToString)(e)))+"])");const r=e.map((e=>({subchannel:this.channelControlHelper.createSubchannel(e,t),hasReportedTransientFailure:!1})));for(const{subchannel:e}of r)if(e.getConnectivityState()===o.ConnectivityState.READY)return void this.pickSubchannel(e);for(const{subchannel:e}of r)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());this.resetSubchannelList(),this.children=r;for(const{subchannel:e}of this.children)e.addConnectivityStateListener(this.subchannelStateListener);for(const e of this.children)e.subchannel.getConnectivityState()===o.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t,r){if(!(t instanceof m))return;this.reportHealthStatus=r[f],t.getShuffleAddressList()&&(e=g(e));const n=[].concat(...e.map((e=>e.addresses)));p("updateAddressList(["+n.map((e=>(0,i.subchannelAddressToString)(e)))+"])"),0===n.length&&(this.lastError="No addresses resolved");const o=function(e){if(0===e.length)return[];const t=[],r=[],n=[],o=(0,c.isTcpSubchannelAddress)(e[0])&&(0,u.isIPv6)(e[0].host);for(const t of e)(0,c.isTcpSubchannelAddress)(t)&&(0,u.isIPv6)(t.host)?r.push(t):n.push(t);const s=o?r:n,i=o?n:r;for(let e=0;e<Math.max(s.length,i.length);e++)e<s.length&&t.push(s[e]),e<i.length&&t.push(i[e]);return t}(n);this.latestAddressList=o,this.latestOptions=r,this.connectToAddressList(o,r)}exitIdle(){this.currentState===o.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList,this.latestOptions)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return d}}t.PickFirstLoadBalancer=y;const b=new m(!1);t.LeafLoadBalancer=class{constructor(e,t,r){this.endpoint=e,this.options=r,this.latestState=o.ConnectivityState.IDLE;const i=(0,n.createChildChannelControlHelper)(t,{updateState:(e,r,n)=>{this.latestState=e,this.latestPicker=r,t.updateState(e,r,n)}});this.pickFirstBalancer=new y(i),this.latestPicker=new s.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList([this.endpoint],b,Object.assign(Object.assign({},this.options),{[f]:!0}))}updateEndpoint(e,t){this.options=t,this.endpoint=e,this.latestState!==o.ConnectivityState.IDLE&&this.startConnecting()}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-round-robin.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RoundRobinLoadBalancer=void 0,t.setup=function(){(0,n.registerLoadBalancerType)(p,h,d)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-pick-first.js");function u(e){i.trace(a.LogVerbosity.DEBUG,"round_robin",e)}const p="round_robin";class d{getLoadBalancerName(){return p}constructor(){}toJsonObject(){return{[p]:{}}}static createFromJson(e){return new d}}class m{constructor(e,t=0){this.children=e,this.nextIndex=t}pick(e){const t=this.children[this.nextIndex].picker;return this.nextIndex=(this.nextIndex+1)%this.children.length,t.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}}class h{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=o.ConnectivityState.IDLE,this.currentReadyPicker=null,this.updatesPaused=!1,this.lastError=null,this.childChannelControlHelper=(0,n.createChildChannelControlHelper)(e,{updateState:(e,t,r)=>{this.currentState===o.ConnectivityState.READY&&e!==o.ConnectivityState.READY&&this.channelControlHelper.requestReresolution(),r&&(this.lastError=r),this.calculateAndUpdateState()}})}countChildrenWithState(e){return this.children.filter((t=>t.getConnectivityState()===e)).length}calculateAndUpdateState(){if(!this.updatesPaused){if(this.countChildrenWithState(o.ConnectivityState.READY)>0){const e=this.children.filter((e=>e.getConnectivityState()===o.ConnectivityState.READY));let t=0;if(null!==this.currentReadyPicker){const r=this.currentReadyPicker.peekNextEndpoint();t=e.findIndex((e=>(0,l.endpointEqual)(e.getEndpoint(),r))),t<0&&(t=0)}this.updateState(o.ConnectivityState.READY,new m(e.map((e=>({endpoint:e.getEndpoint(),picker:e.getPicker()}))),t),null)}else if(this.countChildrenWithState(o.ConnectivityState.CONNECTING)>0)this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this),null);else if(this.countChildrenWithState(o.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this),null);for(const e of this.children)e.getConnectivityState()===o.ConnectivityState.IDLE&&e.exitIdle()}}updateState(e,t,r){u(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),e===o.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children)e.destroy()}updateAddressList(e,t,r){this.resetSubchannelList(),u("Connect to endpoint list "+e.map(l.endpointToString)),this.updatesPaused=!0,this.children=e.map((e=>new c.LeafLoadBalancer(e,this.childChannelControlHelper,r)));for(const e of this.children)e.startConnecting();this.updatesPaused=!1,this.calculateAndUpdateState()}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return p}}t.RoundRobinLoadBalancer=h},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createChildChannelControlHelper=function(e,t){var r,n,o,s,i,a,l,c,u,p;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(s=null===(o=t.updateState)||void 0===o?void 0:o.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(a=null===(i=t.requestReresolution)||void 0===i?void 0:i.bind(t))&&void 0!==a?a:e.requestReresolution.bind(e),addChannelzChild:null!==(c=null===(l=t.addChannelzChild)||void 0===l?void 0:l.bind(t))&&void 0!==c?c:e.addChannelzChild.bind(e),removeChannelzChild:null!==(p=null===(u=t.removeChannelzChild)||void 0===u?void 0:u.bind(t))&&void 0!==p?p:e.removeChannelzChild.bind(e)}},t.registerLoadBalancerType=function(e,t,r){s[e]={LoadBalancer:t,LoadBalancingConfig:r}},t.registerDefaultLoadBalancerType=function(e){i=e},t.createLoadBalancer=function(e,t){const r=e.getLoadBalancerName();return r in s?new s[r].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in s},t.parseLoadBalancingConfig=a,t.getDefaultConfig=function(){if(!i)throw new Error("No default load balancer type registered");return new s[i].LoadBalancingConfig},t.selectLbConfigFromList=function(e,t=!1){for(const t of e)try{return a(t)}catch(e){(0,n.log)(o.LogVerbosity.DEBUG,"Config parsing failed with error",e.message);continue}return t&&i?new s[i].LoadBalancingConfig:null};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s={};let i=null;function a(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Provided load balancing config has multiple conflicting entries");const r=t[0];if(!(r in s))throw new Error(`Unrecognized load balancing config name ${r}`);try{return s[r].LoadBalancingConfig.createFromJson(e[r])}catch(e){throw new Error(`${r}: ${e.message}`)}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancing-call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/deadline.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/control-plane-status.js"),p=r("http2");t.LoadBalancingCall=class{constructor(e,t,r,n,o,s,i){var a,c;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null,this.childStartTime=null;const u=this.methodName.split("/");let p="";u.length>=2&&(p=u[1]);const d=null!==(c=null===(a=(0,l.splitHostPort)(this.host))||void 0===a?void 0:a.host)&&void 0!==c?c:"localhost";this.serviceUrl=`https://${d}/${p}`,this.startTime=new Date}getDeadlineInfo(){var e,t;const r=[];return this.childStartTime?(this.childStartTime>this.startTime&&((null===(e=this.metadata)||void 0===e?void 0:e.getOptions().waitForReady)&&r.push("wait_for_ready"),r.push(`LB pick: ${(0,s.formatDateDifference)(this.startTime,this.childStartTime)}`)),r.push(...this.child.getDeadlineInfo()),r):((null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)&&r.push("wait_for_ready"),r.push("Waiting for LB pick"),r)}trace(e){c.trace(o.LogVerbosity.DEBUG,"load_balancing_call","["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());const o=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(o),null===(n=this.onCallEnded)||void 0===n||n.call(this,o.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");const r=this.metadata.clone(),l=this.channel.doPick(r,this.callConfig.pickInformation),c=l.subchannel?"("+l.subchannel.getChannelzRef().id+") "+l.subchannel.getAddress():""+l.subchannel;switch(this.trace("Pick result: "+a.PickResultType[l.pickResultType]+" subchannel: "+c+" status: "+(null===(e=l.status)||void 0===e?void 0:e.code)+" "+(null===(t=l.status)||void 0===t?void 0:t.details)),l.pickResultType){case a.PickResultType.COMPLETE:this.credentials.compose(l.subchannel.getCallCredentials()).generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then((e=>{var t;if(this.ended)this.trace("Credentials metadata generation finished after call ended");else{if(r.merge(e),r.get("authorization").length>1&&this.outputStatus({code:o.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new i.Metadata},"PROCESSED"),l.subchannel.getConnectivityState()!==n.ConnectivityState.READY)return this.trace("Picked subchannel "+c+" has state "+n.ConnectivityState[l.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),void this.doPick();this.deadline!==1/0&&r.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=l.subchannel.getRealSubchannel().createCall(r,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===p.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}}),this.childStartTime=new Date}catch(e){return this.trace("Failed to start call on picked subchannel "+c+" with error "+e.message),void this.outputStatus({code:o.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new i.Metadata},"NOT_STARTED")}null===(t=l.onCallStarted)||void 0===t||t.call(l),this.onCallEnded=l.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()}}),(e=>{const{code:t,details:r}=(0,u.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:o.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new i.Metadata},"PROCESSED")}));break;case a.PickResultType.DROP:const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(l.status.code,l.status.details);setImmediate((()=>{this.outputStatus({code:e,details:t,metadata:l.status.metadata},"DROP")}));break;case a.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(l.status.code,l.status.details);setImmediate((()=>{this.outputStatus({code:e,details:t,metadata:l.status.metadata},"PROCESSED")}))}break;case a.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new i.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js":(e,t,r)=>{var n,o,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0,t.trace=function(e,r,n){f(r)&&(0,t.log)(e,(new Date).toISOString()+" | v"+c+" "+l.pid+" | "+r+" | "+n)},t.isTracerEnabled=f;const a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),l=r("process"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/package.json").rE;let u={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},p=a.LogVerbosity.ERROR;switch((null!==(o=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==o?o:"").toUpperCase()){case"DEBUG":p=a.LogVerbosity.DEBUG;break;case"INFO":p=a.LogVerbosity.INFO;break;case"ERROR":p=a.LogVerbosity.ERROR;break;case"NONE":p=a.LogVerbosity.NONE}t.getLogger=()=>u,t.setLogger=e=>{u=e},t.setLoggerVerbosity=e=>{p=e},t.log=(e,...t)=>{let r;if(e>=p){switch(e){case a.LogVerbosity.DEBUG:r=u.debug;break;case a.LogVerbosity.INFO:r=u.info;break;case a.LogVerbosity.ERROR:r=u.error}r||(r=u.error),r&&r.bind(u)(...t)}};const d=null!==(i=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==i?i:"",m=new Set,h=new Set;for(const e of d.split(","))e.startsWith("-")?h.add(e.substring(1)):m.add(e);const g=m.has("all");function f(e){return!h.has(e)&&(g||m.has(e))}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/make-client.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeClientConstructor=i,t.loadPackageDefinition=function(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n],a=n.split(".");if(a.some((e=>s(e))))continue;const l=a[a.length-1];let c=t;for(const e of a.slice(0,-1))c[e]||(c[e]={}),c=c[e];r=o,c[l]="format"in r?o:i(o,l,{})}var r;return t};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/client.js"),o={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function i(e,t,r){r||(r={});class i extends n.Client{}return Object.keys(e).forEach((t=>{if(s(t))return;const r=e[t];let n;if("string"==typeof t&&"$"===t.charAt(0))throw new Error("Method names cannot start with $");n=r.requestStream?r.responseStream?"bidi":"client_stream":r.responseStream?"server_stream":"unary";const a=r.requestSerialize,l=r.responseDeserialize,c=function(e,t,r,n){return function(...o){return e.call(this,t,r,n,...o)}}(o[n],r.path,a,l);i.prototype[t]=c,Object.assign(i.prototype[t],r),r.originalName&&!s(r.originalName)&&(i.prototype[r.originalName]=i.prototype[t])})),i.service=e,i.serviceName=t,i}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/error.js"),i=/^[0-9a-z_.-]+$/,a=/^[ -~]*$/;function l(e){return e.endsWith("-bin")}function c(e){return!e.startsWith("grpc-")}function u(e){return e.toLowerCase()}function p(e,t){if(!function(e){return i.test(e)}(e))throw new Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(l(e)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!function(e){return a.test(e)}(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}class d{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){p(e=u(e),t),this.internalRepr.set(e,[t])}add(e,t){p(e=u(e),t);const r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=u(e),this.internalRepr.delete(e)}get(e){return e=u(e),this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,r]of this.internalRepr)if(r.length>0){const n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){const e=new d(this.options),t=e.internalRepr;for(const[e,r]of this.internalRepr){const n=r.map((e=>Buffer.isBuffer(e)?Buffer.from(e):e));t.set(e,n)}return e}merge(e){for(const[t,r]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,r]of this.internalRepr)e[t]=r.map(m);return e}toJSON(){const e={};for(const[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){const t=new d;for(const r of Object.keys(e)){if(":"===r.charAt(0))continue;const i=e[r];try{l(r)?Array.isArray(i)?i.forEach((e=>{t.add(r,Buffer.from(e,"base64"))})):void 0!==i&&(c(r)?i.split(",").forEach((e=>{t.add(r,Buffer.from(e.trim(),"base64"))})):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach((e=>{t.add(r,e)})):void 0!==i&&t.add(r,i)}catch(e){const t=`Failed to add metadata entry ${r}: ${i}. ${(0,s.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(o.LogVerbosity.ERROR,t)}}return t}}t.Metadata=d;const m=e=>Buffer.isBuffer(e)?e.toString("base64"):e},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");var s;!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(s||(t.PickResultType=s={})),t.UnavailablePicker=class{constructor(e){this.status=Object.assign({code:o.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata},e)}pick(e){return{pickResultType:s.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}},t.QueuePicker=class{constructor(e,t){this.loadBalancer=e,this.childPicker=t,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick((()=>{this.loadBalancer.exitIdle()})),this.calledExitIdle=!0),this.childPicker?this.childPicker.pick(e):{pickResultType:s.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-dns.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PORT=void 0,t.setup=function(){(0,n.registerResolver)("dns",g),(0,n.registerDefaultScheme)("dns")};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),o=r("dns"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/service-config.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),p=r("net"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/backoff-timeout.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/environment.js");function h(e){l.trace(c.LogVerbosity.DEBUG,"dns_resolver",e)}t.DEFAULT_PORT=443;class g{constructor(e,r,n){var s,l,c;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,this.alternativeResolver=new o.promises.Resolver,h("Resolver constructed for target "+(0,u.uriToString)(e)),e.authority&&this.alternativeResolver.setServers([e.authority]);const m=(0,u.splitHostPort)(e.path);null===m?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,p.isIPv4)(m.host)||(0,p.isIPv6)(m.host)?(this.ipResult=[{addresses:[{host:m.host,port:null!==(s=m.port)&&void 0!==s?s:t.DEFAULT_PORT}]}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=m.host,this.port=null!==(l=m.port)&&void 0!==l?l:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:i.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,u.uriToString)(this.target)}`,metadata:new a.Metadata};const g={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new d.BackoffTimeout((()=>{this.continueResolving&&this.startResolutionWithBackoff()}),g),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(c=n["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==c?c:3e4,this.nextResolutionTimer=setTimeout((()=>{}),0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult)return this.returnedIpResult||(h("Returning IP address for target "+(0,u.uriToString)(this.target)),setImmediate((()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})})),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),void this.stopNextResolutionTimer();if(null===this.dnsHostname)h("Failed to parse DNS address "+(0,u.uriToString)(this.target)),setImmediate((()=>{this.listener.onError({code:i.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,u.uriToString)(this.target)}`,metadata:new a.Metadata})})),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;h("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e),this.pendingLookupPromise.then((e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop(),this.latestLookupResult=e.map((e=>({addresses:[e]})));const t="["+e.map((e=>e.host+":"+e.port)).join(",")+"]";h("Resolved addresses for target "+(0,u.uriToString)(this.target)+": "+t),0!==this.latestLookupResult.length?this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{}):this.listener.onError(this.defaultResolutionError)}),(e=>{null!==this.pendingLookupPromise&&(h("Resolution error for target "+(0,u.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))})),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=this.resolveTxt(e),this.pendingTxtPromise.then((e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,s.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:i.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new a.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}}),(e=>{})))}}async lookup(e){if(m.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){h("Using alternative DNS resolver.");const t=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(t.every((e=>"rejected"===e.status)))throw new Error(t[0].reason);return t.reduce(((e,t)=>"fulfilled"===t.status?[...e,...t.value]:e),[]).map((e=>({host:e,port:+this.port})))}return(await o.promises.lookup(e,{all:!0})).map((e=>({host:e.address,port:+this.port})))}async resolveTxt(e){return m.GRPC_NODE_USE_ALTERNATIVE_RESOLVER?(h("Using alternative DNS resolver."),this.alternativeResolver.resolveTxt(e)):o.promises.resolveTxt(e)}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=setTimeout((()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()}),this.minTimeBetweenResolutionsMs),null===(t=(e=this.nextResolutionTimer).unref)||void 0===t||t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?h('resolution update delayed by "min time between resolutions" rate limit'):h("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-ip.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,i.registerResolver)(u,d),(0,i.registerResolver)(p,d)};const n=r("net"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");function c(e){l.trace(o.LogVerbosity.DEBUG,"ip_resolver",e)}const u="ipv4",p="ipv6";class d{constructor(e,t,r){var i;this.listener=t,this.endpoints=[],this.error=null,this.hasReturnedResult=!1,c("Resolver constructed for target "+(0,a.uriToString)(e));const l=[];if(e.scheme!==u&&e.scheme!==p)return void(this.error={code:o.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata});const d=e.path.split(",");for(const t of d){const r=(0,a.splitHostPort)(t);if(null===r)return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});if(e.scheme===u&&!(0,n.isIPv4)(r.host)||e.scheme===p&&!(0,n.isIPv6)(r.host))return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});l.push({host:r.host,port:null!==(i=r.port)&&void 0!==i?i:443})}this.endpoints=l.map((e=>({addresses:[e]}))),c("Parsed "+e.scheme+" address list "+l)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick((()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.endpoints,null,null,null,{})})))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver-uds.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(){(0,n.registerResolver)("unix",o)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js");class o{constructor(e,t,r){let n;this.listener=t,this.hasReturnedResult=!1,this.endpoints=[],n=""===e.authority?"/"+e.path:e.path,this.endpoints=[{addresses:[{path:n}]}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.endpoints,null,null,null,{}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return"localhost"}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerResolver=function(e,t){o[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in o)return new o[e.scheme](e,t,r);throw new Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in o)return o[e.scheme].getDefaultAuthority(e);throw new Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){return void 0!==e.scheme&&e.scheme in o?e:null!==s?{scheme:s,authority:void 0,path:(0,n.uriToString)(e)}:null};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),o={};let s=null},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolving-call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-credentials.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/deadline.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/control-plane-status.js");t.ResolvingCall=class{constructor(e,t,r,i,a){this.channel=e,this.method=t,this.filterStackFactory=i,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout((()=>{}),0),this.filterStack=null,this.deadlineStartTime=null,this.configReceivedTime=null,this.childStartTime=null,this.credentials=n.CallCredentials.createEmpty(),this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&o.Propagate.CANCELLATION&&r.parentCall.on("cancelled",(()=>{this.cancelWithStatus(o.Status.CANCELLED,"Cancelled by parent call")})),r.flags&o.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,s.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(o.LogVerbosity.DEBUG,"resolving_call","["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.deadlineStartTime=new Date,this.trace("Deadline: "+(0,s.deadlineToString)(this.deadline));const e=(0,s.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");const t=()=>{if(!this.deadlineStartTime)return void this.cancelWithStatus(o.Status.DEADLINE_EXCEEDED,"Deadline exceeded");const e=[],t=new Date;e.push(`Deadline exceeded after ${(0,s.formatDateDifference)(this.deadlineStartTime,t)}`),this.configReceivedTime?(this.configReceivedTime>this.deadlineStartTime&&e.push(`name resolution: ${(0,s.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`),this.childStartTime?this.childStartTime>this.configReceivedTime&&e.push(`metadata filters: ${(0,s.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`):e.push("waiting for metadata filters")):e.push("waiting for name resolution"),this.child&&e.push(...this.child.getDeadlineInfo()),this.cancelWithStatus(o.Status.DEADLINE_EXCEEDED,e.join(","))};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach((e=>e(t))),process.nextTick((()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)}))}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");const r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then((t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()}),(e=>{this.cancelWithStatus(e.code,e.details)}))}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");const e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));this.configReceivedTime=new Date;const t=e.config;if(t.status===o.Status.OK){if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,s.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then((e=>{this.child=this.channel.createRetryingCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.childStartTime=new Date,this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then((e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)}),(e=>{this.cancelWithStatus(e.code,e.details)}))},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()}),(e=>{this.outputStatus(e)}))}else{const{code:e,details:r}=(0,l.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new i.Metadata})}}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new i.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=e}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolving-load-balancer.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/service-config.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/picker.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/backoff-timeout.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),h=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/load-balancer-child-handler.js");function g(e){p.trace(d.LogVerbosity.DEBUG,"resolving_load_balancer",e)}const f=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function y(e,t,r,n){for(const o of r.name)switch(n){case"EMPTY":if(!o.service&&!o.method)return!0;break;case"SERVICE":if(o.service===e&&!o.method)return!0;break;case"SERVICE_AND_METHOD":if(o.service===e&&o.method===t)return!0}return!1}function b(e,t,r,n){for(const o of r)if(y(e,t,o,n))return o;return null}t.ResolvingLoadBalancer=class{constructor(e,t,r,p,d){this.target=e,this.channelControlHelper=t,this.channelOptions=r,this.onSuccessfulResolution=p,this.onFailedResolution=d,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.latestChildErrorMessage=null,this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,o.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new a.QueuePicker(this),null),this.childLoadBalancer=new h.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(g("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t,r)=>{this.latestChildState=e,this.latestChildPicker=t,this.latestChildErrorMessage=r,this.updateState(e,t,r)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,i.createResolver)(e,{onSuccessfulResolution:(e,t,r,o,s)=>{var i;this.backoffTimeout.stop(),this.backoffTimeout.reset();let a=null;null===t?null===r?(this.previousServiceConfig=null,a=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):a=this.previousServiceConfig:(a=t,this.previousServiceConfig=t);const l=null!==(i=null==a?void 0:a.loadBalancingConfig)&&void 0!==i?i:[],p=(0,n.selectLbConfigFromList)(l,!0);if(null===p)return this.handleResolutionFailure({code:c.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new u.Metadata}),void(null==o||o.unref());this.childLoadBalancer.updateAddressList(e,p,Object.assign(Object.assign({},this.channelOptions),s));const d=null!=a?a:this.defaultServiceConfig;this.onSuccessfulResolution(d,null!=o?o:function(e){return{invoke(t,r){var n,o;const s=t.split("/").filter((e=>e.length>0)),i=null!==(n=s[0])&&void 0!==n?n:"",a=null!==(o=s[1])&&void 0!==o?o:"";if(e&&e.methodConfig)for(const t of f){const r=b(i,a,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}},unref(){}}}(d))},onError:e=>{this.handleResolutionFailure(e)}},r);const m={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout((()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)}),m),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage),this.backoffTimeout.runOnce()}updateState(e,t,r){g((0,m.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new a.QueuePicker(this,t)),this.currentState=e,this.channelControlHelper.updateState(e,t,r)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e),e.details),this.onFailedResolution(e))}exitIdle(){this.currentState!==s.ConnectivityState.IDLE&&this.currentState!==s.ConnectivityState.TRANSIENT_FAILURE||(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/retrying-call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/deadline.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js");t.RetryThrottler=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,this.tokens=r?r.tokens*(e/r.maxTokens):e}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}},t.MessageBufferTracker=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-n<e||this.totalLimit-this.totalAllocated<e||(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,0))}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(n<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;const r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};const a="grpc-previous-rpc-attempts";t.RetryingCall=class{constructor(e,t,r,n,o,s,i,a,l){var c;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.bufferTracker=a,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0;const u=null!==(c=e.getOptions()["grpc-node.retry_max_attempts_limit"])&&void 0!==c?c:5;if(0===e.getOptions()["grpc.enable_retries"])this.state="NO_RETRY",this.maxAttempts=1;else if(t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1)),this.maxAttempts=Math.min(e.maxAttempts,u)}else t.methodConfig.hedgingPolicy?(this.state="HEDGING",this.maxAttempts=Math.min(t.methodConfig.hedgingPolicy.maxAttempts,u)):(this.state="TRANSPARENT_ONLY",this.maxAttempts=1);this.startTime=new Date}getDeadlineInfo(){if(0===this.underlyingCalls.length)return[];const e=[],t=this.underlyingCalls[this.underlyingCalls.length-1];return this.underlyingCalls.length>1&&e.push("previous attempts: "+(this.underlyingCalls.length-1)),t.startTime>this.startTime&&e.push(`time to current attempt start: ${(0,o.formatDateDifference)(this.startTime,t.startTime)}`),e.push(...t.call.getDeadlineInfo()),e}getCallNumber(){return this.callNumber}trace(e){i.trace(n.LogVerbosity.DEBUG,"retrying_call","["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString()),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick((()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})}))}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new s.Metadata});for(const{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e;e="COMPLETED"===this.underlyingCalls[this.committedCallIndex].state?this.getNextBufferIndex():this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){const e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){var t,r;if("COMMITTED"!==this.state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",null===(r=(t=this.callConfig).onCommitted)||void 0===r||r.call(t),this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(const[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some((e=>{var r;return e===t||e.toString().toLowerCase()===(null===(r=n.Status[t])||void 0===r?void 0:r.toLowerCase())}))}getNextRetryBackoffMs(){var e;const t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;const r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){if("RETRY"!==this.state)return void t(!1);if(this.attempts>=this.maxAttempts)return void t(!1);let r;if(null===e)r=this.getNextRetryBackoffMs();else{if(e<0)return this.state="TRANSPARENT_ONLY",void t(!1);r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout((()=>{var e,r;"RETRY"===this.state?null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r?(t(!0),this.attempts+=1,this.startNewAttempt()):(this.trace("Retry attempt denied by throttling policy"),t(!1)):t(!1)}),r)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,o,s;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==n?n:[],e.code)){let n;if(null===(o=this.retryThrottler)||void 0===o||o.addCallFailed(),null===r)n=0;else{if(r<0)return this.state="TRANSPARENT_ONLY",this.commitCall(t),void this.reportStatus(e);n=r}setTimeout((()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))}),n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),this.maybeRetryCall(r,(r=>{r||(this.commitCall(t),this.reportStatus(e))}))):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK)return null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),void this.reportStatus(e);if("NO_RETRY"===this.state)return this.commitCall(t),void this.reportStatus(e);if("COMMITTED"===this.state)return void this.reportStatus(e);const o=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,o):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,o)}}maybeStartHedgingAttempt(){"HEDGING"===this.state&&this.callConfig.methodConfig.hedgingPolicy&&(this.attempts>=this.maxAttempts||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()))}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts)return;const o=null!==(e=n.hedgingDelay)&&void 0!==e?e:"0s",s=Number(o.substring(0,o.length-1));this.hedgingTimer=setTimeout((()=>{this.maybeStartHedgingAttempt()}),1e3*s),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});const r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(a,`${r}`);let o=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),o=!0,r>0&&n.set(a,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!o&&r>0&&n.metadata.set(a,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;const n=this.underlyingCalls[e],o=n.nextMessageToSend;null===(r=(t=this.getBufferEntry(o)).callback)||void 0===r||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){const r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);const n={message:t,flags:e.flags},o=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated){null===(r=e.callback)||void 0===r||r.call(e);for(const[e,r]of this.underlyingCalls.entries())"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},t)}else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;const r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(const e of this.underlyingCalls)"ACTIVE"===(null==e?void 0:e.state)&&e.call.startRead()}halfClose(){this.trace("halfClose called");const e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0,t.serverErrorToStatus=a;const n=r("events"),o=r("stream"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js");function a(e,t){var r;const n={code:s.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:null!==(r=null!=t?t:e.metadata)&&void 0!==r?r:null};return"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(n.code=e.code,"details"in e&&"string"==typeof e.details&&(n.details=e.details)),n}class l extends n.EventEmitter{constructor(e,t,r,n){super(),this.path=e,this.call=t,this.metadata=r,this.request=n,this.cancelled=!1}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}}t.ServerUnaryCallImpl=l;class c extends o.Readable{constructor(e,t,r){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.cancelled=!1}_read(e){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}}t.ServerReadableStreamImpl=c;class u extends o.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.request=n,this.pendingStatus={code:s.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new i.Metadata,this.on("error",(e=>{this.pendingStatus=a(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=u;class p extends o.Duplex{constructor(e,t,r){super({objectMode:!0}),this.path=e,this.call=t,this.metadata=r,this.pendingStatus={code:s.Status.OK,details:"OK"},this.cancelled=!1,this.trailingMetadata=new i.Metadata,this.on("error",(e=>{this.pendingStatus=a(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_read(e){this.call.startRead()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null),this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:null!==(t=this.pendingStatus.metadata)&&void 0!==t?t:this.trailingMetadata}))}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=p},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-credentials.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0,t.createCertificateProviderServerCredentials=function(e,t,r){return new a(e,t,r)},t.createServerCredentialsWithInterceptors=function(e,t){return new l(e,t)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/tls-helpers.js");class o{constructor(e,t){this.serverConstructorOptions=e,this.watchers=new Set,this.latestContextOptions=null,this.latestContextOptions=null!=t?t:null}_addWatcher(e){this.watchers.add(e)}_removeWatcher(e){this.watchers.delete(e)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(const e of this.watchers)e(this.latestContextOptions)}_isSecure(){return null!==this.serverConstructorOptions}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new s}static createSsl(e,t,r=!1){var o;if(null!==e&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw new TypeError("checkClientCertificate must be a boolean");const s=[],a=[];for(let e=0;e<t.length;e++){const r=t[e];if(null===r||"object"!=typeof r)throw new TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);s.push(r.cert_chain),a.push(r.private_key)}return new i({requestCert:r,ciphers:n.CIPHER_SUITES},{ca:null!==(o=null!=e?e:(0,n.getDefaultRootsData)())&&void 0!==o?o:void 0,cert:s,key:a})}}t.ServerCredentials=o;class s extends o{constructor(){super(null)}_getSettings(){return null}_equals(e){return e instanceof s}}class i extends o{constructor(e,t){super(e,t),this.options=Object.assign(Object.assign({},e),t)}_equals(e){if(this===e)return!0;if(!(e instanceof i))return!1;if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca))return!1}else if(this.options.ca!==e.options.ca)return!1;if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length)return!1;for(let t=0;t<this.options.cert.length;t++){const r=this.options.cert[t],n=e.options.cert[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n))return!1}else if(r!==n)return!1}}else if(this.options.cert!==e.options.cert)return!1;if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length)return!1;for(let t=0;t<this.options.key.length;t++){const r=this.options.key[t],n=e.options.key[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n))return!1}else if(r!==n)return!1}}else if(this.options.key!==e.options.key)return!1;return this.options.requestCert===e.options.requestCert}}class a extends o{constructor(e,t,r){super({requestCert:null!==t,rejectUnauthorized:r,ciphers:n.CIPHER_SUITES}),this.identityCertificateProvider=e,this.caCertificateProvider=t,this.requireClientCertificate=r,this.latestCaUpdate=null,this.latestIdentityUpdate=null,this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this),this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(e){var t;0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.addCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)),super._addWatcher(e)}_removeWatcher(e){var t;super._removeWatcher(e),0===this.getWatcherCount()&&(null===(t=this.caCertificateProvider)||void 0===t||t.removeCaCertificateListener(this.caCertificateUpdateListener),this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener))}_equals(e){return this===e||e instanceof a&&this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate}calculateSecureContextOptions(){var e;return null===this.latestIdentityUpdate||null!==this.caCertificateProvider&&null===this.latestCaUpdate?null:{ca:null===(e=this.latestCaUpdate)||void 0===e?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){const e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e)}handleCaCertificateUpdate(e){this.latestCaUpdate=e,this.finalizeUpdate()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e,this.finalizeUpdate()}}class l extends o{constructor(e,t){super({}),this.childCredentials=e,this.interceptors=t}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof l))return!1;if(!this.childCredentials._equals(e.childCredentials))return!1;if(this.interceptors.length!==e.interceptors.length)return!1;for(let t=0;t<this.interceptors.length;t++)if(this.interceptors[t]!==e.interceptors[t])return!1;return!0}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e)}_removeWatcher(e){this.childCredentials._removeWatcher(e)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-interceptors.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseServerInterceptingCall=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=void 0,t.isInterceptingServerListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.getServerInterceptingCall=function(e,t,r,n,o,s){const i={path:o.path,requestStream:"clientStream"===o.type||"bidi"===o.type,responseStream:"serverStream"===o.type||"bidi"===o.type,requestDeserialize:o.deserialize,responseSerialize:o.serialize},a=new C(t,r,n,o,s);return e.reduce(((e,t)=>t(i,e)),a)};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=r("http2"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/error.js"),a=r("zlib"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/stream-decoder.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),u="server_call";function p(e){c.trace(o.LogVerbosity.DEBUG,u,e)}t.ServerListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveHalfClose(e){return this.halfClose=e,this}withOnCancel(e){return this.cancel=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}};class d{constructor(e,t){this.listener=e,this.nextListener=t,this.cancelled=!1,this.processingMetadata=!1,this.hasPendingMessage=!1,this.pendingMessage=null,this.processingMessage=!1,this.hasPendingHalfClose=!1}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingHalfClose(){this.hasPendingHalfClose&&(this.nextListener.onReceiveHalfClose(),this.hasPendingHalfClose=!1)}onReceiveMetadata(e){this.cancelled||(this.processingMetadata=!0,this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=!1,this.cancelled||(this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingHalfClose())})))}onReceiveMessage(e){this.cancelled||(this.processingMessage=!0,this.listener.onReceiveMessage(e,(e=>{this.processingMessage=!1,this.cancelled||(this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingHalfClose()))})))}onReceiveHalfClose(){this.cancelled||this.listener.onReceiveHalfClose((()=>{this.cancelled||(this.processingMetadata||this.processingMessage?this.hasPendingHalfClose=!0:this.nextListener.onReceiveHalfClose())}))}onCancel(){this.cancelled=!0,this.listener.onCancel(),this.nextListener.onCancel()}}t.ResponderBuilder=class{constructor(){this.start=void 0,this.metadata=void 0,this.message=void 0,this.status=void 0}withStart(e){return this.start=e,this}withSendMetadata(e){return this.metadata=e,this}withSendMessage(e){return this.message=e,this}withSendStatus(e){return this.status=e,this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}};const m={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveHalfClose:e=>{e()},onCancel:()=>{}},h={start:e=>{e()},sendMetadata:(e,t)=>{t(e)},sendMessage:(e,t)=>{t(e)},sendStatus:(e,t)=>{t(e)}};t.ServerInterceptingCall=class{constructor(e,t){var r,n,o,s;this.nextCall=e,this.processingMetadata=!1,this.sentMetadata=!1,this.processingMessage=!1,this.pendingMessage=null,this.pendingMessageCallback=null,this.pendingStatus=null,this.responder={start:null!==(r=null==t?void 0:t.start)&&void 0!==r?r:h.start,sendMetadata:null!==(n=null==t?void 0:t.sendMetadata)&&void 0!==n?n:h.sendMetadata,sendMessage:null!==(o=null==t?void 0:t.sendMessage)&&void 0!==o?o:h.sendMessage,sendStatus:null!==(s=null==t?void 0:t.sendStatus)&&void 0!==s?s:h.sendStatus}}processPendingMessage(){this.pendingMessageCallback&&(this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback),this.pendingMessage=null,this.pendingMessageCallback=null)}processPendingStatus(){this.pendingStatus&&(this.nextCall.sendStatus(this.pendingStatus),this.pendingStatus=null)}start(e){this.responder.start((t=>{var r,n,o,s;const i={onReceiveMetadata:null!==(r=null==t?void 0:t.onReceiveMetadata)&&void 0!==r?r:m.onReceiveMetadata,onReceiveMessage:null!==(n=null==t?void 0:t.onReceiveMessage)&&void 0!==n?n:m.onReceiveMessage,onReceiveHalfClose:null!==(o=null==t?void 0:t.onReceiveHalfClose)&&void 0!==o?o:m.onReceiveHalfClose,onCancel:null!==(s=null==t?void 0:t.onCancel)&&void 0!==s?s:m.onCancel},a=new d(i,e);this.nextCall.start(a)}))}sendMetadata(e){this.processingMetadata=!0,this.sentMetadata=!0,this.responder.sendMetadata(e,(e=>{this.processingMetadata=!1,this.nextCall.sendMetadata(e),this.processPendingMessage(),this.processPendingStatus()}))}sendMessage(e,t){this.processingMessage=!0,this.sentMetadata||this.sendMetadata(new n.Metadata),this.responder.sendMessage(e,(e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.pendingMessageCallback=t):this.nextCall.sendMessage(e,t)}))}sendStatus(e){this.responder.sendStatus(e,(e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextCall.sendStatus(e)}))}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}};const g="grpc-accept-encoding",f="grpc-encoding",y="grpc-message",b="grpc-status",v="grpc-timeout",_=/(\d{1,8})\s*([HMSmun])/,S={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},T={[g]:"identity,deflate,gzip",[f]:"identity"},x={[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_OK,[s.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},E={waitForTrailers:!0};class C{constructor(e,t,r,i,a){var d;this.stream=e,this.callEventTracker=r,this.handler=i,this.listener=null,this.deadlineTimer=null,this.deadline=1/0,this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.cancelled=!1,this.metadataSent=!1,this.wantTrailers=!1,this.cancelNotified=!1,this.incomingEncoding="identity",this.readQueue=[],this.isReadPending=!1,this.receivedHalfClose=!1,this.streamEnded=!1,this.stream.once("error",(e=>{})),this.stream.once("close",(()=>{var e;p("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!1),this.callEventTracker.onCallEnd({code:o.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})),this.notifyOnCancel()})),this.stream.on("data",(e=>{this.handleDataFrame(e)})),this.stream.pause(),this.stream.on("end",(()=>{this.handleEndEvent()})),"grpc.max_send_message_length"in a&&(this.maxSendMessageSize=a["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in a&&(this.maxReceiveMessageSize=a["grpc.max_receive_message_length"]),this.host=null!==(d=t[":authority"])&&void 0!==d?d:t.host,this.decoder=new l.StreamDecoder(this.maxReceiveMessageSize);const m=n.Metadata.fromHttp2Headers(t);c.isTracerEnabled(u)&&p("Request to "+this.handler.path+" received headers "+JSON.stringify(m.toJSON()));const h=m.get(v);h.length>0&&this.handleTimeoutHeader(h[0]);const y=m.get(f);y.length>0&&(this.incomingEncoding=y[0]),m.remove(v),m.remove(f),m.remove(g),m.remove(s.constants.HTTP2_HEADER_ACCEPT_ENCODING),m.remove(s.constants.HTTP2_HEADER_TE),m.remove(s.constants.HTTP2_HEADER_CONTENT_TYPE),this.metadata=m}handleTimeoutHeader(e){const t=e.toString().match(_);if(null===t){const t={code:o.Status.INTERNAL,details:`Invalid ${v} value "${e}"`,metadata:null};return void process.nextTick((()=>{this.sendStatus(t)}))}const r=+t[1]*S[t[2]]|0,n=new Date;this.deadline=n.setMilliseconds(n.getMilliseconds()+r),this.deadlineTimer=setTimeout((()=>{const e={code:o.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(e)}),r)}checkCancelled(){return this.cancelled||!this.stream.destroyed&&!this.stream.closed||(this.notifyOnCancel(),this.cancelled=!0),this.cancelled}notifyOnCancel(){this.cancelNotified||(this.cancelNotified=!0,this.cancelled=!0,process.nextTick((()=>{var e;null===(e=this.listener)||void 0===e||e.onCancel()})),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.resume())}maybeSendMetadata(){this.metadataSent||this.sendMetadata(new n.Metadata)}serializeMessage(e){const t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}decompressMessage(e,t){const r=e.subarray(5);if("identity"===t)return r;if("deflate"===t||"gzip"===t){let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise(((t,n)=>{let s=0;const i=[];e.on("data",(t=>{i.push(t),s+=t.byteLength,-1!==this.maxReceiveMessageSize&&s>this.maxReceiveMessageSize&&(e.destroy(),n({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))})),e.on("end",(()=>{t(Buffer.concat(i))})),e.write(r),e.end()}))}return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}async decompressAndMaybePush(e){if("COMPRESSED"!==e.type)throw new Error(`Invalid queue entry type: ${e.type}`);const t=1===e.compressedMessage.readUInt8(0)?this.incomingEncoding:"identity";let r;try{r=await this.decompressMessage(e.compressedMessage,t)}catch(e){return void this.sendStatus(e)}try{e.parsedMessage=this.handler.deserialize(r)}catch(e){return void this.sendStatus({code:o.Status.INTERNAL,details:`Error deserializing request: ${e.message}`})}e.type="READABLE",this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&"COMPRESSED"!==this.readQueue[0].type){this.isReadPending=!1;const e=this.readQueue.shift();"READABLE"===e.type?this.listener.onReceiveMessage(e.parsedMessage):this.listener.onReceiveHalfClose()}}handleDataFrame(e){var t;if(this.checkCancelled())return;let r;p("Request to "+this.handler.path+" received data frame of size "+e.length);try{r=this.decoder.write(e)}catch(e){return void this.sendStatus({code:o.Status.RESOURCE_EXHAUSTED,details:e.message})}for(const e of r){this.stream.pause();const r={type:"COMPRESSED",compressedMessage:e,parsedMessage:null};this.readQueue.push(r),this.decompressAndMaybePush(r),null===(t=this.callEventTracker)||void 0===t||t.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null}),this.receivedHalfClose=!0,this.maybePushNextMessage()}start(e){p("Request to "+this.handler.path+" start called"),this.checkCancelled()||(this.listener=e,e.onReceiveMetadata(this.metadata))}sendMetadata(e){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;const t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},x),T),t);this.stream.respond(r,E)}sendMessage(e,t){if(this.checkCancelled())return;let r;try{r=this.serializeMessage(e)}catch(e){return void this.sendStatus({code:o.Status.INTERNAL,details:`Error serializing response: ${(0,i.getErrorMessage)(e)}`,metadata:null})}-1!==this.maxSendMessageSize&&r.length-5>this.maxSendMessageSize?this.sendStatus({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${r.length} vs. ${this.maxSendMessageSize})`,metadata:null}):(this.maybeSendMetadata(),p("Request to "+this.handler.path+" sent data frame of size "+r.length),this.stream.write(r,(e=>{var r;e?this.sendStatus({code:o.Status.INTERNAL,details:`Error writing message: ${(0,i.getErrorMessage)(e)}`,metadata:null}):(null===(r=this.callEventTracker)||void 0===r||r.addMessageSent(),t())})))}sendStatus(e){var t,r;if(!this.checkCancelled())if(p("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.metadataSent)this.wantTrailers?this.notifyOnCancel():(this.wantTrailers=!0,this.stream.once("wantTrailers",(()=>{var t;this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const r=Object.assign({[b]:e.code,[y]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.notifyOnCancel()})),this.stream.end());else{this.callEventTracker&&!this.streamEnded&&(this.streamEnded=!0,this.callEventTracker.onStreamEnd(!0),this.callEventTracker.onCallEnd(e));const t=Object.assign(Object.assign({[b]:e.code,[y]:encodeURI(e.details)},x),null===(r=e.metadata)||void 0===r?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.notifyOnCancel()}}startRead(){p("Request to "+this.handler.path+" startRead called"),this.checkCancelled()||(this.isReadPending=!0,0===this.readQueue.length?this.receivedHalfClose||this.stream.resume():this.maybePushNextMessage())}getPeer(){var e;const t=null===(e=this.stream.session)||void 0===e?void 0:e.socket;return(null==t?void 0:t.remoteAddress)?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getHost(){return this.host}}t.BaseServerInterceptingCall=C},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server.js":function(e,t,r){var n=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0},o=this&&this.__esDecorate||function(e,t,r,n,o,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d=!1,m=r.length-1;m>=0;m--){var h={};for(var g in n)h[g]="access"===g?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var f=(0,r[m])("accessor"===l?{get:p.get,set:p.set}:p[c],h);if("accessor"===l){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(a=i(f.get))&&(p.get=a),(a=i(f.set))&&(p.set=a),(a=i(f.init))&&o.unshift(a)}else(a=i(f))&&("field"===l?o.unshift(a):p[c]=a)}u&&Object.defineProperty(u,n.name,p),d=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const s=r("http2"),i=r("util"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-call.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-credentials.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),p=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),h=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js"),g=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/server-interceptors.js"),f=~(1<<31),y=~(1<<31),b=~(1<<31),{HTTP2_HEADER_PATH:v}=s.constants,_=Buffer.from("max_age");function S(e){p.trace(a.LogVerbosity.DEBUG,"server_call",e)}function T(){}function x(e){return{code:a.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}let E=(()=>{var e;let t,r=[];return e=class{constructor(e){var t,o,s,i,a,l;this.boundPorts=(n(this,r),new Map),this.http2Servers=new Map,this.sessionIdleTimeouts=new Map,this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new h.ChannelzTraceStub,this.callTracker=new h.ChannelzCallTrackerStub,this.listenerChildrenTracker=new h.ChannelzChildrenTrackerStub,this.sessionChildrenTracker=new h.ChannelzChildrenTrackerStub):(this.channelzTrace=new h.ChannelzTrace,this.callTracker=new h.ChannelzCallTracker,this.listenerChildrenTracker=new h.ChannelzChildrenTracker,this.sessionChildrenTracker=new h.ChannelzChildrenTracker),this.channelzRef=(0,h.registerChannelzServer)("server",(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:f,this.maxConnectionAgeGraceMs=null!==(o=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==o?o:f,this.keepaliveTimeMs=null!==(s=this.options["grpc.keepalive_time_ms"])&&void 0!==s?s:y,this.keepaliveTimeoutMs=null!==(i=this.options["grpc.keepalive_timeout_ms"])&&void 0!==i?i:2e4,this.sessionIdleTimeout=null!==(a=this.options["grpc.max_connection_idle_ms"])&&void 0!==a?a:b,this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER},"grpc-node.max_session_memory"in this.options?this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]:this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}),this.interceptors=null!==(l=this.options.interceptors)&&void 0!==l?l:[],this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(e){var t,r,n;const o=this.sessions.get(e),s=e.socket,i=s.remoteAddress?(0,d.stringToSubchannelAddress)(s.remoteAddress,s.remotePort):null,a=s.localAddress?(0,d.stringToSubchannelAddress)(s.localAddress,s.localPort):null;let l;if(e.encrypted){const e=s,r=e.getCipher(),n=e.getCertificate(),o=e.getPeerCertificate();l={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:o&&"raw"in o?o.raw:null}}else l=null;return{remoteAddress:i,localAddress:a,security:l,remoteName:null,streamsStarted:o.streamTracker.callsStarted,streamsSucceeded:o.streamTracker.callsSucceeded,streamsFailed:o.streamTracker.callsFailed,messagesSent:o.messagesSent,messagesReceived:o.messagesReceived,keepAlivesSent:o.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:o.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:o.lastMessageSentTimestamp,lastMessageReceivedTimestamp:o.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}trace(e){p.trace(a.LogVerbosity.DEBUG,"server","("+this.channelzRef.id+") "+e)}keepaliveTrace(e){p.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw new Error("addService() requires two objects as arguments");const r=Object.keys(e);if(0===r.length)throw new Error("Cannot add an empty service to a server");r.forEach((r=>{const n=e[r];let o;o=n.requestStream?n.responseStream?"bidi":"clientStream":n.responseStream?"serverStream":"unary";let s,i=t[r];if(void 0===i&&"string"==typeof n.originalName&&(i=t[n.originalName]),s=void 0!==i?i.bind(t):function(e,t){const r=x(t);switch(e){case"unary":case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}(o,r),!1===this.register(n.path,s,n.responseSerialize,n.requestDeserialize,o))throw new Error(`Method handler for ${n.path} already provided.`)}))}removeService(e){if(null===e||"object"!=typeof e)throw new Error("removeService() requires object as argument");Object.keys(e).forEach((t=>{const r=e[t];this.unregister(r.path)}))}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(e){return(0,h.registerChannelzSocket)((0,d.subchannelAddressToString)(e),(()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(e){(0,h.unregisterChannelzRef)(e)}createHttp2Server(e){let t;if(e._isSecure()){const r=e._getConstructorOptions(),n=e._getSecureContextOptions(),o=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),r),n),{enableTrace:1===this.options["grpc-node.tls_enable_trace"]});let i=null!==n;this.trace("Initial credentials valid: "+i),t=s.createSecureServer(o),t.prependListener("connection",(e=>{i||(this.trace("Dropped connection from "+JSON.stringify(e.address())+" due to unloaded credentials"),e.destroy())})),t.on("secureConnection",(e=>{e.on("error",(e=>{this.trace("An incoming TLS connection closed with error: "+e.message)}))}));const l=e=>{if(e){const r=t;try{r.setSecureContext(e)}catch(t){p.log(a.LogVerbosity.ERROR,"Failed to set secure context with error "+t.message),e=null}}i=null!==e,this.trace("Post-update credentials valid: "+i)};e._addWatcher(l),t.on("close",(()=>{e._removeWatcher(l)}))}else t=s.createServer(this.commonServerOptions);return t.setTimeout(0,T),this._setupHandlers(t,e._getInterceptors()),t}bindOneAddress(e,t){this.trace("Attempting to bind "+(0,d.subchannelAddressToString)(e));const r=this.createHttp2Server(t.credentials);return new Promise(((n,o)=>{const s=t=>{this.trace("Failed to bind "+(0,d.subchannelAddressToString)(e)+" with error "+t.message),n({port:"port"in e?e.port:1,error:t.message})};r.once("error",s),r.listen(e,(()=>{const e=r.address();let o;o="string"==typeof e?{path:e}:{host:e.address,port:e.port};const i=this.experimentalRegisterListenerToChannelz(o);this.listenerChildrenTracker.refChild(i),this.http2Servers.set(r,{channelzRef:i,sessions:new Set,ownsChannelzRef:!0}),t.listeningServers.add(r),this.trace("Successfully bound "+(0,d.subchannelAddressToString)(o)),n({port:"port"in o?o.port:1}),r.removeListener("error",s)}))}))}async bindManyPorts(e,t){if(0===e.length)return{count:0,port:0,errors:[]};if((0,d.isTcpSubchannelAddress)(e[0])&&0===e[0].port){const r=await this.bindOneAddress(e[0],t);if(r.error){const n=await this.bindManyPorts(e.slice(1),t);return Object.assign(Object.assign({},n),{errors:[r.error,...n.errors]})}{const n=e.slice(1).map((e=>(0,d.isTcpSubchannelAddress)(e)?{host:e.host,port:r.port}:e)),o=await Promise.all(n.map((e=>this.bindOneAddress(e,t)))),s=[r,...o];return{count:s.filter((e=>void 0===e.error)).length,port:r.port,errors:s.filter((e=>e.error)).map((e=>e.error))}}}{const r=await Promise.all(e.map((e=>this.bindOneAddress(e,t))));return{count:r.filter((e=>void 0===e.error)).length,port:r[0].port,errors:r.filter((e=>e.error)).map((e=>e.error))}}}async bindAddressList(e,t){const r=await this.bindManyPorts(e,t);if(r.count>0)return r.count<e.length&&p.log(a.LogVerbosity.INFO,`WARNING Only ${r.count} addresses added out of total ${e.length} resolved`),r.port;{const t=`No address added out of total ${e.length} resolved`;throw p.log(a.LogVerbosity.ERROR,t),new Error(`${t} errors: [${r.errors.join(",")}]`)}}resolvePort(e){return new Promise(((t,r)=>{const n={onSuccessfulResolution:(o,s,i)=>{n.onSuccessfulResolution=()=>{};const a=[].concat(...o.map((e=>e.addresses)));0!==a.length?t(a):r(new Error(`No addresses resolved for port ${e}`))},onError:e=>{r(new Error(e.details))}};(0,u.createResolver)(e,n,this.options).updateResolution()}))}async bindPort(e,t){const r=await this.resolvePort(e);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");const n=await this.bindAddressList(r,t);if(t.cancelled)throw this.completeUnbind(t),new Error("bindAsync operation cancelled by unbind call");return n}normalizePort(e){const t=(0,m.parseUri)(e);if(null===t)throw new Error(`Could not parse port "${e}"`);const r=(0,u.mapUriDefaultScheme)(t);if(null===r)throw new Error(`Could not get a default scheme for port "${e}"`);return r}bindAsync(e,t,r){if(this.shutdown)throw new Error("bindAsync called after shutdown");if("string"!=typeof e)throw new TypeError("port must be a string");if(null===t||!(t instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw new TypeError("callback must be a function");this.trace("bindAsync port="+e);const n=this.normalizePort(e),o=(e,t)=>{process.nextTick((()=>r(e,t)))};let s=this.boundPorts.get((0,m.uriToString)(n));if(s)return t._equals(s.credentials)?(s.cancelled=!1,void(s.completionPromise?s.completionPromise.then((e=>r(null,e)),(e=>r(e,0))):o(null,s.portNumber))):void o(new Error(`${e} already bound with incompatible credentials`),0);s={mapKey:(0,m.uriToString)(n),originalUri:n,completionPromise:null,cancelled:!1,portNumber:0,credentials:t,listeningServers:new Set};const i=(0,m.splitHostPort)(n.path),a=this.bindPort(n,s);s.completionPromise=a,0===(null==i?void 0:i.port)?a.then((e=>{const t={scheme:n.scheme,authority:n.authority,path:(0,m.combineHostPort)({host:i.host,port:e})};s.mapKey=(0,m.uriToString)(t),s.completionPromise=null,s.portNumber=e,this.boundPorts.set(s.mapKey,s),r(null,e)}),(e=>{r(e,0)})):(this.boundPorts.set(s.mapKey,s),a.then((e=>{s.completionPromise=null,s.portNumber=e,r(null,e)}),(e=>{r(e,0)})))}registerInjectorToChannelz(){return(0,h.registerChannelzSocket)("injector",(()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(e,t,r=!1){if(null===e||!(e instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");this.channelzEnabled&&this.listenerChildrenTracker.refChild(t);const n=this.createHttp2Server(e),o=new Set;return this.http2Servers.set(n,{channelzRef:t,sessions:o,ownsChannelzRef:r}),{injectConnection:e=>{n.emit("connection",e)},drain:e=>{var t,r;for(const e of o)this.closeSession(e);null===(r=(t=setTimeout((()=>{for(const e of o)e.destroy(s.constants.NGHTTP2_CANCEL)}),e)).unref)||void 0===r||r.call(t)},destroy:()=>{this.closeServer(n);for(const e of o)this.closeSession(e)}}}createConnectionInjector(e){if(null===e||!(e instanceof c.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");const t=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(e,t,!0)}closeServer(e,t){this.trace("Closing server with address "+JSON.stringify(e.address()));const r=this.http2Servers.get(e);e.close((()=>{r&&r.ownsChannelzRef&&(this.listenerChildrenTracker.unrefChild(r.channelzRef),(0,h.unregisterChannelzRef)(r.channelzRef)),this.http2Servers.delete(e),null==t||t()}))}closeSession(e,t){var r;this.trace("Closing session initiated by "+(null===(r=e.socket)||void 0===r?void 0:r.remoteAddress));const n=this.sessions.get(e),o=()=>{n&&(this.sessionChildrenTracker.unrefChild(n.ref),(0,h.unregisterChannelzRef)(n.ref)),null==t||t()};e.closed?queueMicrotask(o):e.close(o)}completeUnbind(e){for(const t of e.listeningServers){const r=this.http2Servers.get(t);if(this.closeServer(t,(()=>{e.listeningServers.delete(t)})),r)for(const e of r.sessions)this.closeSession(e)}this.boundPorts.delete(e.mapKey)}unbind(e){this.trace("unbind port="+e);const t=this.normalizePort(e),r=(0,m.splitHostPort)(t.path);if(0===(null==r?void 0:r.port))throw new Error("Cannot unbind port 0");const n=this.boundPorts.get((0,m.uriToString)(t));n&&(this.trace("unbinding "+n.mapKey+" originally bound as "+(0,m.uriToString)(n.originalUri)),n.completionPromise?n.cancelled=!0:this.completeUnbind(n))}drain(e,t){var r,n;this.trace("drain port="+e+" graceTimeMs="+t);const o=this.normalizePort(e),i=(0,m.splitHostPort)(o.path);if(0===(null==i?void 0:i.port))throw new Error("Cannot drain port 0");const a=this.boundPorts.get((0,m.uriToString)(o));if(!a)return;const l=new Set;for(const e of a.listeningServers){const t=this.http2Servers.get(e);if(t)for(const e of t.sessions)l.add(e),this.closeSession(e,(()=>{l.delete(e)}))}null===(n=(r=setTimeout((()=>{for(const e of l)e.destroy(s.constants.NGHTTP2_CANCEL)}),t)).unref)||void 0===n||n.call(r)}forceShutdown(){for(const e of this.boundPorts.values())e.cancelled=!0;this.boundPorts.clear();for(const e of this.http2Servers.keys())this.closeServer(e);this.sessions.forEach(((e,t)=>{this.closeSession(t),t.destroy(s.constants.NGHTTP2_CANCEL)})),this.sessions.clear(),(0,h.unregisterChannelzRef)(this.channelzRef),this.shutdown=!0}register(e,t,r,n,o){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:o,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2Servers.size||[...this.http2Servers.keys()].every((e=>!e.listening)))throw new Error("server must be bound in order to start");if(!0===this.started)throw new Error("server is already started");this.started=!0}tryShutdown(e){var t;const r=t=>{(0,h.unregisterChannelzRef)(this.channelzRef),e(t)};let n=0;function o(){n--,0===n&&r()}this.shutdown=!0;for(const[e,r]of this.http2Servers.entries()){n++;const s=r.channelzRef.name;this.trace("Waiting for server "+s+" to close"),this.closeServer(e,(()=>{this.trace("Server "+s+" finished closing"),o()}));for(const e of r.sessions.keys()){n++;const r=null===(t=e.socket)||void 0===t?void 0:t.remoteAddress;this.trace("Waiting for session "+r+" to close"),this.closeSession(e,(()=>{this.trace("Session "+r+" finished closing"),o()}))}}0===n&&r()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const r=t[s.constants.HTTP2_HEADER_CONTENT_TYPE];return!("string"!=typeof r||!r.startsWith("application/grpc"))||(e.respond({[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){S("Received call to method "+e+" at address "+this.serverAddressString);const t=this.handlers.get(e);return void 0===t?(S("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){var n,o;const i=Object.assign({"grpc-status":null!==(n=e.code)&&void 0!==n?n:a.Status.INTERNAL,"grpc-message":e.details,[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_OK,[s.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},null===(o=e.metadata)||void 0===o?void 0:o.toHttp2Headers());t.respond(i,{endStream:!0}),this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()}_channelzHandler(e,t,r){this.onStreamOpened(t);const n=this.sessions.get(t.session);if(this.callTracker.addCallStarted(),null==n||n.streamTracker.addCallStarted(),!this._verifyContentType(t,r))return this.callTracker.addCallFailed(),void(null==n||n.streamTracker.addCallFailed());const o=r[v],s=this._retrieveHandler(o);if(!s)return void this._respondWithError(x(o),t,n);const i={addMessageSent:()=>{n&&(n.messagesSent+=1,n.lastMessageSentTimestamp=new Date)},addMessageReceived:()=>{n&&(n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date)},onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()},onStreamEnd:e=>{n&&(e?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed())}},l=(0,g.getServerInterceptingCall)([...e,...this.interceptors],t,r,i,s,this.options);this._runHandlerForCall(l,s)||(this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed(),l.sendStatus({code:a.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,t,r){if(this.onStreamOpened(t),!0!==this._verifyContentType(t,r))return;const n=r[v],o=this._retrieveHandler(n);if(!o)return void this._respondWithError(x(n),t,null);const s=(0,g.getServerInterceptingCall)([...e,...this.interceptors],t,r,null,o,this.options);this._runHandlerForCall(s,o)||s.sendStatus({code:a.Status.INTERNAL,details:`Unknown handler type: ${o.type}`})}_runHandlerForCall(e,t){const{type:r}=t;if("unary"===r)!async function(e,t){let r,n;function o(t,r,n,o){t?e.sendStatus((0,l.serverErrorToStatus)(t,n)):e.sendMessage(r,(()=>{e.sendStatus({code:a.Status.OK,details:"OK",metadata:null!=n?n:null})}))}let s=null;e.start({onReceiveMetadata(t){n=t,e.startRead()},onReceiveMessage(r){s?e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(s=r,e.startRead())},onReceiveHalfClose(){if(s){r=new l.ServerWritableStreamImpl(t.path,e,n,s);try{t.func(r,o)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"))}})}(e,t);else if("clientStream"===r)!function(e,t){let r;function n(t,r,n,o){t?e.sendStatus((0,l.serverErrorToStatus)(t,n)):e.sendMessage(r,(()=>{e.sendStatus({code:a.Status.OK,details:"OK",metadata:null!=n?n:null})}))}e.start({onReceiveMetadata(o){r=new l.ServerDuplexStreamImpl(t.path,e,o);try{t.func(r,n)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t);else if("serverStream"===r)!function(e,t){let r,n,o=null;e.start({onReceiveMetadata(t){n=t,e.startRead()},onReceiveMessage(r){o?e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null}):(o=r,e.startRead())},onReceiveHalfClose(){if(o){r=new l.ServerWritableStreamImpl(t.path,e,n,o);try{t.func(r)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}}else e.sendStatus({code:a.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null})},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t);else{if("bidi"!==r)return!1;!function(e,t){let r;e.start({onReceiveMetadata(n){r=new l.ServerDuplexStreamImpl(t.path,e,n);try{t.func(r)}catch(t){e.sendStatus({code:a.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){r&&(r.cancelled=!0,r.emit("cancelled","cancelled"),r.destroy())}})}(e,t)}return!0}_setupHandlers(e,t){if(null===e)return;const r=e.address();let n="null";r&&(n="string"==typeof r?r:r.address+":"+r.port),this.serverAddressString=n;const o=this.channelzEnabled?this._channelzHandler:this._streamHandler,s=this.channelzEnabled?this._channelzSessionHandler(e):this._sessionHandler(e);e.on("stream",o.bind(this,t)),e.on("session",s)}_sessionHandler(e){return t=>{var r,n;null===(r=this.http2Servers.get(e))||void 0===r||r.sessions.add(t);let o=null,i=null,a=null,l=!1;const c=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==f){const e=this.maxConnectionAgeMs/10,r=Math.random()*e*2-e;o=setTimeout((()=>{var e,r;l=!0,this.trace("Connection dropped by max connection age: "+(null===(e=t.socket)||void 0===e?void 0:e.remoteAddress));try{t.goaway(s.constants.NGHTTP2_NO_ERROR,~(1<<31),_)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==f&&(i=setTimeout((()=>{t.destroy()}),this.maxConnectionAgeGraceMs),null===(r=i.unref)||void 0===r||r.call(i))}),this.maxConnectionAgeMs+r),null===(n=o.unref)||void 0===n||n.call(o)}const u=()=>{a&&(clearTimeout(a),a=null)},p=()=>!t.destroyed&&this.keepaliveTimeMs<y&&this.keepaliveTimeMs>0;let d;const m=()=>{var e;p()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),a=setTimeout((()=>{u(),d()}),this.keepaliveTimeMs),null===(e=a.unref)||void 0===e||e.call(a))};d=()=>{var e;if(!p())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{t.ping(((e,r,n)=>{u(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),l=!0,t.close()):(this.keepaliveTrace("Received ping response"),m())}))||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r)return this.keepaliveTrace("Ping send failed: "+r),this.trace("Connection dropped due to ping send error: "+r),l=!0,void t.close();a=setTimeout((()=>{u(),this.keepaliveTrace("Ping timeout passed without response"),this.trace("Connection dropped by keepalive timeout"),l=!0,t.close()}),this.keepaliveTimeoutMs),null===(e=a.unref)||void 0===e||e.call(a)},m(),t.on("close",(()=>{var r,n;l||this.trace(`Connection dropped by client ${null===(r=t.socket)||void 0===r?void 0:r.remoteAddress}`),o&&clearTimeout(o),i&&clearTimeout(i),u(),null!==c&&(clearTimeout(c.timeout),this.sessionIdleTimeouts.delete(t)),null===(n=this.http2Servers.get(e))||void 0===n||n.sessions.delete(t)}))}}_channelzSessionHandler(e){return t=>{var r,n,o,i;const a=(0,h.registerChannelzSocket)(null!==(n=null===(r=t.socket)||void 0===r?void 0:r.remoteAddress)&&void 0!==n?n:"unknown",this.getChannelzSessionInfo.bind(this,t),this.channelzEnabled),l={ref:a,streamTracker:new h.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};null===(o=this.http2Servers.get(e))||void 0===o||o.sessions.add(t),this.sessions.set(t,l);const c=`${t.socket.remoteAddress}:${t.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+c),this.trace("Connection established by client "+c),this.sessionChildrenTracker.refChild(a);let u=null,p=null,d=null,m=!1;const g=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==f){const e=this.maxConnectionAgeMs/10,r=Math.random()*e*2-e;u=setTimeout((()=>{var e;m=!0,this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+c);try{t.goaway(s.constants.NGHTTP2_NO_ERROR,~(1<<31),_)}catch(e){return void t.destroy()}t.close(),this.maxConnectionAgeGraceMs!==f&&(p=setTimeout((()=>{t.destroy()}),this.maxConnectionAgeGraceMs),null===(e=p.unref)||void 0===e||e.call(p))}),this.maxConnectionAgeMs+r),null===(i=u.unref)||void 0===i||i.call(u)}const b=()=>{d&&(clearTimeout(d),d=null)},v=()=>!t.destroyed&&this.keepaliveTimeMs<y&&this.keepaliveTimeMs>0;let S;const T=()=>{var e;v()&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),d=setTimeout((()=>{b(),S()}),this.keepaliveTimeMs),null===(e=d.unref)||void 0===e||e.call(d))};S=()=>{var e;if(!v())return;this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{t.ping(((e,r,n)=>{b(),e?(this.keepaliveTrace("Ping failed with error: "+e.message),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+e.message+" return in "+r),m=!0,t.close()):(this.keepaliveTrace("Received ping response"),T())}))||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r)return this.keepaliveTrace("Ping send failed: "+r),this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+r),m=!0,void t.close();l.keepAlivesSent+=1,d=setTimeout((()=>{b(),this.keepaliveTrace("Ping timeout passed without response"),this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+c),m=!0,t.close()}),this.keepaliveTimeoutMs),null===(e=d.unref)||void 0===e||e.call(d)},T(),t.on("close",(()=>{var r;m||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+c),this.sessionChildrenTracker.unrefChild(a),(0,h.unregisterChannelzRef)(a),u&&clearTimeout(u),p&&clearTimeout(p),b(),null!==g&&(clearTimeout(g.timeout),this.sessionIdleTimeouts.delete(t)),null===(r=this.http2Servers.get(e))||void 0===r||r.sessions.delete(t),this.sessions.delete(t)}))}}enableIdleTimeout(e){var t,r;if(this.sessionIdleTimeout>=b)return null;const n={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,e),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,e)};null===(r=(t=n.timeout).unref)||void 0===r||r.call(t),this.sessionIdleTimeouts.set(e,n);const{socket:o}=e;return this.trace("Enable idle timeout for "+o.remoteAddress+":"+o.remotePort),n}onIdleTimeout(e,t){const{socket:r}=t,n=e.sessionIdleTimeouts.get(t);void 0!==n&&0===n.activeStreams&&(Date.now()-n.lastIdle>=e.sessionIdleTimeout?(e.trace("Session idle timeout triggered for "+(null==r?void 0:r.remoteAddress)+":"+(null==r?void 0:r.remotePort)+" last idle at "+n.lastIdle),e.closeSession(t)):n.timeout.refresh())}onStreamOpened(e){const t=e.session,r=this.sessionIdleTimeouts.get(t);r&&(r.activeStreams+=1,e.once("close",r.onClose))}onStreamClose(e){var t,r;const n=this.sessionIdleTimeouts.get(e);n&&(n.activeStreams-=1,0===n.activeStreams&&(n.lastIdle=Date.now(),n.timeout.refresh(),this.trace("Session onStreamClose"+(null===(t=e.socket)||void 0===t?void 0:t.remoteAddress)+":"+(null===(r=e.socket)||void 0===r?void 0:r.remotePort)+" at "+n.lastIdle)))}},(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;t=[function(e,t){return i.deprecate(e,"Calling start() is no longer necessary. It can be safely omitted.")}],o(e,null,t,{kind:"method",name:"start",static:!1,private:!1,access:{has:e=>"start"in e,get:e=>e.start},metadata:n},null,r),n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),e})();t.Server=E},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/service-config.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateRetryThrottling=c,t.validateServiceConfig=p,t.extractAndSelectServiceConfig=function(e,t){for(const r of e)if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring(12);return m(JSON.parse(e),t)}return null};const n=r("os"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),s=/^\d+(\.\d{1,9})?s$/,i="node";function a(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw new Error("Invalid method config name: invalid service: expected type string, got "+typeof e.service);if("method"in e&&""!==e.method){if("string"!=typeof e.method)throw new Error("Invalid method config name: invalid method: expected type string, got "+typeof e.service);return{service:e.service,method:e.method}}return{service:e.service}}if("method"in e&&void 0!==e.method)throw new Error("Invalid method config name: method set with empty or unset service");return{}}function l(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw new Error("Invalid method config: invalid name array");for(const t of e.name)r.name.push(a(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else{if("string"!=typeof e.timeout||!s.test(e.timeout))throw new Error("Invalid method config: invalid timeout");{const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:0|(null!==(t=n[1])&&void 0!==t?t:0)}}}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!s.test(e.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!s.test(e.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e)||!Array.isArray(e.retryableStatusCodes))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(const t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!s.test(e.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(const t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}const t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}(e.hedgingPolicy));return r}function c(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function u(e){if("object"!=typeof e||null===e)throw new Error("Invalid loadBalancingConfig: unexpected type "+typeof e);const t=Object.keys(e);if(t.length>1)throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${t}`);if(0===t.length)throw new Error("Invalid loadBalancingConfig: load balancing policy name required");return{[t[0]]:e[t[0]]}}function p(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"!=typeof e.loadBalancingPolicy)throw new Error("Invalid service config: invalid loadBalancingPolicy");t.loadBalancingPolicy=e.loadBalancingPolicy}if("loadBalancingConfig"in e){if(!Array.isArray(e.loadBalancingConfig))throw new Error("Invalid service config: invalid loadBalancingConfig");for(const r of e.loadBalancingConfig)t.loadBalancingConfig.push(u(r))}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(const r of e.methodConfig)t.methodConfig.push(l(r));"retryThrottling"in e&&(t.retryThrottling=c(e.retryThrottling));const r=[];for(const e of t.methodConfig)for(const t of e.name){for(const e of r)if(t.service===e.service&&t.method===e.method)throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function d(e){if(!("serviceConfig"in e))throw new Error("Invalid service config choice: missing service config");const t={serviceConfig:p(e.serviceConfig)};if("clientLanguage"in e){if(!Array.isArray(e.clientLanguage))throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage=[];for(const r of e.clientLanguage){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage.push(r)}}if("clientHostname"in e){if(!Array.isArray(e.clientHostname))throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname=[];for(const r of e.clientHostname){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname.push(r)}}if("percentage"in e){if(!("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100))throw new Error("Invalid service config choice: invalid percentage");t.percentage=e.percentage}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e)if(!r.includes(t))throw new Error(`Invalid service config choice: unexpected field ${t}`);return t}function m(e,t){if(!Array.isArray(e))throw new Error("Invalid service config list");for(const r of e){const e=d(r);if(!("number"==typeof e.percentage&&t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(const r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(const r of e.clientLanguage)r===i&&(t=!0);if(!t)continue}return e.serviceConfig}}throw new Error("No matching service config found")}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/status-builder.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0,t.StatusBuilder=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){const e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/stream-decoder.js":(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={})),t.StreamDecoder=class{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0;const o=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,o.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,o.push(t)}break;default:throw new Error("Unexpected read state")}return o}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointMap=void 0,t.isTcpSubchannelAddress=o,t.subchannelAddressEqual=s,t.subchannelAddressToString=i,t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:a}:{path:e}},t.endpointEqual=function(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(let r=0;r<e.addresses.length;r++)if(!s(e.addresses[r],t.addresses[r]))return!1;return!0},t.endpointToString=function(e){return"["+e.addresses.map(i).join(", ")+"]"},t.endpointHasAddress=l;const n=r("net");function o(e){return"port"in e}function s(e,t){return!e&&!t||!(!e||!t)&&(o(e)?o(t)&&e.host===t.host&&e.port===t.port:!o(t)&&e.path===t.path)}function i(e){return o(e)?(0,n.isIPv6)(e.host)?"["+e.host+"]:"+e.port:e.host+":"+e.port:e.path}const a=443;function l(e,t){for(const r of e.addresses)if(s(r,t))return!0;return!1}function c(e,t){if(e.addresses.length!==t.addresses.length)return!1;for(const r of e.addresses){let e=!1;for(const n of t.addresses)if(s(r,n)){e=!0;break}if(!e)return!1}return!0}t.EndpointMap=class{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(e){for(const t of this.map)if(l(t.key,e))return t.value}deleteMissing(e){const t=[];for(const r of this.map){let n=!1;for(const t of e)c(t,r.key)&&(n=!0);n||(t.push(r.value),this.map.delete(r))}return t}get(e){for(const t of this.map)if(c(e,t.key))return t.value}set(e,t){for(const r of this.map)if(c(e,r.key))return void(r.value=t);this.map.add({key:e,value:t})}delete(e){for(const t of this.map)if(c(e,t.key))return void this.map.delete(t)}has(e){for(const t of this.map)if(c(e,t.key))return!0;return!1}clear(){this.map.clear()}*keys(){for(const e of this.map)yield e.key}*values(){for(const e of this.map)yield e.value}*entries(){for(const e of this.map)yield[e.key,e.value]}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-call.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;const n=r("http2"),o=r("os"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/metadata.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/stream-decoder.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js");function u(e){const t=`Received HTTP status code ${e}`;let r;switch(e){case 400:r=s.Status.INTERNAL;break;case 401:r=s.Status.UNAUTHENTICATED;break;case 403:r=s.Status.PERMISSION_DENIED;break;case 404:r=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:r=s.Status.UNAVAILABLE;break;default:r=s.Status.UNKNOWN}return{code:r,details:t,metadata:new i.Metadata}}t.Http2SubchannelCall=class{constructor(e,t,r,l,c){var p;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=l,this.callId=c,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.finalStatus=null,this.internalError=null,this.serverEndedCall=!1,this.connectionDropped=!1;const d=null!==(p=l.getOptions()["grpc.max_receive_message_length"])&&void 0!==p?p:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new a.StreamDecoder(d),e.on("response",((e,t)=>{let r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";if(this.trace("Received server headers:\n"+r),this.httpStatusCode=e[":status"],t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=i.Metadata.fromHttp2Headers(e)}catch(e){return void this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new i.Metadata})}this.listener.onReceiveMetadata(t)}})),e.on("trailers",(e=>{this.handleTrailers(e)})),e.on("data",(e=>{if(this.statusOutput)return;let t;this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){if(void 0!==this.httpStatusCode&&200!==this.httpStatusCode){const e=u(this.httpStatusCode);this.cancelWithStatus(e.code,e.details)}else this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(const e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)})),e.on("end",(()=>{this.readsClosed=!0,this.maybeOutputStatus()})),e.on("close",(()=>{this.serverEndedCall=!0,process.nextTick((()=>{var t;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let r,o="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;if(this.httpStatusCode&&200!==this.httpStatusCode){const e=u(this.httpStatusCode);r=e.code,o=e.details}else r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,o="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:this.connectionDropped?(r=s.Status.UNAVAILABLE,o="Connection dropped"):(r=s.Status.CANCELLED,o="Call cancelled");break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,o="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,o="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?o=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,o=this.internalError.message):o=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:o,metadata:new i.Metadata,rstCode:e.rstCode})}))})),e.on("error",(e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+function(e){for(const[t,r]of Object.entries(o.constants.errno))if(r===e)return t;return"Unknown system error "+e}(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)}))}getDeadlineInfo(){return[`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=!0,setImmediate((()=>{this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new i.Metadata})}))}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick((()=>{this.listener.onReceiveStatus(this.finalStatus)})),this.http2Stream.resume())}trace(e){l.trace(c.LogVerbosity.DEBUG,"subchannel_call","["+this.callId+"] "+e)}endCall(e){null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK||(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==s.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick((()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())}))}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.serverEndedCall=!0,this.callEventTracker.onStreamEnd(!0);let t,r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=i.Metadata.fromHttp2Headers(e)}catch(e){t=new i.Metadata}const n=t.getMap();let o;if("string"==typeof n["grpc-status"]){const e=Number(n["grpc-status"]);this.trace("received status code "+e+" from server"),t.remove("grpc-status");let r="";if("string"==typeof n["grpc-message"]){try{r=decodeURI(n["grpc-message"])}catch(e){r=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+r+'" from server')}o={code:e,details:r,metadata:t}}else this.httpStatusCode?(o=u(this.httpStatusCode),o.metadata=t):o={code:s.Status.UNKNOWN,details:"No status information received",metadata:t};this.endCall(o)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed)if(this.serverEndedCall)this.http2Stream.end();else{let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new i.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK)return this.readsClosed=!0,void this.maybeOutputStatus();if(this.canPush=!0,this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();this.push(e)}else this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r=t=>{process.nextTick((()=>{var r;let n=s.Status.UNAVAILABLE;"ERR_STREAM_WRITE_AFTER_END"===(null==t?void 0:t.code)&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)}))};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new i.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-interface.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0,t.BaseSubchannelWrapper=class{constructor(e){this.child=e,this.healthy=!0,this.healthListeners=new Set,e.addHealthStateWatcher((e=>{this.healthy&&this.updateHealthListeners()}))}updateHealthListeners(){for(const e of this.healthListeners)e(this.isHealthy())}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e)}removeHealthStateWatcher(e){this.healthListeners.delete(e)}setHealthy(e){e!==this.healthy&&(this.healthy=e,this.child.isHealthy()&&this.updateHealthListeners())}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-pool.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubchannelPool=void 0,t.getSubchannelPool=function(e){return e?c:new l};const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channel-options.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/transport.js");class l{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(const t in this.pool){const r=this.pool[t].filter((e=>!e.subchannel.unrefIfOneRef()));r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval((()=>{this.unrefUnusedSubchannels()}),1e4),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();const c=(0,i.uriToString)(e);if(c in this.pool){const e=this.pool[c];for(const o of e)if((0,s.subchannelAddressEqual)(t,o.subchannelAddress)&&(0,n.channelOptionsEqual)(r,o.channelArguments)&&l._equals(o.channelCredentials))return o.subchannel}const u=new o.Subchannel(e,t,r,l,new a.Http2SubchannelConnector(e));return c in this.pool||(this.pool[c]=[]),this.pool[c].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:u}),u.ref(),u}}t.SubchannelPool=l;const c=new l},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/connectivity-state.js"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/backoff-timeout.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js");t.Subchannel=class{constructor(e,t,r,s,i){var a;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.connector=i,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0;const u={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new o.BackoffTimeout((()=>{this.handleBackoffTimer()}),u),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!==(a=r["grpc.keepalive_time_ms"])&&void 0!==a?a:-1,0===r["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.channelzTrace=new c.ChannelzTraceStub,this.callTracker=new c.ChannelzCallTrackerStub,this.childrenTracker=new c.ChannelzChildrenTrackerStub,this.streamTracker=new c.ChannelzCallTrackerStub):(this.channelzTrace=new c.ChannelzTrace,this.callTracker=new c.ChannelzCallTracker,this.childrenTracker=new c.ChannelzChildrenTracker,this.streamTracker=new c.ChannelzCallTracker),this.channelzRef=(0,c.registerChannelzSubchannel)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2)),this.secureConnector=s._createSecureConnector(e,r)}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,2147483647);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then((e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener((e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(i.LogVerbosity.ERROR,`Connection to ${(0,a.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))}))):e.shutdown()}),(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)}))}transitionToState(e,t,r){var o,s;if(-1===e.indexOf(this.connectivityState))return!1;r?this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]+' with error "'+r+'"'):this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);const i=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(o=this.transport)||void 0===o||o.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick((()=>{this.handleBackoffTimer()}));break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(s=this.transport)||void 0===s||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of this.stateListeners)e(this,i,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzTrace.addTrace("CT_INFO","Shutting down"),(0,c.unregisterChannelzRef)(this.channelzRef),this.secureConnector.destroy(),process.nextTick((()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)})))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let o;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),o={onCallEnd:e=>{e.code===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):o={},this.transport.createCall(e,t,r,n,o)}startConnecting(){process.nextTick((()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState===n.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)}))}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick((()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)}))}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return!0}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}getCallCredentials(){return this.secureConnector.getCallCredentials()}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/tls-helpers.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CIPHER_SUITES=void 0,t.getDefaultRootsData=function(){return o?(null===s&&(s=n.readFileSync(o)),s):null};const n=r("fs");t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const o=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let s=null},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/transport.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;const n=r("http2"),o=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/channelz.js"),s=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/constants.js"),i=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/http_proxy.js"),a=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/logging.js"),l=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/resolver.js"),c=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-address.js"),u=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js"),p=r("net"),d=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/subchannel-call.js"),m=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/call-number.js"),h="transport",g=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/package.json").rE,{HTTP2_HEADER_AUTHORITY:f,HTTP2_HEADER_CONTENT_TYPE:y,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:v,HTTP2_HEADER_TE:_,HTTP2_HEADER_USER_AGENT:S}=n.constants,T=Buffer.from("too_many_pings","ascii");class x{constructor(e,t,r,s){this.session=e,this.options=r,this.remoteName=s,this.keepaliveTimer=null,this.pendingSendKeepalivePing=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,c.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]?(this.channelzEnabled=!1,this.streamTracker=new o.ChannelzCallTrackerStub):this.streamTracker=new o.ChannelzCallTracker,this.channelzRef=(0,o.registerChannelzSocket)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${g}`,r["grpc.secondary_user_agent"]].filter((e=>e)).join(" "),this.keepaliveTimeMs="grpc.keepalive_time_ms"in r?r["grpc.keepalive_time_ms"]:-1,this.keepaliveTimeoutMs="grpc.keepalive_timeout_ms"in r?r["grpc.keepalive_timeout_ms"]:2e4,this.keepaliveWithoutCalls="grpc.keepalive_permit_without_calls"in r&&1===r["grpc.keepalive_permit_without_calls"],e.once("close",(()=>{this.trace("session closed"),this.handleDisconnect()})),e.once("goaway",((e,t,r)=>{let o=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(T)&&(o=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(o)})),e.once("error",(e=>{this.trace("connection closed with error "+e.message),this.handleDisconnect()})),e.socket.once("close",(e=>{this.trace("connection closed. hadError="+e),this.handleDisconnect()})),a.isTracerEnabled(h)&&(e.on("remoteSettings",(t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),e.on("localSettings",(t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}))),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;const n=this.session.socket,o=n.remoteAddress?(0,c.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,s=n.localAddress?(0,c.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let i;if(this.session.encrypted){const t=n,r=t.getCipher(),o=t.getCertificate(),s=t.getPeerCertificate();i={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:o&&"raw"in o?o.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:s,security:i,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){a.trace(s.LogVerbosity.DEBUG,h,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){a.trace(s.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){a.trace(s.LogVerbosity.DEBUG,"transport_flowctrl","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){a.trace(s.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach((t=>t(e))))}handleDisconnect(){this.clearKeepaliveTimeout(),this.reportDisconnectToOwner(!1);for(const e of this.activeCalls)e.onDisconnect();setImmediate((()=>{this.session.destroy()}))}addDisconnectListener(e){this.disconnectListeners.push(e)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(!this.canSendPing())return void(this.pendingSendKeepalivePing=!0);if(this.keepaliveTimer)return void console.error("keepaliveTimeout is not null");this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimer=setTimeout((()=>{this.keepaliveTimer=null,this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()}),this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e);let r="";try{this.session.ping(((e,t,r)=>{this.clearKeepaliveTimeout(),e?(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()):(this.keepaliveTrace("Received ping response"),this.maybeStartKeepalivePingTimer())}))||(r="Ping returned false")}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}r&&(this.keepaliveTrace("Ping send failed: "+r),this.handleDisconnect())}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimer||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimer=setTimeout((()=>{this.keepaliveTimer=null,this.maybeSendPing()}),this.keepaliveTimeMs),null===(t=(e=this.keepaliveTimer).unref)||void 0===t||t.call(e)))}clearKeepaliveTimeout(){this.keepaliveTimer&&(clearTimeout(this.keepaliveTimer),this.keepaliveTimer=null)}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,o){const s=e.toHttp2Headers();let i,a,l;s[f]=t,s[S]=this.userAgent,s[y]="application/grpc",s[b]="POST",s[v]=r,s[_]="trailers";try{i=this.session.request(s)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(l)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}}):a={addMessageSent:()=>{var e;null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(l)},onStreamEnd:e=>{var t;null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}},l=new d.Http2SubchannelCall(i,a,n,this,(0,m.getNextCallNumber)()),this.addActiveCall(l),l}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,o.unregisterChannelzRef)(this.channelzRef)}}t.Http2SubchannelConnector=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){a.trace(s.LogVerbosity.DEBUG,h,(0,u.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r){return this.isShutdown?Promise.reject():e.socket.closed?Promise.reject("Connection closed before starting HTTP/2 handshake"):new Promise(((o,s)=>{let i=null,a=this.channelTarget;if("grpc.http_connect_target"in r){const e=(0,u.parseUri)(r["grpc.http_connect_target"]);e&&(a=e,i=(0,u.uriToString)(e))}const c=e.secure?"https":"http",p=(0,l.getDefaultAuthority)(a),d=()=>{var e;null===(e=this.session)||void 0===e||e.destroy(),this.session=null,setImmediate((()=>{y||(y=!0,s(`${f.trim()} (${(new Date).toISOString()})`))}))},m=e=>{var t;null===(t=this.session)||void 0===t||t.destroy(),f=e.message,this.trace("connection failed with error "+f),y||(y=!0,s(`${f} (${(new Date).toISOString()})`))},h={createConnection:(t,r)=>e.socket};void 0!==r["grpc-node.flow_control_window"]&&(h.settings={initialWindowSize:r["grpc-node.flow_control_window"]});const g=n.connect(`${c}://${p}`,h);this.session=g;let f="Failed to connect",y=!1;g.unref(),g.once("remoteSettings",(()=>{g.removeAllListeners(),e.socket.removeListener("close",d),e.socket.removeListener("error",m),o(new x(g,t,r,i)),this.session=null})),g.once("close",d),g.once("error",m),e.socket.once("close",d),e.socket.once("error",m)}))}tcpConnect(e,t){return(0,i.getProxiedConnection)(e,t).then((t=>t||new Promise(((t,r)=>{const n=()=>{r(new Error("Socket closed"))},o=e=>{r(e)},s=p.connect(e,(()=>{s.removeListener("close",n),s.removeListener("error",o),t(s)}));s.once("close",n),s.once("error",o)}))))}async connect(e,t,r){if(this.isShutdown)return Promise.reject();let n=null,o=null;const s=(0,c.subchannelAddressToString)(e);try{return this.trace(s+" Waiting for secureConnector to be ready"),await t.waitForReady(),this.trace(s+" secureConnector is ready"),n=await this.tcpConnect(e,r),n.setNoDelay(),this.trace(s+" Established TCP connection"),o=await t.connect(n),this.trace(s+" Established secure connection"),this.createSession(o,e,r)}catch(e){throw null==n||n.destroy(),null==o||o.socket.destroy(),e}}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/uri-parser.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUri=function(e){const t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}},t.splitHostPort=function(e){if(e.startsWith("[")){const t=e.indexOf("]");if(-1===t)return null;const r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(e.length>t+1){if(":"===e[t+1]){const o=e.substring(t+2);return n.test(o)?{host:r,port:+o}:null}return null}return{host:r}}{const t=e.split(":");return 2===t.length?n.test(t[1])?{host:t[0],port:+t[1]}:null:{host:e}}},t.combineHostPort=function(e){return void 0===e.port?e.host:e.host.includes(":")?`[${e.host}]:${e.port}`:`${e.host}:${e.port}`},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path,t};const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/,n=/^\d+$/},"../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/package.json":e=>{e.exports={rE:"1.13.3"}},"../../node_modules/.pnpm/@grpc+proto-loader@0.7.13/node_modules/@grpc/proto-loader/build/src/index.js":(e,t,r)=>{t.Yi=t.Ib=void 0;const n=r("../../node_modules/.pnpm/lodash.camelcase@4.3.0/node_modules/lodash.camelcase/index.js"),o=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/index.js"),s=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/ext/descriptor/index.js"),i=r("../../node_modules/.pnpm/@grpc+proto-loader@0.7.13/node_modules/@grpc/proto-loader/build/src/util.js");var a;r("../../node_modules/.pnpm/long@5.3.1/node_modules/long/umd/index.js"),function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(a=t.Ib||(t.Ib={}));const l={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){const r=(n=t,s=e.name,""===n?s:n+"."+s);var n,s;return function(e){return e instanceof o.Service||e instanceof o.Type||e instanceof o.Enum}(e)?[[r,e]]:function(e){return e instanceof o.Namespace||e instanceof o.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map((t=>c(e.nested[t],r))).reduce(((e,t)=>e.concat(t)),[]):[]}function u(e,t){return function(r){return e.toObject(e.decode(r),t)}}function p(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const r=e.fromObject(t);return e.encode(r).finish()}}function d(e){return(e||[]).reduce(((e,t)=>{for(const[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e}),{deprecated:!1,idempotency_level:a.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function m(e,t,r,o){const s=e.resolvedRequestType,i=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:p(s),requestDeserialize:u(s,r),responseSerialize:p(i),responseDeserialize:u(i,r),originalName:n(e.name),requestType:h(s,o),responseType:h(i,o),options:d(e.parsedOptions)}}function h(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function g(e,t,r,n){if(e instanceof o.Service)return function(e,t,r,n){const o={};for(const s of e.methodsArray)o[s.name]=m(s,t,r,n);return o}(e,t,r,n);if(e instanceof o.Type)return h(e,n);if(e instanceof o.Enum)return function(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}(e,n);throw new Error("Type mismatch in reflection object handling")}function f(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file.map((e=>Buffer.from(s.FileDescriptorProto.encode(e).finish())));for(const[o,s]of c(e,""))r[o]=g(s,o,t,n);return r}t.Yi=function(e,t){return f((0,i.loadProtosWithOptionsSync)(e,t),t)},(0,i.addCommonProtos)()},"../../node_modules/.pnpm/@grpc+proto-loader@0.7.13/node_modules/@grpc/proto-loader/build/src/util.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r("fs"),o=r("path"),s=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/index.js");function i(e,t){const r=e.resolvePath;e.resolvePath=(e,s)=>{if(o.isAbsolute(s))return s;for(const e of t){const t=o.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}t.loadProtosWithOptions=async function(e,t){const r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));i(r,t.includeDirs)}const n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){const r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");i(r,t.includeDirs)}const n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){const e=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/google/protobuf/api.json"),t=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/google/protobuf/descriptor.json"),n=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/google/protobuf/source_context.json"),o=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/google/protobuf/type.json");s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",o.nested.google.nested.protobuf.nested)}},"../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-grpc/build/src/OTLPLogExporter.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPLogExporter=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index.js");class i extends s.OTLPExporterBase{constructor(e={}){super((0,n.createOtlpGrpcExportDelegate)((0,n.convertLegacyOtlpGrpcOptions)(e,"LOGS"),o.ProtobufLogsSerializer,"LogsExportService","/opentelemetry.proto.collector.logs.v1.LogsService/Export"))}}t.OTLPLogExporter=i},"../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-grpc/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPLogExporter=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-grpc/build/src/OTLPLogExporter.js");Object.defineProperty(t,"OTLPLogExporter",{enumerable:!0,get:function(){return n.OTLPLogExporter}})},"../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-http/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{OTLPLogExporter:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/json/logs.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");class a extends n.S{constructor(e={}){super((0,s.l)((0,i.P)(e,"LOGS","v1/logs",{"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0","Content-Type":"application/json"}),o.G))}}},"../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-proto/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{OTLPLogExporter:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/protobuf/logs.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");class a extends n.S{constructor(e={}){super((0,s.l)((0,i.P)(e,"LOGS","v1/logs",{"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0","Content-Type":"application/x-protobuf"}),o.x))}}},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-grpc/build/src/OTLPMetricExporter.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPMetricExporter=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/index.js");class i extends n.OTLPMetricExporterBase{constructor(e){super((0,o.createOtlpGrpcExportDelegate)((0,o.convertLegacyOtlpGrpcOptions)(e??{},"METRICS"),s.ProtobufMetricsSerializer,"MetricsExportService","/opentelemetry.proto.collector.metrics.v1.MetricsService/Export"),e)}}t.OTLPMetricExporter=i},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-grpc/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPMetricExporter=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-grpc/build/src/OTLPMetricExporter.js");Object.defineProperty(t,"OTLPMetricExporter",{enumerable:!0,get:function(){return n.OTLPMetricExporter}})},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterBase.js":(e,t,r)=>{r.d(t,{IP:()=>p,R8:()=>d,nj:()=>u,sG:()=>h});var n=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/environment.js"),o=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/AggregationTemporality.js"),s=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/MetricData.js"),i=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/view/AggregationOption.js"),a=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterOptions.js"),l=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),c=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");const u=()=>o.h.CUMULATIVE,p=e=>{switch(e){case s.O.COUNTER:case s.O.OBSERVABLE_COUNTER:case s.O.GAUGE:case s.O.HISTOGRAM:case s.O.OBSERVABLE_GAUGE:return o.h.DELTA;case s.O.UP_DOWN_COUNTER:case s.O.OBSERVABLE_UP_DOWN_COUNTER:return o.h.CUMULATIVE}},d=e=>{switch(e){case s.O.COUNTER:case s.O.HISTOGRAM:return o.h.DELTA;case s.O.GAUGE:case s.O.UP_DOWN_COUNTER:case s.O.OBSERVABLE_UP_DOWN_COUNTER:case s.O.OBSERVABLE_COUNTER:case s.O.OBSERVABLE_GAUGE:return o.h.CUMULATIVE}};const m=Object.freeze({type:i.D.DEFAULT});class h extends l.S{_aggregationTemporalitySelector;_aggregationSelector;constructor(e,t){var r;super(e),this._aggregationSelector=function(e){return e?.aggregationPreference??(()=>m)}(t),this._aggregationTemporalitySelector=(r=t?.temporalityPreference,null!=r?r===a.I.DELTA?p:r===a.I.LOWMEMORY?d:u:function(){const e=((0,n.HF)("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE")??"cumulative").toLowerCase();return"cumulative"===e?u:"delta"===e?p:"lowmemory"===e?d:(c.s.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${e}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),u)}())}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}}},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterOptions.js":(e,t,r)=>{var n;r.d(t,{I:()=>n}),function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE",e[e.LOWMEMORY=2]="LOWMEMORY"}(n||(n={}))},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{AggregationTemporalityPreference:()=>c.I,CumulativeTemporalitySelector:()=>n.nj,DeltaTemporalitySelector:()=>n.IP,LowMemoryTemporalitySelector:()=>n.R8,OTLPMetricExporter:()=>l,OTLPMetricExporterBase:()=>n.sG});var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/json/metrics.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");const a={"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0"};class l extends n.sG{constructor(e){super((0,s.l)((0,i.P)(e??{},"METRICS","v1/metrics",{...a,"Content-Type":"application/json"}),o.K),e)}}var c=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterOptions.js")},"../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-proto/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{OTLPMetricExporter:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/OTLPMetricExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/protobuf/metrics.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");class a extends n.sG{constructor(e){super((0,s.l)((0,i.P)(e??{},"METRICS","v1/metrics",{"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0","Content-Type":"application/x-protobuf"}),o.D),e)}}},"../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/PrometheusExporter.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrometheusExporter=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/index.js"),i=r("http"),a=r("../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/PrometheusSerializer.js"),l=r("url");class c extends s.MetricReader{static DEFAULT_OPTIONS={host:void 0,port:9464,endpoint:"/metrics",prefix:"",appendTimestamp:!1,withResourceConstantLabels:void 0};_host;_port;_baseUrl;_endpoint;_server;_prefix;_appendTimestamp;_serializer;_startServerPromise;constructor(e={},t=()=>{}){super({aggregationSelector:e=>({type:s.AggregationType.DEFAULT}),aggregationTemporalitySelector:e=>s.AggregationTemporality.CUMULATIVE,metricProducers:e.metricProducers}),this._host=e.host||process.env.OTEL_EXPORTER_PROMETHEUS_HOST||c.DEFAULT_OPTIONS.host,this._port=e.port||Number(process.env.OTEL_EXPORTER_PROMETHEUS_PORT)||c.DEFAULT_OPTIONS.port,this._prefix=e.prefix||c.DEFAULT_OPTIONS.prefix,this._appendTimestamp="boolean"==typeof e.appendTimestamp?e.appendTimestamp:c.DEFAULT_OPTIONS.appendTimestamp;const r=e.withResourceConstantLabels||c.DEFAULT_OPTIONS.withResourceConstantLabels;this._server=(0,i.createServer)(this._requestHandler).unref(),this._serializer=new a.PrometheusSerializer(this._prefix,this._appendTimestamp,r),this._baseUrl=`http://${this._host}:${this._port}/`,this._endpoint=(e.endpoint||c.DEFAULT_OPTIONS.endpoint).replace(/^([^/])/,"/$1"),!0!==e.preventServerStart?this.startServer().then(t,(e=>{n.diag.error(e),t(e)})):t&&queueMicrotask(t)}async onForceFlush(){}onShutdown(){return this.stopServer()}stopServer(){return this._server?new Promise((e=>{this._server.close((t=>{t?"ERR_SERVER_NOT_RUNNING"!==t.code&&(0,o.globalErrorHandler)(t):n.diag.debug("Prometheus exporter was stopped"),e()}))})):(n.diag.debug("Prometheus stopServer() was called but server was never started."),Promise.resolve())}startServer(){return this._startServerPromise??=new Promise(((e,t)=>{this._server.once("error",t),this._server.listen({port:this._port,host:this._host},(()=>{n.diag.debug(`Prometheus exporter server started: ${this._host}:${this._port}/${this._endpoint}`),e()}))})),this._startServerPromise}getMetricsRequestHandler(e,t){this._exportMetrics(t)}_requestHandler=(e,t)=>{null!=e.url&&new l.URL(e.url,this._baseUrl).pathname===this._endpoint?this._exportMetrics(t):this._notFound(t)};_exportMetrics=e=>{e.statusCode=200,e.setHeader("content-type","text/plain"),this.collect().then((t=>{const{resourceMetrics:r,errors:o}=t;o.length&&n.diag.error("PrometheusExporter: metrics collection errors",...o),e.end(this._serializer.serialize(r))}),(t=>{e.end(`# failed to export metrics: ${t}`)}))};_notFound=e=>{e.statusCode=404,e.end()}}t.PrometheusExporter=c},"../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/PrometheusSerializer.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrometheusSerializer=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js");function i(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}function a(e=""){return"string"!=typeof e&&(e=JSON.stringify(e)),i(e).replace(/"/g,'\\"')}const l=/[^a-z0-9_]/gi,c=/_{2,}/g;function u(e){return e.replace(l,"_").replace(c,"_")}function p(e,t){return!e.endsWith("_total")&&t.dataPointType===o.DataPointType.SUM&&t.isMonotonic&&(e+="_total"),e}function d(e,t,r,n,o){let s=!1,i="";for(const[e,r]of Object.entries(t)){const t=u(e);s=!0,i+=`${i.length>0?",":""}${t}="${a(r)}"`}if(o)for(const[e,t]of Object.entries(o)){const r=u(e);s=!0,i+=`${i.length>0?",":""}${r}="${a(t)}"`}return s&&(e+=`{${i}}`),`${e} ${function(e){return e===1/0?"+Inf":e===-1/0?"-Inf":`${e}`}(r)}${void 0!==n?" "+String(n):""}\n`}t.PrometheusSerializer=class{_prefix;_appendTimestamp;_additionalAttributes;_withResourceConstantLabels;constructor(e,t=!1,r){e&&(this._prefix=e+"_"),this._appendTimestamp=t,this._withResourceConstantLabels=r}serialize(e){let t="";this._additionalAttributes=this._filterResourceConstantLabels(e.resource.attributes,this._withResourceConstantLabels);for(const r of e.scopeMetrics)t+=this._serializeScopeMetrics(r);return""===t&&(t+="# no registered metrics"),this._serializeResource(e.resource)+t}_filterResourceConstantLabels(e,t){if(t){const r={};for(const[n,o]of Object.entries(e))n.match(t)&&(r[n]=o);return r}}_serializeScopeMetrics(e){let t="";for(const r of e.metrics)t+=this._serializeMetricData(r)+"\n";return t}_serializeMetricData(e){let t=u(i(e.descriptor.name));this._prefix&&(t=`${this._prefix}${t}`);const r=e.dataPointType;t=p(t,e);const s=`# HELP ${t} ${i(e.descriptor.description||"description missing")}`,a=e.descriptor.unit?`\n# UNIT ${t} ${i(e.descriptor.unit)}`:"",l=`# TYPE ${t} ${function(e){switch(e.dataPointType){case o.DataPointType.SUM:return e.isMonotonic?"counter":"gauge";case o.DataPointType.GAUGE:return"gauge";case o.DataPointType.HISTOGRAM:return"histogram";default:return"untyped"}}(e)}`;let c="";switch(r){case o.DataPointType.SUM:case o.DataPointType.GAUGE:c=e.dataPoints.map((r=>this._serializeSingularDataPoint(t,e,r))).join("");break;case o.DataPointType.HISTOGRAM:c=e.dataPoints.map((r=>this._serializeHistogramDataPoint(t,e,r))).join("");break;default:n.diag.error(`Unrecognizable DataPointType: ${r} for metric "${t}"`)}return`${s}${a}\n${l}\n${c}`.trim()}_serializeSingularDataPoint(e,t,r){let n="";e=p(e,t);const{value:o,attributes:i}=r,a=(0,s.hrTimeToMilliseconds)(r.endTime);return n+=d(e,i,o,this._appendTimestamp?a:void 0,this._additionalAttributes),n}_serializeHistogramDataPoint(e,t,r){let n="";e=p(e,t);const o=r.attributes,i=r.value,a=(0,s.hrTimeToMilliseconds)(r.endTime);for(const t of["count","sum"]){const r=i[t];null!=r&&(n+=d(e+"_"+t,o,r,this._appendTimestamp?a:void 0,this._additionalAttributes))}let l=0;const c=i.buckets.counts.entries();let u=!1;for(const[t,r]of c){l+=r;const s=i.buckets.boundaries[t];if(void 0===s&&u)break;s===1/0&&(u=!0),n+=d(e+"_bucket",o,l,this._appendTimestamp?a:void 0,Object.assign({},this._additionalAttributes??{},{le:void 0===s||s===1/0?"+Inf":String(s)}))}return n}_serializeResource(e){const t="target_info";return`# HELP ${t} Target metadata\n# TYPE ${t} gauge\n${d(t,e.attributes,1).trim()}\n`}}},"../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrometheusSerializer=t.PrometheusExporter=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/PrometheusExporter.js");Object.defineProperty(t,"PrometheusExporter",{enumerable:!0,get:function(){return n.PrometheusExporter}});var o=r("../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/PrometheusSerializer.js");Object.defineProperty(t,"PrometheusSerializer",{enumerable:!0,get:function(){return o.PrometheusSerializer}})},"../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-grpc/build/src/OTLPTraceExporter.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPTraceExporter=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index.js");class i extends s.OTLPExporterBase{constructor(e={}){super((0,n.createOtlpGrpcExportDelegate)((0,n.convertLegacyOtlpGrpcOptions)(e,"TRACES"),o.ProtobufTraceSerializer,"TraceExportService","/opentelemetry.proto.collector.trace.v1.TraceService/Export"))}}t.OTLPTraceExporter=i},"../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-grpc/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPTraceExporter=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-grpc/build/src/OTLPTraceExporter.js");Object.defineProperty(t,"OTLPTraceExporter",{enumerable:!0,get:function(){return n.OTLPTraceExporter}})},"../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-http/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{OTLPTraceExporter:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/json/trace.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");class a extends n.S{constructor(e={}){super((0,s.l)((0,i.P)(e,"TRACES","v1/traces",{"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0","Content-Type":"application/json"}),o.U))}}},"../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-proto/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{OTLPTraceExporter:()=>n.Q});var n=r("../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-proto/build/esm/platform/node/OTLPTraceExporter.js")},"../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-proto/build/esm/platform/node/OTLPTraceExporter.js":(e,t,r)=>{r.d(t,{Q:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/protobuf/trace.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js");class a extends n.S{constructor(e={}){super((0,s.l)((0,i.P)(e,"TRACES","v1/traces",{"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.203.0","Content-Type":"application/x-protobuf"}),o.n))}}},"../../node_modules/.pnpm/@opentelemetry+exporter-zipkin@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-zipkin/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{ZipkinExporter:()=>f,prepareSend:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js"),o=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/ExportResult.js"),s=r("http"),i=r("https");function a(e,t){const r=new URL(e),a=Object.assign({method:"POST",headers:{"Content-Type":"application/json",...t}});return function(e,t){if(0===e.length)return n.s.debug("Zipkin send with empty spans"),t({code:o.V.SUCCESS});const{request:l}="http:"===r.protocol?s:i,c=l(r,a,(e=>{let r="";e.on("data",(e=>{r+=e})),e.on("end",(()=>{const s=e.statusCode||0;return n.s.debug(`Zipkin response status code: ${s}, body: ${r}`),t(s<400?{code:o.V.SUCCESS}:{code:o.V.FAILED,error:new Error(`Got unexpected status code from zipkin: ${s}`)})}))}));c.on("error",(e=>t({code:o.V.FAILED,error:e})));const u=JSON.stringify(e);n.s.debug(`Zipkin request payload: ${u}`),c.write(u,"utf8"),c.end()}}var l,c=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/environment.js"),u=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/span_kind.js"),p=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/status.js"),d=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js");!function(e){e.CLIENT="CLIENT",e.SERVER="SERVER",e.CONSUMER="CONSUMER",e.PRODUCER="PRODUCER"}(l||(l={}));const m={[u.v.CLIENT]:l.CLIENT,[u.v.SERVER]:l.SERVER,[u.v.CONSUMER]:l.CONSUMER,[u.v.PRODUCER]:l.PRODUCER,[u.v.INTERNAL]:void 0};function h({attributes:e,resource:t,status:r,droppedAttributesCount:n,droppedEventsCount:o,droppedLinksCount:s},i,a){const l={};for(const t of Object.keys(e))l[t]=String(e[t]);return r.code!==p.s.UNSET&&(l[i]=String(p.s[r.code])),r.code===p.s.ERROR&&r.message&&(l[a]=r.message),n&&(l["otel.dropped_attributes_count"]=String(n)),o&&(l["otel.dropped_events_count"]=String(o)),s&&(l["otel.dropped_links_count"]=String(s)),Object.keys(t.attributes).forEach((e=>l[e]=String(t.attributes[e]))),l}var g=r("../../node_modules/.pnpm/@opentelemetry+semantic-conventions@1.36.0/node_modules/@opentelemetry/semantic-conventions/build/esm/stable_attributes.js");class f{DEFAULT_SERVICE_NAME="OpenTelemetry Service";_statusCodeTagName;_statusDescriptionTagName;_urlStr;_send;_getHeaders;_serviceName;_isShutdown;_sendingPromises=[];constructor(e={}){var t;this._urlStr=e.url||((0,c.HF)("OTEL_EXPORTER_ZIPKIN_ENDPOINT")??"http://localhost:9411/api/v2/spans"),this._send=a(this._urlStr,e.headers),this._serviceName=e.serviceName,this._statusCodeTagName=e.statusCodeTagName||"otel.status_code",this._statusDescriptionTagName=e.statusDescriptionTagName||"error",this._isShutdown=!1,"function"==typeof e.getExportRequestHeaders?this._getHeaders=(t=e.getExportRequestHeaders,function(){return t()}):this._beforeSend=function(){}}export(e,t){const r=String(this._serviceName||e[0].resource.attributes[g.UX]||this.DEFAULT_SERVICE_NAME);if(n.s.debug("Zipkin exporter export"),this._isShutdown)return void setTimeout((()=>t({code:o.V.FAILED,error:new Error("Exporter has been shutdown")})));const s=new Promise((n=>{this._sendSpans(e,r,(e=>{n(),t(e)}))}));this._sendingPromises.push(s);const i=()=>{const e=this._sendingPromises.indexOf(s);this._sendingPromises.splice(e,1)};s.then(i,i)}shutdown(){return n.s.debug("Zipkin exporter shutdown"),this._isShutdown=!0,this.forceFlush()}forceFlush(){return new Promise(((e,t)=>{Promise.all(this._sendingPromises).then((()=>{e()}),t)}))}_beforeSend(){this._getHeaders&&(this._send=a(this._urlStr,this._getHeaders()))}_sendSpans(e,t,r){const n=e.map((e=>function(e,t,r,n){var o;return{traceId:e.spanContext().traceId,parentId:e.parentSpanContext?.spanId,name:e.name,id:e.spanContext().spanId,kind:m[e.kind],timestamp:(0,d.w_)(e.startTime),duration:Math.round((0,d.w_)(e.duration)),localEndpoint:{serviceName:t},tags:h(e,r,n),annotations:e.events.length?(o=e.events,o.map((e=>({timestamp:Math.round((0,d.w_)(e.time)),value:e.name})))):void 0}}(e,String(e.attributes[g.UX]||e.resource.attributes[g.UX]||t),this._statusCodeTagName,this._statusDescriptionTagName)));return this._beforeSend(),this._send(n,(e=>{if(r)return r(e)}))}}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js":(e,t,r)=>{r.d(t,{S:()=>n});class n{_delegate;constructor(e){this._delegate=e}export(e,t){this._delegate.export(e,t)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/bounded-queue-export-promise-handler.js":(e,t,r)=>{r.d(t,{m:()=>o});class n{_concurrencyLimit;_sendingPromises=[];constructor(e){this._concurrencyLimit=e}pushPromise(e){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);const t=()=>{const t=this._sendingPromises.indexOf(e);this._sendingPromises.splice(t,1)};e.then(t,t)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function o(e){return new n(e.concurrencyLimit)}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js":(e,t,r)=>{r.d(t,{P:()=>m});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-configuration.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");function s(e,t,r){const n={...r()},o={};return()=>(null!=t&&Object.assign(o,t()),null!=e&&Object.assign(o,e()),Object.assign(o,n))}function i(e){if(null!=e)try{return new URL(e),e}catch{throw new Error(`Configuration: Could not parse user-provided export URL: '${e}'`)}}var a=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/baggage/utils.js"),l=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-env-configuration.js");function c(e){const t=process.env[`OTEL_EXPORTER_OTLP_${e}_HEADERS`]?.trim(),r=process.env.OTEL_EXPORTER_OTLP_HEADERS?.trim(),n=(0,a.hD)(t),o=(0,a.hD)(r);if(0!==Object.keys(n).length||0!==Object.keys(o).length)return Object.assign({},(0,a.hD)(r),(0,a.hD)(t))}function u(e){const t=process.env.OTEL_EXPORTER_OTLP_ENDPOINT?.trim();if(null!=t&&""!==t)return function(e,t){try{new URL(e)}catch{return void o.s.warn(`Configuration: Could not parse environment-provided export URL: '${e}', falling back to undefined`)}e.endsWith("/")||(e+="/"),e+=t;try{new URL(e)}catch{return void o.s.warn(`Configuration: Provided URL appended with '${t}' is not a valid URL, using 'undefined' instead of '${e}'`)}return e}(t,e)}function p(e){const t=process.env[`OTEL_EXPORTER_OTLP_${e}_ENDPOINT`]?.trim();if(null!=t&&""!==t)return function(e){try{return new URL(e).toString()}catch{return void o.s.warn(`Configuration: Could not parse environment-provided export URL: '${e}', falling back to undefined`)}}(t)}function d(e){return null!=e?.keepAlive&&(null!=e.httpAgentOptions?null==e.httpAgentOptions.keepAlive&&(e.httpAgentOptions.keepAlive=e.keepAlive):e.httpAgentOptions={keepAlive:e.keepAlive}),e.httpAgentOptions}function m(e,t,r,a){return e.metadata&&o.s.warn("Metadata cannot be set when using http"),m={url:e.url,headers:(0,n.im)(e.headers),concurrencyLimit:e.concurrencyLimit,timeoutMillis:e.timeoutMillis,compression:e.compression,agentOptions:d(e)},h=function(e,t){return{...(0,l.V)(e),url:p(e)??u(t),headers:(0,n.im)(c(e))}}(t,r),g=function(e,t){return{...(0,n.s8)(),headers:()=>e,url:"http://localhost:4318/"+t,agentOptions:{keepAlive:!0}}}(a,r),{...(0,n.Zx)(m,h,g),headers:s((f=m.headers,()=>{const e={};return Object.entries(f?.()??{}).forEach((([t,r])=>{void 0!==r?e[t]=String(r):o.s.warn(`Header "${t}" has invalid value (${r}) and will be ignored`)})),e}),h.headers,g.headers),url:i(m.url)??h.url??g.url,agentOptions:m.agentOptions??h.agentOptions??g.agentOptions};var m,h,g,f}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-configuration.js":(e,t,r)=>{function n(e){if(Number.isFinite(e)&&e>0)return e;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${e}')`)}function o(e){if(null!=e)return()=>e}function s(e,t,r){return{timeoutMillis:n(e.timeoutMillis??t.timeoutMillis??r.timeoutMillis),concurrencyLimit:e.concurrencyLimit??t.concurrencyLimit??r.concurrencyLimit,compression:e.compression??t.compression??r.compression}}function i(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}r.d(t,{Zx:()=>s,im:()=>o,s8:()=>i})},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-env-configuration.js":(e,t,r)=>{r.d(t,{V:()=>l});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");function o(e){const t=process.env[e]?.trim();if(null!=t&&""!==t){const r=Number(t);if(Number.isFinite(r)&&r>0)return r;n.s.warn(`Configuration: ${e} is invalid, expected number greater than 0 (actual: ${t})`)}}function s(e){const t=o(`OTEL_EXPORTER_OTLP_${e}_TIMEOUT`),r=o("OTEL_EXPORTER_OTLP_TIMEOUT");return t??r}function i(e){const t=process.env[e]?.trim();if(""!==t)return null==t||"none"===t||"gzip"===t?t:void n.s.warn(`Configuration: ${e} is invalid, expected 'none' or 'gzip' (actual: '${t}')`)}function a(e){const t=i(`OTEL_EXPORTER_OTLP_${e}_COMPRESSION`),r=i("OTEL_EXPORTER_OTLP_COMPRESSION");return t??r}function l(e){return{timeoutMillis:s(e),compression:a(e)}}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index-node-http.js":(e,t,r)=>{r.r(t),r.d(t,{convertLegacyHttpOptions:()=>s.P,createOtlpHttpExportDelegate:()=>n.l,getSharedConfigurationFromEnvironment:()=>o.V});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-env-configuration.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/convert-legacy-node-http-options.js")},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{CompressionAlgorithm:()=>n,OTLPExporterBase:()=>o.S,OTLPExporterError:()=>s.N,createOtlpNetworkExportDelegate:()=>c,getSharedConfigurationDefaults:()=>i.s8,mergeOtlpSharedConfigurationWithDefaults:()=>i.Zx});var n,o=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/OTLPExporterBase.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/types.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/configuration/shared-configuration.js");!function(e){e.NONE="none",e.GZIP="gzip"}(n||(n={}));var a=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/bounded-queue-export-promise-handler.js"),l=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-export-delegate.js");function c(e,t,r){return(0,l.f)({transport:r,serializer:t,promiseHandler:(0,a.m)(e)},{timeout:e.timeoutMillis})}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-export-delegate.js":(e,t,r)=>{r.d(t,{f:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/ExportResult.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/types.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");class i{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(e,t,r,n,o){this._transport=e,this._serializer=t,this._responseHandler=r,this._promiseQueue=n,this._timeout=o,this._diagLogger=s.s.createComponentLogger({namespace:"OTLPExportDelegate"})}export(e,t){if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit())return void t({code:n.V.FAILED,error:new Error("Concurrent export limit reached")});const r=this._serializer.serializeRequest(e);null!=r?this._promiseQueue.pushPromise(this._transport.send(r,this._timeout).then((e=>{if("success"!==e.status)"failure"===e.status&&e.error?t({code:n.V.FAILED,error:e.error}):"retryable"===e.status?t({code:n.V.FAILED,error:new o.N("Export failed with retryable status")}):t({code:n.V.FAILED,error:new o.N("Export failed with unknown error")});else{if(null!=e.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(e.data))}catch(t){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",t,e.data)}t({code:n.V.SUCCESS})}}),(e=>t({code:n.V.FAILED,error:e})))):t({code:n.V.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function a(e,t){return new i(e.transport,e.serializer,{handleResponse(e){null!=e&&function(e){return Object.prototype.hasOwnProperty.call(e,"partialSuccess")}(e)&&null!=e.partialSuccess&&0!==Object.keys(e.partialSuccess).length&&s.s.warn("Received Partial Success response:",JSON.stringify(e.partialSuccess))}},e.promiseHandler,t.timeout)}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-http-export-delegate.js":(e,t,r)=>{r.d(t,{l:()=>l});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/otlp-export-delegate.js");class o{_parameters;_utils=null;constructor(e){this._parameters=e}async send(e,t){const{agent:r,send:n}=this._loadUtils();return new Promise((o=>{n(this._parameters,r,e,(e=>{o(e)}),t)}))}shutdown(){}_loadUtils(){let e=this._utils;if(null===e){const{sendWithHttp:t,createHttpAgent:n}=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/transport/http-transport-utils.js");e=this._utils={agent:n(this._parameters.url,this._parameters.agentOptions),send:t}}return e}}var s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/bounded-queue-export-promise-handler.js");class i{_transport;constructor(e){this._transport=e}retry(e,t,r){return new Promise(((n,o)=>{setTimeout((()=>{this._transport.send(e,t).then(n,o)}),r)}))}async send(e,t){const r=Date.now()+t;let n=await this._transport.send(e,t),o=5,s=1e3;for(;"retryable"===n.status&&o>0;){o--;const t=Math.max(Math.min(s,5e3)+(.4*Math.random()-.2),0);s*=1.5;const i=n.retryInMillis??t,a=r-Date.now();if(i>a)return n;n=await this.retry(e,a,i)}return n}shutdown(){return this._transport.shutdown()}}function a(e){return new i(e.transport)}function l(e,t){return(0,n.f)({transport:a({transport:(r=e,new o(r))}),serializer:t,promiseHandler:(0,s.m)(e)},{timeout:e.timeoutMillis});var r}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/transport/http-transport-utils.js":(e,t,r)=>{r.r(t),r.d(t,{compressAndSend:()=>u,createHttpAgent:()=>p,sendWithHttp:()=>c});var n=r("http"),o=r("https"),s=r("zlib"),i=r("stream");function a(e){if(null==e)return;const t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;const r=new Date(e).getTime()-Date.now();return r>=0?r:0}var l=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/types.js");function c(e,t,r,s,i){const c=new URL(e.url),p={hostname:c.hostname,port:c.port,path:c.pathname,method:"POST",headers:{...e.headers()},agent:t},d=("http:"===c.protocol?n.request:o.request)(p,(e=>{const t=[];e.on("data",(e=>t.push(e))),e.on("end",(()=>{if(e.statusCode&&e.statusCode<299)s({status:"success",data:Buffer.concat(t)});else if(e.statusCode&&(r=e.statusCode,[429,502,503,504].includes(r)))s({status:"retryable",retryInMillis:a(e.headers["retry-after"])});else{const r=new l.N(e.statusMessage,e.statusCode,Buffer.concat(t).toString());s({status:"failure",error:r})}var r}))}));d.setTimeout(i,(()=>{d.destroy(),s({status:"failure",error:new Error("Request Timeout")})})),d.on("error",(e=>{s({status:"failure",error:e})})),u(d,e.compression,r,(e=>{s({status:"failure",error:e})}))}function u(e,t,r,n){let o=function(e){const t=new i.Readable;return t.push(e),t.push(null),t}(r);"gzip"===t&&(e.setHeader("Content-Encoding","gzip"),o=o.on("error",n).pipe(s.createGzip()).on("error",n)),o.pipe(e).on("error",n)}function p(e,t){return new("http:"===new URL(e).protocol?n.Agent:o.Agent)(t)}},"../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/types.js":(e,t,r)=>{r.d(t,{N:()=>n});class n extends Error{code;name="OTLPExporterError";data;constructor(e,t,r){super(e),this.data=r,this.code=t}}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/convert-legacy-otlp-grpc-options.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertLegacyOtlpGrpcOptions=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/otlp-grpc-configuration.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/grpc-exporter-transport.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/otlp-grpc-env-configuration.js");t.convertLegacyOtlpGrpcOptions=function(e,t){e.headers&&n.diag.warn("Headers cannot be set when using grpc");const r=e.credentials;return(0,o.mergeOtlpGrpcConfigurationWithDefaults)({url:e.url,metadata:()=>e.metadata??(0,s.createEmptyMetadata)(),compression:e.compression,timeoutMillis:e.timeoutMillis,concurrencyLimit:e.concurrencyLimit,credentials:null!=r?()=>r:void 0},(0,i.getOtlpGrpcConfigurationFromEnv)(t),(0,o.getOtlpGrpcDefaultConfiguration)())}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/otlp-grpc-configuration.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOtlpGrpcDefaultConfiguration=t.mergeOtlpGrpcConfigurationWithDefaults=t.validateAndNormalizeUrl=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/grpc-exporter-transport.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/version.js"),i=r("url"),a=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js");function l(e){(e=e.trim()).match(/^([\w]{1,8}):\/\//)||(e=`https://${e}`);const t=new i.URL(e);return"unix:"===t.protocol?e:(t.pathname&&"/"!==t.pathname&&a.diag.warn("URL path should not be set when using grpc, the path part of the URL will be ignored."),""===t.protocol||t.protocol?.match(/^(http)s?:$/)||a.diag.warn("URL protocol should be http(s)://. Using http://."),t.host)}function c(e,t){for(const[r,n]of Object.entries(t.getMap()))e.get(r).length<1&&e.set(r,n)}t.validateAndNormalizeUrl=l,t.mergeOtlpGrpcConfigurationWithDefaults=function(e,t,r){const s=e.url??t.url??r.url;return{...(0,n.mergeOtlpSharedConfigurationWithDefaults)(e,t,r),metadata:()=>{const n=r.metadata();return c(n,e.metadata?.().clone()??(0,o.createEmptyMetadata)()),c(n,t.metadata?.()??(0,o.createEmptyMetadata)()),n},url:l(s),credentials:e.credentials??t.credentials?.(s)??r.credentials(s)}},t.getOtlpGrpcDefaultConfiguration=function(){return{...(0,n.getSharedConfigurationDefaults)(),metadata:()=>{const e=(0,o.createEmptyMetadata)();return e.set("User-Agent",`OTel-OTLP-Exporter-JavaScript/${s.VERSION}`),e},url:"http://localhost:4317",credentials:e=>e.startsWith("http://")?()=>(0,o.createInsecureCredentials)():()=>(0,o.createSslCredentials)()}}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/otlp-grpc-env-configuration.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOtlpGrpcConfigurationFromEnv=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/grpc-exporter-transport.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index-node-http.js"),i=r("fs"),a=r("path"),l=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js");function c(e,t){return null!=e&&""!==e?e:null!=t&&""!==t?t:void 0}function u(e){const t=function(e){const t=process.env[`OTEL_EXPORTER_OTLP_${e}_HEADERS`]?.trim(),r=process.env.OTEL_EXPORTER_OTLP_HEADERS?.trim(),s=(0,n.parseKeyPairsIntoRecord)(t),i=(0,n.parseKeyPairsIntoRecord)(r);if(0===Object.keys(s).length&&0===Object.keys(i).length)return;const a=Object.assign({},i,s),l=(0,o.createEmptyMetadata)();for(const[e,t]of Object.entries(a))l.set(e,t);return l}(e);if(null!=t)return()=>t}function p(e){const t=process.env[`OTEL_EXPORTER_OTLP_${e}_ENDPOINT`]?.trim(),r=process.env.OTEL_EXPORTER_OTLP_ENDPOINT?.trim();return c(t,r)}function d(e,t,r){const n=process.env[e]?.trim(),o=process.env[t]?.trim(),s=c(n,o);if(null!=s)try{return i.readFileSync(a.resolve(process.cwd(),s))}catch{return void l.diag.warn(r)}}function m(e){return d(`OTEL_EXPORTER_OTLP_${e}_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CERTIFICATE","Failed to read root certificate file")}function h(e){const t=function(e){return d(`OTEL_EXPORTER_OTLP_${e}_CLIENT_KEY`,"OTEL_EXPORTER_OTLP_CLIENT_KEY","Failed to read client certificate private key file")}(e),r=function(e){return d(`OTEL_EXPORTER_OTLP_${e}_CLIENT_CERTIFICATE`,"OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","Failed to read client certificate chain file")}(e),n=m(e);return null==n||null!=t&&null!=r?(0,o.createSslCredentials)(n,t,r):(l.diag.warn("Client key and certificate must both be provided, but one was missing - attempting to create credentials from just the root certificate"),(0,o.createSslCredentials)(m(e)))}t.getOtlpGrpcConfigurationFromEnv=function(e){return{...(0,s.getSharedConfigurationFromEnvironment)(e),metadata:u(e),url:p(e),credentials:t=>t.startsWith("http://")?()=>(0,o.createInsecureCredentials)():t.startsWith("https://")?()=>h(e):()=>function(e){return function(e){const t=process.env[`OTEL_EXPORTER_OTLP_${e}_INSECURE`]?.toLowerCase().trim(),r=process.env.OTEL_EXPORTER_OTLP_INSECURE?.toLowerCase().trim();return"true"===c(t,r)}(e)?(0,o.createInsecureCredentials)():h(e)}(e)}}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/create-service-client-constructor.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createServiceClientConstructor=void 0;const n=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/index.js");t.createServiceClientConstructor=function(e,t){const r={export:{path:e,requestStream:!1,responseStream:!1,requestSerialize:e=>e,requestDeserialize:e=>e,responseSerialize:e=>e,responseDeserialize:e=>e}};return n.makeGenericClientConstructor(r,t)}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/grpc-exporter-transport.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOtlpGrpcExporterTransport=t.GrpcExporterTransport=t.createEmptyMetadata=t.createSslCredentials=t.createInsecureCredentials=void 0,t.createInsecureCredentials=function(){const{credentials:e}=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/index.js");return e.createInsecure()},t.createSslCredentials=function(e,t,n){const{credentials:o}=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/index.js");return o.createSsl(e,t,n)},t.createEmptyMetadata=function(){const{Metadata:e}=r("../../node_modules/.pnpm/@grpc+grpc-js@1.13.3/node_modules/@grpc/grpc-js/build/src/index.js");return new e};class n{_parameters;_client;_metadata;constructor(e){this._parameters=e}shutdown(){this._client?.close()}send(e,t){const n=Buffer.from(e);if(null==this._client){const{createServiceClientConstructor:e}=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/create-service-client-constructor.js");try{this._metadata=this._parameters.metadata()}catch(e){return Promise.resolve({status:"failure",error:e})}const t=e(this._parameters.grpcPath,this._parameters.grpcName);try{this._client=new t(this._parameters.address,this._parameters.credentials(),{"grpc.default_compression_algorithm":(o=this._parameters.compression,"gzip"===o?2:0)})}catch(e){return Promise.resolve({status:"failure",error:e})}}var o;return new Promise((e=>{const r=Date.now()+t;if(null==this._metadata)return e({error:new Error("metadata was null"),status:"failure"});this._client.export(n,this._metadata,{deadline:r},((t,r)=>{e(t?{status:"failure",error:t}:{data:r,status:"success"})}))}))}}t.GrpcExporterTransport=n,t.createOtlpGrpcExporterTransport=function(e){return new n(e)}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOtlpGrpcExportDelegate=t.convertLegacyOtlpGrpcOptions=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/configuration/convert-legacy-otlp-grpc-options.js");Object.defineProperty(t,"convertLegacyOtlpGrpcOptions",{enumerable:!0,get:function(){return n.convertLegacyOtlpGrpcOptions}});var o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/otlp-grpc-export-delegate.js");Object.defineProperty(t,"createOtlpGrpcExportDelegate",{enumerable:!0,get:function(){return o.createOtlpGrpcExportDelegate}})},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/otlp-grpc-export-delegate.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOtlpGrpcExportDelegate=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+otlp-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-exporter-base/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/grpc-exporter-transport.js");t.createOtlpGrpcExportDelegate=function(e,t,r,s){return(0,n.createOtlpNetworkExportDelegate)(e,t,(0,o.createOtlpGrpcExporterTransport)({address:e.url,compression:e.compression,credentials:e.credentials,metadata:e.metadata,grpcName:r,grpcPath:s}))}},"../../node_modules/.pnpm/@opentelemetry+otlp-grpc-exporter-base@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-grpc-exporter-base/build/src/version.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.203.0"},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/internal.js":(e,t,r)=>{function n(e){return{attributes:s(e.attributes),droppedAttributesCount:0}}function o(e){return{name:e.name,version:e.version}}function s(e){return Object.keys(e).map((t=>i(t,e[t])))}function i(e,t){return{key:e,value:a(t)}}function a(e){const t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(a)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((([e,t])=>i(e,t)))}}:{}}r.d(t,{EB:()=>i,Ff:()=>a,Zg:()=>n,Zs:()=>s,d1:()=>o})},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/utils.js":(e,t,r)=>{r.d(t,{Az:()=>d});var n=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js");function o(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function s(e){const t=new Uint8Array(e.length/2);let r=0;for(let n=0;n<e.length;n+=2){const s=o(e.charCodeAt(n)),i=o(e.charCodeAt(n+1));t[r++]=s<<4|i}return t}function i(e){const t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function a(e){return t=i(e),{low:Number(BigInt.asUintN(32,t)),high:Number(BigInt.asUintN(32,t>>BigInt(32)))};var t}const l="undefined"!=typeof BigInt?function(e){return i(e).toString()}:n.u5;function c(e){return e}function u(e){if(void 0!==e)return s(e)}const p={encodeHrTime:a,encodeSpanContext:s,encodeOptionalSpanContext:u};function d(e){if(void 0===e)return p;const t=e.useLongBits??!0,r=e.useHex??!1;return{encodeHrTime:t?a:l,encodeSpanContext:r?c:s,encodeOptionalSpanContext:r?c:u}}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/generated/root.js":(e,t,r)=>{var n,o,s,i,a,l,c,u,p,d=r("../../node_modules/.pnpm/protobufjs@7.5.3/node_modules/protobufjs/minimal.js"),m=d.Reader,h=d.Writer,g=d.util,f=d.roots.default||(d.roots.default={});f.opentelemetry=((p={}).proto=((u={}).common=((o={}).v1=((n={}).AnyValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.stringValue=null,e.prototype.boolValue=null,e.prototype.intValue=null,e.prototype.doubleValue=null,e.prototype.arrayValue=null,e.prototype.kvlistValue=null,e.prototype.bytesValue=null,Object.defineProperty(e.prototype,"value",{get:g.oneOfGetter(t=["stringValue","boolValue","intValue","doubleValue","arrayValue","kvlistValue","bytesValue"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),null!=e.boolValue&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),null!=e.intValue&&Object.hasOwnProperty.call(e,"intValue")&&t.uint32(24).int64(e.intValue),null!=e.doubleValue&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(33).double(e.doubleValue),null!=e.arrayValue&&Object.hasOwnProperty.call(e,"arrayValue")&&f.opentelemetry.proto.common.v1.ArrayValue.encode(e.arrayValue,t.uint32(42).fork()).ldelim(),null!=e.kvlistValue&&Object.hasOwnProperty.call(e,"kvlistValue")&&f.opentelemetry.proto.common.v1.KeyValueList.encode(e.kvlistValue,t.uint32(50).fork()).ldelim(),null!=e.bytesValue&&Object.hasOwnProperty.call(e,"bytesValue")&&t.uint32(58).bytes(e.bytesValue),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.AnyValue;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.stringValue=e.string();break;case 2:o.boolValue=e.bool();break;case 3:o.intValue=e.int64();break;case 4:o.doubleValue=e.double();break;case 5:o.arrayValue=f.opentelemetry.proto.common.v1.ArrayValue.decode(e,e.uint32());break;case 6:o.kvlistValue=f.opentelemetry.proto.common.v1.KeyValueList.decode(e,e.uint32());break;case 7:o.bytesValue=e.bytes();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.stringValue&&e.hasOwnProperty("stringValue")&&(t.value=1,!g.isString(e.stringValue)))return"stringValue: string expected";if(null!=e.boolValue&&e.hasOwnProperty("boolValue")){if(1===t.value)return"value: multiple values";if(t.value=1,"boolean"!=typeof e.boolValue)return"boolValue: boolean expected"}if(null!=e.intValue&&e.hasOwnProperty("intValue")){if(1===t.value)return"value: multiple values";if(t.value=1,!(g.isInteger(e.intValue)||e.intValue&&g.isInteger(e.intValue.low)&&g.isInteger(e.intValue.high)))return"intValue: integer|Long expected"}if(null!=e.doubleValue&&e.hasOwnProperty("doubleValue")){if(1===t.value)return"value: multiple values";if(t.value=1,"number"!=typeof e.doubleValue)return"doubleValue: number expected"}if(null!=e.arrayValue&&e.hasOwnProperty("arrayValue")){if(1===t.value)return"value: multiple values";if(t.value=1,r=f.opentelemetry.proto.common.v1.ArrayValue.verify(e.arrayValue))return"arrayValue."+r}if(null!=e.kvlistValue&&e.hasOwnProperty("kvlistValue")){if(1===t.value)return"value: multiple values";var r;if(t.value=1,r=f.opentelemetry.proto.common.v1.KeyValueList.verify(e.kvlistValue))return"kvlistValue."+r}if(null!=e.bytesValue&&e.hasOwnProperty("bytesValue")){if(1===t.value)return"value: multiple values";if(t.value=1,!(e.bytesValue&&"number"==typeof e.bytesValue.length||g.isString(e.bytesValue)))return"bytesValue: buffer expected"}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.AnyValue)return e;var t=new f.opentelemetry.proto.common.v1.AnyValue;if(null!=e.stringValue&&(t.stringValue=String(e.stringValue)),null!=e.boolValue&&(t.boolValue=Boolean(e.boolValue)),null!=e.intValue&&(g.Long?(t.intValue=g.Long.fromValue(e.intValue)).unsigned=!1:"string"==typeof e.intValue?t.intValue=parseInt(e.intValue,10):"number"==typeof e.intValue?t.intValue=e.intValue:"object"==typeof e.intValue&&(t.intValue=new g.LongBits(e.intValue.low>>>0,e.intValue.high>>>0).toNumber())),null!=e.doubleValue&&(t.doubleValue=Number(e.doubleValue)),null!=e.arrayValue){if("object"!=typeof e.arrayValue)throw TypeError(".opentelemetry.proto.common.v1.AnyValue.arrayValue: object expected");t.arrayValue=f.opentelemetry.proto.common.v1.ArrayValue.fromObject(e.arrayValue)}if(null!=e.kvlistValue){if("object"!=typeof e.kvlistValue)throw TypeError(".opentelemetry.proto.common.v1.AnyValue.kvlistValue: object expected");t.kvlistValue=f.opentelemetry.proto.common.v1.KeyValueList.fromObject(e.kvlistValue)}return null!=e.bytesValue&&("string"==typeof e.bytesValue?g.base64.decode(e.bytesValue,t.bytesValue=g.newBuffer(g.base64.length(e.bytesValue)),0):e.bytesValue.length>=0&&(t.bytesValue=e.bytesValue)),t},e.toObject=function(e,t){t||(t={});var r={};return null!=e.stringValue&&e.hasOwnProperty("stringValue")&&(r.stringValue=e.stringValue,t.oneofs&&(r.value="stringValue")),null!=e.boolValue&&e.hasOwnProperty("boolValue")&&(r.boolValue=e.boolValue,t.oneofs&&(r.value="boolValue")),null!=e.intValue&&e.hasOwnProperty("intValue")&&("number"==typeof e.intValue?r.intValue=t.longs===String?String(e.intValue):e.intValue:r.intValue=t.longs===String?g.Long.prototype.toString.call(e.intValue):t.longs===Number?new g.LongBits(e.intValue.low>>>0,e.intValue.high>>>0).toNumber():e.intValue,t.oneofs&&(r.value="intValue")),null!=e.doubleValue&&e.hasOwnProperty("doubleValue")&&(r.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue,t.oneofs&&(r.value="doubleValue")),null!=e.arrayValue&&e.hasOwnProperty("arrayValue")&&(r.arrayValue=f.opentelemetry.proto.common.v1.ArrayValue.toObject(e.arrayValue,t),t.oneofs&&(r.value="arrayValue")),null!=e.kvlistValue&&e.hasOwnProperty("kvlistValue")&&(r.kvlistValue=f.opentelemetry.proto.common.v1.KeyValueList.toObject(e.kvlistValue,t),t.oneofs&&(r.value="kvlistValue")),null!=e.bytesValue&&e.hasOwnProperty("bytesValue")&&(r.bytesValue=t.bytes===String?g.base64.encode(e.bytesValue,0,e.bytesValue.length):t.bytes===Array?Array.prototype.slice.call(e.bytesValue):e.bytesValue,t.oneofs&&(r.value="bytesValue")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.AnyValue"},e}(),n.ArrayValue=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)f.opentelemetry.proto.common.v1.AnyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.ArrayValue;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.values&&o.values.length||(o.values=[]),o.values.push(f.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.values&&e.hasOwnProperty("values")){if(!Array.isArray(e.values))return"values: array expected";for(var t=0;t<e.values.length;++t){var r=f.opentelemetry.proto.common.v1.AnyValue.verify(e.values[t]);if(r)return"values."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.ArrayValue)return e;var t=new f.opentelemetry.proto.common.v1.ArrayValue;if(e.values){if(!Array.isArray(e.values))throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: array expected");t.values=[];for(var r=0;r<e.values.length;++r){if("object"!=typeof e.values[r])throw TypeError(".opentelemetry.proto.common.v1.ArrayValue.values: object expected");t.values[r]=f.opentelemetry.proto.common.v1.AnyValue.fromObject(e.values[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.values=[]),e.values&&e.values.length){r.values=[];for(var n=0;n<e.values.length;++n)r.values[n]=f.opentelemetry.proto.common.v1.AnyValue.toObject(e.values[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.ArrayValue"},e}(),n.KeyValueList=function(){function e(e){if(this.values=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.values=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.values&&e.values.length)for(var r=0;r<e.values.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.values[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.KeyValueList;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.values&&o.values.length||(o.values=[]),o.values.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.values&&e.hasOwnProperty("values")){if(!Array.isArray(e.values))return"values: array expected";for(var t=0;t<e.values.length;++t){var r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.values[t]);if(r)return"values."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.KeyValueList)return e;var t=new f.opentelemetry.proto.common.v1.KeyValueList;if(e.values){if(!Array.isArray(e.values))throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: array expected");t.values=[];for(var r=0;r<e.values.length;++r){if("object"!=typeof e.values[r])throw TypeError(".opentelemetry.proto.common.v1.KeyValueList.values: object expected");t.values[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.values[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.values=[]),e.values&&e.values.length){r.values=[];for(var n=0;n<e.values.length;++n)r.values[n]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.values[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.KeyValueList"},e}(),n.KeyValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key=null,e.prototype.value=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&f.opentelemetry.proto.common.v1.AnyValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.KeyValue;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.key=e.string();break;case 2:o.value=f.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.key&&e.hasOwnProperty("key")&&!g.isString(e.key))return"key: string expected";if(null!=e.value&&e.hasOwnProperty("value")){var t=f.opentelemetry.proto.common.v1.AnyValue.verify(e.value);if(t)return"value."+t}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.KeyValue)return e;var t=new f.opentelemetry.proto.common.v1.KeyValue;if(null!=e.key&&(t.key=String(e.key)),null!=e.value){if("object"!=typeof e.value)throw TypeError(".opentelemetry.proto.common.v1.KeyValue.value: object expected");t.value=f.opentelemetry.proto.common.v1.AnyValue.fromObject(e.value)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=null),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=f.opentelemetry.proto.common.v1.AnyValue.toObject(e.value,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.KeyValue"},e}(),n.InstrumentationScope=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name=null,e.prototype.version=null,e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(18).string(e.version),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(32).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.InstrumentationScope;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.name=e.string();break;case 2:o.version=e.string();break;case 3:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 4:o.droppedAttributesCount=e.uint32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.name&&e.hasOwnProperty("name")&&!g.isString(e.name))return"name: string expected";if(null!=e.version&&e.hasOwnProperty("version")&&!g.isString(e.version))return"version: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.InstrumentationScope)return e;var t=new f.opentelemetry.proto.common.v1.InstrumentationScope;if(null!=e.name&&(t.name=String(e.name)),null!=e.version&&(t.version=String(e.version)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.common.v1.InstrumentationScope.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults&&(r.name="",r.version="",r.droppedAttributesCount=0),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.InstrumentationScope"},e}(),n.EntityRef=function(){function e(e){if(this.idKeys=[],this.descriptionKeys=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.schemaUrl=null,e.prototype.type=null,e.prototype.idKeys=g.emptyArray,e.prototype.descriptionKeys=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(10).string(e.schemaUrl),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.idKeys&&e.idKeys.length)for(var r=0;r<e.idKeys.length;++r)t.uint32(26).string(e.idKeys[r]);if(null!=e.descriptionKeys&&e.descriptionKeys.length)for(r=0;r<e.descriptionKeys.length;++r)t.uint32(34).string(e.descriptionKeys[r]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.common.v1.EntityRef;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.schemaUrl=e.string();break;case 2:o.type=e.string();break;case 3:o.idKeys&&o.idKeys.length||(o.idKeys=[]),o.idKeys.push(e.string());break;case 4:o.descriptionKeys&&o.descriptionKeys.length||(o.descriptionKeys=[]),o.descriptionKeys.push(e.string());break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl))return"schemaUrl: string expected";if(null!=e.type&&e.hasOwnProperty("type")&&!g.isString(e.type))return"type: string expected";if(null!=e.idKeys&&e.hasOwnProperty("idKeys")){if(!Array.isArray(e.idKeys))return"idKeys: array expected";for(var t=0;t<e.idKeys.length;++t)if(!g.isString(e.idKeys[t]))return"idKeys: string[] expected"}if(null!=e.descriptionKeys&&e.hasOwnProperty("descriptionKeys")){if(!Array.isArray(e.descriptionKeys))return"descriptionKeys: array expected";for(t=0;t<e.descriptionKeys.length;++t)if(!g.isString(e.descriptionKeys[t]))return"descriptionKeys: string[] expected"}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.common.v1.EntityRef)return e;var t=new f.opentelemetry.proto.common.v1.EntityRef;if(null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),null!=e.type&&(t.type=String(e.type)),e.idKeys){if(!Array.isArray(e.idKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.idKeys: array expected");t.idKeys=[];for(var r=0;r<e.idKeys.length;++r)t.idKeys[r]=String(e.idKeys[r])}if(e.descriptionKeys){if(!Array.isArray(e.descriptionKeys))throw TypeError(".opentelemetry.proto.common.v1.EntityRef.descriptionKeys: array expected");for(t.descriptionKeys=[],r=0;r<e.descriptionKeys.length;++r)t.descriptionKeys[r]=String(e.descriptionKeys[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.idKeys=[],r.descriptionKeys=[]),t.defaults&&(r.schemaUrl="",r.type=""),null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),e.idKeys&&e.idKeys.length){r.idKeys=[];for(var n=0;n<e.idKeys.length;++n)r.idKeys[n]=e.idKeys[n]}if(e.descriptionKeys&&e.descriptionKeys.length)for(r.descriptionKeys=[],n=0;n<e.descriptionKeys.length;++n)r.descriptionKeys[n]=e.descriptionKeys[n];return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.common.v1.EntityRef"},e}(),n),o),u.resource=((s={}).v1=function(){var e={};return e.Resource=function(){function e(e){if(this.attributes=[],this.entityRefs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.prototype.entityRefs=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(10).fork()).ldelim();if(null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(16).uint32(e.droppedAttributesCount),null!=e.entityRefs&&e.entityRefs.length)for(r=0;r<e.entityRefs.length;++r)f.opentelemetry.proto.common.v1.EntityRef.encode(e.entityRefs[r],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.resource.v1.Resource;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.droppedAttributesCount=e.uint32();break;case 3:o.entityRefs&&o.entityRefs.length||(o.entityRefs=[]),o.entityRefs.push(f.opentelemetry.proto.common.v1.EntityRef.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t)if(r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]))return"attributes."+r}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount))return"droppedAttributesCount: integer expected";if(null!=e.entityRefs&&e.hasOwnProperty("entityRefs")){if(!Array.isArray(e.entityRefs))return"entityRefs: array expected";for(t=0;t<e.entityRefs.length;++t){var r;if(r=f.opentelemetry.proto.common.v1.EntityRef.verify(e.entityRefs[t]))return"entityRefs."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.resource.v1.Resource)return e;var t=new f.opentelemetry.proto.resource.v1.Resource;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.resource.v1.Resource.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),e.entityRefs){if(!Array.isArray(e.entityRefs))throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: array expected");for(t.entityRefs=[],r=0;r<e.entityRefs.length;++r){if("object"!=typeof e.entityRefs[r])throw TypeError(".opentelemetry.proto.resource.v1.Resource.entityRefs: object expected");t.entityRefs[r]=f.opentelemetry.proto.common.v1.EntityRef.fromObject(e.entityRefs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[],r.entityRefs=[]),t.defaults&&(r.droppedAttributesCount=0),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),e.entityRefs&&e.entityRefs.length)for(r.entityRefs=[],n=0;n<e.entityRefs.length;++n)r.entityRefs[n]=f.opentelemetry.proto.common.v1.EntityRef.toObject(e.entityRefs[n],t);return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.resource.v1.Resource"},e}(),e}(),s),u.trace=((i={}).v1=function(){var e,t,r={};return r.TracesData=function(){function e(e){if(this.resourceSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceSpans=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceSpans&&e.resourceSpans.length)for(var r=0;r<e.resourceSpans.length;++r)f.opentelemetry.proto.trace.v1.ResourceSpans.encode(e.resourceSpans[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.TracesData;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceSpans&&o.resourceSpans.length||(o.resourceSpans=[]),o.resourceSpans.push(f.opentelemetry.proto.trace.v1.ResourceSpans.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceSpans&&e.hasOwnProperty("resourceSpans")){if(!Array.isArray(e.resourceSpans))return"resourceSpans: array expected";for(var t=0;t<e.resourceSpans.length;++t){var r=f.opentelemetry.proto.trace.v1.ResourceSpans.verify(e.resourceSpans[t]);if(r)return"resourceSpans."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.TracesData)return e;var t=new f.opentelemetry.proto.trace.v1.TracesData;if(e.resourceSpans){if(!Array.isArray(e.resourceSpans))throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: array expected");t.resourceSpans=[];for(var r=0;r<e.resourceSpans.length;++r){if("object"!=typeof e.resourceSpans[r])throw TypeError(".opentelemetry.proto.trace.v1.TracesData.resourceSpans: object expected");t.resourceSpans[r]=f.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(e.resourceSpans[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceSpans=[]),e.resourceSpans&&e.resourceSpans.length){r.resourceSpans=[];for(var n=0;n<e.resourceSpans.length;++n)r.resourceSpans[n]=f.opentelemetry.proto.trace.v1.ResourceSpans.toObject(e.resourceSpans[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.TracesData"},e}(),r.ResourceSpans=function(){function e(e){if(this.scopeSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeSpans=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&f.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeSpans&&e.scopeSpans.length)for(var r=0;r<e.scopeSpans.length;++r)f.opentelemetry.proto.trace.v1.ScopeSpans.encode(e.scopeSpans[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.ResourceSpans;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.resource=f.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:o.scopeSpans&&o.scopeSpans.length||(o.scopeSpans=[]),o.scopeSpans.push(f.opentelemetry.proto.trace.v1.ScopeSpans.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")&&(r=f.opentelemetry.proto.resource.v1.Resource.verify(e.resource)))return"resource."+r;if(null!=e.scopeSpans&&e.hasOwnProperty("scopeSpans")){if(!Array.isArray(e.scopeSpans))return"scopeSpans: array expected";for(var t=0;t<e.scopeSpans.length;++t){var r;if(r=f.opentelemetry.proto.trace.v1.ScopeSpans.verify(e.scopeSpans[t]))return"scopeSpans."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.ResourceSpans)return e;var t=new f.opentelemetry.proto.trace.v1.ResourceSpans;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.resource: object expected");t.resource=f.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeSpans){if(!Array.isArray(e.scopeSpans))throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: array expected");t.scopeSpans=[];for(var r=0;r<e.scopeSpans.length;++r){if("object"!=typeof e.scopeSpans[r])throw TypeError(".opentelemetry.proto.trace.v1.ResourceSpans.scopeSpans: object expected");t.scopeSpans[r]=f.opentelemetry.proto.trace.v1.ScopeSpans.fromObject(e.scopeSpans[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeSpans=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=f.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeSpans&&e.scopeSpans.length){r.scopeSpans=[];for(var n=0;n<e.scopeSpans.length;++n)r.scopeSpans[n]=f.opentelemetry.proto.trace.v1.ScopeSpans.toObject(e.scopeSpans[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.ResourceSpans"},e}(),r.ScopeSpans=function(){function e(e){if(this.spans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.spans=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&f.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.spans&&e.spans.length)for(var r=0;r<e.spans.length;++r)f.opentelemetry.proto.trace.v1.Span.encode(e.spans[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.ScopeSpans;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:o.spans&&o.spans.length||(o.spans=[]),o.spans.push(f.opentelemetry.proto.trace.v1.Span.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")&&(r=f.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope)))return"scope."+r;if(null!=e.spans&&e.hasOwnProperty("spans")){if(!Array.isArray(e.spans))return"spans: array expected";for(var t=0;t<e.spans.length;++t){var r;if(r=f.opentelemetry.proto.trace.v1.Span.verify(e.spans[t]))return"spans."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.ScopeSpans)return e;var t=new f.opentelemetry.proto.trace.v1.ScopeSpans;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.scope: object expected");t.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.spans){if(!Array.isArray(e.spans))throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: array expected");t.spans=[];for(var r=0;r<e.spans.length;++r){if("object"!=typeof e.spans[r])throw TypeError(".opentelemetry.proto.trace.v1.ScopeSpans.spans: object expected");t.spans[r]=f.opentelemetry.proto.trace.v1.Span.fromObject(e.spans[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.spans=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.spans&&e.spans.length){r.spans=[];for(var n=0;n<e.spans.length;++n)r.spans[n]=f.opentelemetry.proto.trace.v1.Span.toObject(e.spans[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.ScopeSpans"},e}(),r.Span=function(){function e(e){if(this.attributes=[],this.events=[],this.links=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.traceId=null,e.prototype.spanId=null,e.prototype.traceState=null,e.prototype.parentSpanId=null,e.prototype.flags=null,e.prototype.name=null,e.prototype.kind=null,e.prototype.startTimeUnixNano=null,e.prototype.endTimeUnixNano=null,e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.prototype.events=g.emptyArray,e.prototype.droppedEventsCount=null,e.prototype.links=g.emptyArray,e.prototype.droppedLinksCount=null,e.prototype.status=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(10).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(18).bytes(e.spanId),null!=e.traceState&&Object.hasOwnProperty.call(e,"traceState")&&t.uint32(26).string(e.traceState),null!=e.parentSpanId&&Object.hasOwnProperty.call(e,"parentSpanId")&&t.uint32(34).bytes(e.parentSpanId),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(42).string(e.name),null!=e.kind&&Object.hasOwnProperty.call(e,"kind")&&t.uint32(48).int32(e.kind),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(57).fixed64(e.startTimeUnixNano),null!=e.endTimeUnixNano&&Object.hasOwnProperty.call(e,"endTimeUnixNano")&&t.uint32(65).fixed64(e.endTimeUnixNano),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(74).fork()).ldelim();if(null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(80).uint32(e.droppedAttributesCount),null!=e.events&&e.events.length)for(r=0;r<e.events.length;++r)f.opentelemetry.proto.trace.v1.Span.Event.encode(e.events[r],t.uint32(90).fork()).ldelim();if(null!=e.droppedEventsCount&&Object.hasOwnProperty.call(e,"droppedEventsCount")&&t.uint32(96).uint32(e.droppedEventsCount),null!=e.links&&e.links.length)for(r=0;r<e.links.length;++r)f.opentelemetry.proto.trace.v1.Span.Link.encode(e.links[r],t.uint32(106).fork()).ldelim();return null!=e.droppedLinksCount&&Object.hasOwnProperty.call(e,"droppedLinksCount")&&t.uint32(112).uint32(e.droppedLinksCount),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&f.opentelemetry.proto.trace.v1.Status.encode(e.status,t.uint32(122).fork()).ldelim(),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(133).fixed32(e.flags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.Span;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.traceId=e.bytes();break;case 2:o.spanId=e.bytes();break;case 3:o.traceState=e.string();break;case 4:o.parentSpanId=e.bytes();break;case 16:o.flags=e.fixed32();break;case 5:o.name=e.string();break;case 6:o.kind=e.int32();break;case 7:o.startTimeUnixNano=e.fixed64();break;case 8:o.endTimeUnixNano=e.fixed64();break;case 9:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 10:o.droppedAttributesCount=e.uint32();break;case 11:o.events&&o.events.length||(o.events=[]),o.events.push(f.opentelemetry.proto.trace.v1.Span.Event.decode(e,e.uint32()));break;case 12:o.droppedEventsCount=e.uint32();break;case 13:o.links&&o.links.length||(o.links=[]),o.links.push(f.opentelemetry.proto.trace.v1.Span.Link.decode(e,e.uint32()));break;case 14:o.droppedLinksCount=e.uint32();break;case 15:o.status=f.opentelemetry.proto.trace.v1.Status.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||g.isString(e.traceId)))return"traceId: buffer expected";if(null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||g.isString(e.spanId)))return"spanId: buffer expected";if(null!=e.traceState&&e.hasOwnProperty("traceState")&&!g.isString(e.traceState))return"traceState: string expected";if(null!=e.parentSpanId&&e.hasOwnProperty("parentSpanId")&&!(e.parentSpanId&&"number"==typeof e.parentSpanId.length||g.isString(e.parentSpanId)))return"parentSpanId: buffer expected";if(null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(null!=e.name&&e.hasOwnProperty("name")&&!g.isString(e.name))return"name: string expected";if(null!=e.kind&&e.hasOwnProperty("kind"))switch(e.kind){default:return"kind: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!(g.isInteger(e.startTimeUnixNano)||e.startTimeUnixNano&&g.isInteger(e.startTimeUnixNano.low)&&g.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.endTimeUnixNano&&e.hasOwnProperty("endTimeUnixNano")&&!(g.isInteger(e.endTimeUnixNano)||e.endTimeUnixNano&&g.isInteger(e.endTimeUnixNano.low)&&g.isInteger(e.endTimeUnixNano.high)))return"endTimeUnixNano: integer|Long expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t)if(r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]))return"attributes."+r}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount))return"droppedAttributesCount: integer expected";if(null!=e.events&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(t=0;t<e.events.length;++t)if(r=f.opentelemetry.proto.trace.v1.Span.Event.verify(e.events[t]))return"events."+r}if(null!=e.droppedEventsCount&&e.hasOwnProperty("droppedEventsCount")&&!g.isInteger(e.droppedEventsCount))return"droppedEventsCount: integer expected";if(null!=e.links&&e.hasOwnProperty("links")){if(!Array.isArray(e.links))return"links: array expected";for(t=0;t<e.links.length;++t)if(r=f.opentelemetry.proto.trace.v1.Span.Link.verify(e.links[t]))return"links."+r}return null!=e.droppedLinksCount&&e.hasOwnProperty("droppedLinksCount")&&!g.isInteger(e.droppedLinksCount)?"droppedLinksCount: integer expected":null!=e.status&&e.hasOwnProperty("status")&&(r=f.opentelemetry.proto.trace.v1.Status.verify(e.status))?"status."+r:null;var r},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.Span)return e;var t=new f.opentelemetry.proto.trace.v1.Span;switch(null!=e.traceId&&("string"==typeof e.traceId?g.base64.decode(e.traceId,t.traceId=g.newBuffer(g.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?g.base64.decode(e.spanId,t.spanId=g.newBuffer(g.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceState&&(t.traceState=String(e.traceState)),null!=e.parentSpanId&&("string"==typeof e.parentSpanId?g.base64.decode(e.parentSpanId,t.parentSpanId=g.newBuffer(g.base64.length(e.parentSpanId)),0):e.parentSpanId.length>=0&&(t.parentSpanId=e.parentSpanId)),null!=e.flags&&(t.flags=e.flags>>>0),null!=e.name&&(t.name=String(e.name)),e.kind){default:if("number"==typeof e.kind){t.kind=e.kind;break}break;case"SPAN_KIND_UNSPECIFIED":case 0:t.kind=0;break;case"SPAN_KIND_INTERNAL":case 1:t.kind=1;break;case"SPAN_KIND_SERVER":case 2:t.kind=2;break;case"SPAN_KIND_CLIENT":case 3:t.kind=3;break;case"SPAN_KIND_PRODUCER":case 4:t.kind=4;break;case"SPAN_KIND_CONSUMER":case 5:t.kind=5}if(null!=e.startTimeUnixNano&&(g.Long?(t.startTimeUnixNano=g.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.endTimeUnixNano&&(g.Long?(t.endTimeUnixNano=g.Long.fromValue(e.endTimeUnixNano)).unsigned=!1:"string"==typeof e.endTimeUnixNano?t.endTimeUnixNano=parseInt(e.endTimeUnixNano,10):"number"==typeof e.endTimeUnixNano?t.endTimeUnixNano=e.endTimeUnixNano:"object"==typeof e.endTimeUnixNano&&(t.endTimeUnixNano=new g.LongBits(e.endTimeUnixNano.low>>>0,e.endTimeUnixNano.high>>>0).toNumber())),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),e.events){if(!Array.isArray(e.events))throw TypeError(".opentelemetry.proto.trace.v1.Span.events: array expected");for(t.events=[],r=0;r<e.events.length;++r){if("object"!=typeof e.events[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.events: object expected");t.events[r]=f.opentelemetry.proto.trace.v1.Span.Event.fromObject(e.events[r])}}if(null!=e.droppedEventsCount&&(t.droppedEventsCount=e.droppedEventsCount>>>0),e.links){if(!Array.isArray(e.links))throw TypeError(".opentelemetry.proto.trace.v1.Span.links: array expected");for(t.links=[],r=0;r<e.links.length;++r){if("object"!=typeof e.links[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.links: object expected");t.links[r]=f.opentelemetry.proto.trace.v1.Span.Link.fromObject(e.links[r])}}if(null!=e.droppedLinksCount&&(t.droppedLinksCount=e.droppedLinksCount>>>0),null!=e.status){if("object"!=typeof e.status)throw TypeError(".opentelemetry.proto.trace.v1.Span.status: object expected");t.status=f.opentelemetry.proto.trace.v1.Status.fromObject(e.status)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[],r.events=[],r.links=[]),t.defaults){if(t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=g.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=g.newBuffer(r.spanId))),r.traceState="",t.bytes===String?r.parentSpanId="":(r.parentSpanId=[],t.bytes!==Array&&(r.parentSpanId=g.newBuffer(r.parentSpanId))),r.name="",r.kind=t.enums===String?"SPAN_KIND_UNSPECIFIED":0,g.Long){var n=new g.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;g.Long?(n=new g.Long(0,0,!1),r.endTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.endTimeUnixNano=t.longs===String?"0":0,r.droppedAttributesCount=0,r.droppedEventsCount=0,r.droppedLinksCount=0,r.status=null,r.flags=0}if(null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?g.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?g.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceState&&e.hasOwnProperty("traceState")&&(r.traceState=e.traceState),null!=e.parentSpanId&&e.hasOwnProperty("parentSpanId")&&(r.parentSpanId=t.bytes===String?g.base64.encode(e.parentSpanId,0,e.parentSpanId.length):t.bytes===Array?Array.prototype.slice.call(e.parentSpanId):e.parentSpanId),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.kind&&e.hasOwnProperty("kind")&&(r.kind=t.enums===String?void 0===f.opentelemetry.proto.trace.v1.Span.SpanKind[e.kind]?e.kind:f.opentelemetry.proto.trace.v1.Span.SpanKind[e.kind]:e.kind),null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.endTimeUnixNano&&e.hasOwnProperty("endTimeUnixNano")&&("number"==typeof e.endTimeUnixNano?r.endTimeUnixNano=t.longs===String?String(e.endTimeUnixNano):e.endTimeUnixNano:r.endTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.endTimeUnixNano):t.longs===Number?new g.LongBits(e.endTimeUnixNano.low>>>0,e.endTimeUnixNano.high>>>0).toNumber():e.endTimeUnixNano),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}if(null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),e.events&&e.events.length)for(r.events=[],o=0;o<e.events.length;++o)r.events[o]=f.opentelemetry.proto.trace.v1.Span.Event.toObject(e.events[o],t);if(null!=e.droppedEventsCount&&e.hasOwnProperty("droppedEventsCount")&&(r.droppedEventsCount=e.droppedEventsCount),e.links&&e.links.length)for(r.links=[],o=0;o<e.links.length;++o)r.links[o]=f.opentelemetry.proto.trace.v1.Span.Link.toObject(e.links[o],t);return null!=e.droppedLinksCount&&e.hasOwnProperty("droppedLinksCount")&&(r.droppedLinksCount=e.droppedLinksCount),null!=e.status&&e.hasOwnProperty("status")&&(r.status=f.opentelemetry.proto.trace.v1.Status.toObject(e.status,t)),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span"},e.SpanKind=(t={},(r=Object.create(t))[t[0]="SPAN_KIND_UNSPECIFIED"]=0,r[t[1]="SPAN_KIND_INTERNAL"]=1,r[t[2]="SPAN_KIND_SERVER"]=2,r[t[3]="SPAN_KIND_CLIENT"]=3,r[t[4]="SPAN_KIND_PRODUCER"]=4,r[t[5]="SPAN_KIND_CONSUMER"]=5,r),e.Event=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timeUnixNano=null,e.prototype.name=null,e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(9).fixed64(e.timeUnixNano),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(32).uint32(e.droppedAttributesCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.Span.Event;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.timeUnixNano=e.fixed64();break;case 2:o.name=e.string();break;case 3:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 4:o.droppedAttributesCount=e.uint32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.name&&e.hasOwnProperty("name")&&!g.isString(e.name))return"name: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.Span.Event)return e;var t=new f.opentelemetry.proto.trace.v1.Span.Event;if(null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.name&&(t.name=String(e.name)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.Event.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;r.name="",r.droppedAttributesCount=0}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span.Event"},e}(),e.Link=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.traceId=null,e.prototype.spanId=null,e.prototype.traceState=null,e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.prototype.flags=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(10).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(18).bytes(e.spanId),null!=e.traceState&&Object.hasOwnProperty.call(e,"traceState")&&t.uint32(26).string(e.traceState),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(34).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(40).uint32(e.droppedAttributesCount),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(53).fixed32(e.flags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.Span.Link;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.traceId=e.bytes();break;case 2:o.spanId=e.bytes();break;case 3:o.traceState=e.string();break;case 4:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 5:o.droppedAttributesCount=e.uint32();break;case 6:o.flags=e.fixed32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||g.isString(e.traceId)))return"traceId: buffer expected";if(null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||g.isString(e.spanId)))return"spanId: buffer expected";if(null!=e.traceState&&e.hasOwnProperty("traceState")&&!g.isString(e.traceState))return"traceState: string expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]);if(r)return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags)?"flags: integer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.Span.Link)return e;var t=new f.opentelemetry.proto.trace.v1.Span.Link;if(null!=e.traceId&&("string"==typeof e.traceId?g.base64.decode(e.traceId,t.traceId=g.newBuffer(g.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?g.base64.decode(e.spanId,t.spanId=g.newBuffer(g.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceState&&(t.traceState=String(e.traceState)),e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.trace.v1.Span.Link.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),null!=e.flags&&(t.flags=e.flags>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults&&(t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=g.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=g.newBuffer(r.spanId))),r.traceState="",r.droppedAttributesCount=0,r.flags=0),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?g.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?g.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceState&&e.hasOwnProperty("traceState")&&(r.traceState=e.traceState),e.attributes&&e.attributes.length){r.attributes=[];for(var n=0;n<e.attributes.length;++n)r.attributes[n]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[n],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Span.Link"},e}(),e}(),r.Status=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.message=null,e.prototype.code=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).int32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.trace.v1.Status;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 2:o.message=e.string();break;case 3:o.code=e.int32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!g.isString(e.message))return"message: string expected";if(null!=e.code&&e.hasOwnProperty("code"))switch(e.code){default:return"code: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.trace.v1.Status)return e;var t=new f.opentelemetry.proto.trace.v1.Status;switch(null!=e.message&&(t.message=String(e.message)),e.code){default:if("number"==typeof e.code){t.code=e.code;break}break;case"STATUS_CODE_UNSET":case 0:t.code=0;break;case"STATUS_CODE_OK":case 1:t.code=1;break;case"STATUS_CODE_ERROR":case 2:t.code=2}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.message="",r.code=t.enums===String?"STATUS_CODE_UNSET":0),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),null!=e.code&&e.hasOwnProperty("code")&&(r.code=t.enums===String?void 0===f.opentelemetry.proto.trace.v1.Status.StatusCode[e.code]?e.code:f.opentelemetry.proto.trace.v1.Status.StatusCode[e.code]:e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.trace.v1.Status"},e.StatusCode=(t={},(r=Object.create(t))[t[0]="STATUS_CODE_UNSET"]=0,r[t[1]="STATUS_CODE_OK"]=1,r[t[2]="STATUS_CODE_ERROR"]=2,r),e}(),r.SpanFlags=(e={},(t=Object.create(e))[e[0]="SPAN_FLAGS_DO_NOT_USE"]=0,t[e[255]="SPAN_FLAGS_TRACE_FLAGS_MASK"]=255,t[e[256]="SPAN_FLAGS_CONTEXT_HAS_IS_REMOTE_MASK"]=256,t[e[512]="SPAN_FLAGS_CONTEXT_IS_REMOTE_MASK"]=512,t),r}(),i),u.collector=((c={}).trace=function(){var e={};return e.v1=function(){var e={};return e.TraceService=function(){function e(e,t,r){d.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(d.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,t,r)},"name",{value:"Export"}),e}(),e.ExportTraceServiceRequest=function(){function e(e){if(this.resourceSpans=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceSpans=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceSpans&&e.resourceSpans.length)for(var r=0;r<e.resourceSpans.length;++r)f.opentelemetry.proto.trace.v1.ResourceSpans.encode(e.resourceSpans[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceSpans&&o.resourceSpans.length||(o.resourceSpans=[]),o.resourceSpans.push(f.opentelemetry.proto.trace.v1.ResourceSpans.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceSpans&&e.hasOwnProperty("resourceSpans")){if(!Array.isArray(e.resourceSpans))return"resourceSpans: array expected";for(var t=0;t<e.resourceSpans.length;++t){var r=f.opentelemetry.proto.trace.v1.ResourceSpans.verify(e.resourceSpans[t]);if(r)return"resourceSpans."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest)return e;var t=new f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest;if(e.resourceSpans){if(!Array.isArray(e.resourceSpans))throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: array expected");t.resourceSpans=[];for(var r=0;r<e.resourceSpans.length;++r){if("object"!=typeof e.resourceSpans[r])throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest.resourceSpans: object expected");t.resourceSpans[r]=f.opentelemetry.proto.trace.v1.ResourceSpans.fromObject(e.resourceSpans[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceSpans=[]),e.resourceSpans&&e.resourceSpans.length){r.resourceSpans=[];for(var n=0;n<e.resourceSpans.length;++n)r.resourceSpans[n]=f.opentelemetry.proto.trace.v1.ResourceSpans.toObject(e.resourceSpans[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest"},e}(),e.ExportTraceServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?o.partialSuccess=f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.decode(e,e.uint32()):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse)return e;var t=new f.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse.partialSuccess: object expected");t.partialSuccess=f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse"},e}(),e.ExportTracePartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedSpans=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.rejectedSpans&&Object.hasOwnProperty.call(e,"rejectedSpans")&&t.uint32(8).int64(e.rejectedSpans),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.rejectedSpans=e.int64();break;case 2:o.errorMessage=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedSpans&&e.hasOwnProperty("rejectedSpans")&&!(g.isInteger(e.rejectedSpans)||e.rejectedSpans&&g.isInteger(e.rejectedSpans.low)&&g.isInteger(e.rejectedSpans.high))?"rejectedSpans: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!g.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess)return e;var t=new f.opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess;return null!=e.rejectedSpans&&(g.Long?(t.rejectedSpans=g.Long.fromValue(e.rejectedSpans)).unsigned=!1:"string"==typeof e.rejectedSpans?t.rejectedSpans=parseInt(e.rejectedSpans,10):"number"==typeof e.rejectedSpans?t.rejectedSpans=e.rejectedSpans:"object"==typeof e.rejectedSpans&&(t.rejectedSpans=new g.LongBits(e.rejectedSpans.low>>>0,e.rejectedSpans.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.rejectedSpans=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedSpans=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedSpans&&e.hasOwnProperty("rejectedSpans")&&("number"==typeof e.rejectedSpans?r.rejectedSpans=t.longs===String?String(e.rejectedSpans):e.rejectedSpans:r.rejectedSpans=t.longs===String?g.Long.prototype.toString.call(e.rejectedSpans):t.longs===Number?new g.LongBits(e.rejectedSpans.low>>>0,e.rejectedSpans.high>>>0).toNumber():e.rejectedSpans),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.trace.v1.ExportTracePartialSuccess"},e}(),e}(),e}(),c.metrics=((a={}).v1=function(){var e={};return e.MetricsService=function(){function e(e,t,r){d.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(d.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,t,r)},"name",{value:"Export"}),e}(),e.ExportMetricsServiceRequest=function(){function e(e){if(this.resourceMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceMetrics=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceMetrics&&e.resourceMetrics.length)for(var r=0;r<e.resourceMetrics.length;++r)f.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(e.resourceMetrics[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceMetrics&&o.resourceMetrics.length||(o.resourceMetrics=[]),o.resourceMetrics.push(f.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceMetrics&&e.hasOwnProperty("resourceMetrics")){if(!Array.isArray(e.resourceMetrics))return"resourceMetrics: array expected";for(var t=0;t<e.resourceMetrics.length;++t){var r=f.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(e.resourceMetrics[t]);if(r)return"resourceMetrics."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest)return e;var t=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest;if(e.resourceMetrics){if(!Array.isArray(e.resourceMetrics))throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: array expected");t.resourceMetrics=[];for(var r=0;r<e.resourceMetrics.length;++r){if("object"!=typeof e.resourceMetrics[r])throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest.resourceMetrics: object expected");t.resourceMetrics[r]=f.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(e.resourceMetrics[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceMetrics=[]),e.resourceMetrics&&e.resourceMetrics.length){r.resourceMetrics=[];for(var n=0;n<e.resourceMetrics.length;++n)r.resourceMetrics[n]=f.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(e.resourceMetrics[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest"},e}(),e.ExportMetricsServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?o.partialSuccess=f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.decode(e,e.uint32()):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse)return e;var t=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse.partialSuccess: object expected");t.partialSuccess=f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse"},e}(),e.ExportMetricsPartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedDataPoints=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.rejectedDataPoints&&Object.hasOwnProperty.call(e,"rejectedDataPoints")&&t.uint32(8).int64(e.rejectedDataPoints),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.rejectedDataPoints=e.int64();break;case 2:o.errorMessage=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedDataPoints&&e.hasOwnProperty("rejectedDataPoints")&&!(g.isInteger(e.rejectedDataPoints)||e.rejectedDataPoints&&g.isInteger(e.rejectedDataPoints.low)&&g.isInteger(e.rejectedDataPoints.high))?"rejectedDataPoints: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!g.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess)return e;var t=new f.opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess;return null!=e.rejectedDataPoints&&(g.Long?(t.rejectedDataPoints=g.Long.fromValue(e.rejectedDataPoints)).unsigned=!1:"string"==typeof e.rejectedDataPoints?t.rejectedDataPoints=parseInt(e.rejectedDataPoints,10):"number"==typeof e.rejectedDataPoints?t.rejectedDataPoints=e.rejectedDataPoints:"object"==typeof e.rejectedDataPoints&&(t.rejectedDataPoints=new g.LongBits(e.rejectedDataPoints.low>>>0,e.rejectedDataPoints.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.rejectedDataPoints=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedDataPoints=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedDataPoints&&e.hasOwnProperty("rejectedDataPoints")&&("number"==typeof e.rejectedDataPoints?r.rejectedDataPoints=t.longs===String?String(e.rejectedDataPoints):e.rejectedDataPoints:r.rejectedDataPoints=t.longs===String?g.Long.prototype.toString.call(e.rejectedDataPoints):t.longs===Number?new g.LongBits(e.rejectedDataPoints.low>>>0,e.rejectedDataPoints.high>>>0).toNumber():e.rejectedDataPoints),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.metrics.v1.ExportMetricsPartialSuccess"},e}(),e}(),a),c.logs=((l={}).v1=function(){var e={};return e.LogsService=function(){function e(e,t,r){d.rpc.Service.call(this,e,t,r)}return(e.prototype=Object.create(d.rpc.Service.prototype)).constructor=e,e.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(e.prototype.export=function e(t,r){return this.rpcCall(e,f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,t,r)},"name",{value:"Export"}),e}(),e.ExportLogsServiceRequest=function(){function e(e){if(this.resourceLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceLogs=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceLogs&&e.resourceLogs.length)for(var r=0;r<e.resourceLogs.length;++r)f.opentelemetry.proto.logs.v1.ResourceLogs.encode(e.resourceLogs[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceLogs&&o.resourceLogs.length||(o.resourceLogs=[]),o.resourceLogs.push(f.opentelemetry.proto.logs.v1.ResourceLogs.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceLogs&&e.hasOwnProperty("resourceLogs")){if(!Array.isArray(e.resourceLogs))return"resourceLogs: array expected";for(var t=0;t<e.resourceLogs.length;++t){var r=f.opentelemetry.proto.logs.v1.ResourceLogs.verify(e.resourceLogs[t]);if(r)return"resourceLogs."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest)return e;var t=new f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest;if(e.resourceLogs){if(!Array.isArray(e.resourceLogs))throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: array expected");t.resourceLogs=[];for(var r=0;r<e.resourceLogs.length;++r){if("object"!=typeof e.resourceLogs[r])throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest.resourceLogs: object expected");t.resourceLogs[r]=f.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(e.resourceLogs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceLogs=[]),e.resourceLogs&&e.resourceLogs.length){r.resourceLogs=[];for(var n=0;n<e.resourceLogs.length;++n)r.resourceLogs[n]=f.opentelemetry.proto.logs.v1.ResourceLogs.toObject(e.resourceLogs[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest"},e}(),e.ExportLogsServiceResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partialSuccess=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.partialSuccess&&Object.hasOwnProperty.call(e,"partialSuccess")&&f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.encode(e.partialSuccess,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?o.partialSuccess=f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.decode(e,e.uint32()):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")){var t=f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.verify(e.partialSuccess);if(t)return"partialSuccess."+t}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse)return e;var t=new f.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse;if(null!=e.partialSuccess){if("object"!=typeof e.partialSuccess)throw TypeError(".opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse.partialSuccess: object expected");t.partialSuccess=f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.fromObject(e.partialSuccess)}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.partialSuccess=null),null!=e.partialSuccess&&e.hasOwnProperty("partialSuccess")&&(r.partialSuccess=f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess.toObject(e.partialSuccess,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse"},e}(),e.ExportLogsPartialSuccess=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rejectedLogRecords=null,e.prototype.errorMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.rejectedLogRecords&&Object.hasOwnProperty.call(e,"rejectedLogRecords")&&t.uint32(8).int64(e.rejectedLogRecords),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(18).string(e.errorMessage),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.rejectedLogRecords=e.int64();break;case 2:o.errorMessage=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rejectedLogRecords&&e.hasOwnProperty("rejectedLogRecords")&&!(g.isInteger(e.rejectedLogRecords)||e.rejectedLogRecords&&g.isInteger(e.rejectedLogRecords.low)&&g.isInteger(e.rejectedLogRecords.high))?"rejectedLogRecords: integer|Long expected":null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&!g.isString(e.errorMessage)?"errorMessage: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess)return e;var t=new f.opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess;return null!=e.rejectedLogRecords&&(g.Long?(t.rejectedLogRecords=g.Long.fromValue(e.rejectedLogRecords)).unsigned=!1:"string"==typeof e.rejectedLogRecords?t.rejectedLogRecords=parseInt(e.rejectedLogRecords,10):"number"==typeof e.rejectedLogRecords?t.rejectedLogRecords=e.rejectedLogRecords:"object"==typeof e.rejectedLogRecords&&(t.rejectedLogRecords=new g.LongBits(e.rejectedLogRecords.low>>>0,e.rejectedLogRecords.high>>>0).toNumber())),null!=e.errorMessage&&(t.errorMessage=String(e.errorMessage)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.rejectedLogRecords=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.rejectedLogRecords=t.longs===String?"0":0;r.errorMessage=""}return null!=e.rejectedLogRecords&&e.hasOwnProperty("rejectedLogRecords")&&("number"==typeof e.rejectedLogRecords?r.rejectedLogRecords=t.longs===String?String(e.rejectedLogRecords):e.rejectedLogRecords:r.rejectedLogRecords=t.longs===String?g.Long.prototype.toString.call(e.rejectedLogRecords):t.longs===Number?new g.LongBits(e.rejectedLogRecords.low>>>0,e.rejectedLogRecords.high>>>0).toNumber():e.rejectedLogRecords),null!=e.errorMessage&&e.hasOwnProperty("errorMessage")&&(r.errorMessage=e.errorMessage),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.collector.logs.v1.ExportLogsPartialSuccess"},e}(),e}(),l),c),u.metrics=function(){var e={};return e.v1=function(){var e,t,r={};return r.MetricsData=function(){function e(e){if(this.resourceMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceMetrics=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceMetrics&&e.resourceMetrics.length)for(var r=0;r<e.resourceMetrics.length;++r)f.opentelemetry.proto.metrics.v1.ResourceMetrics.encode(e.resourceMetrics[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.MetricsData;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceMetrics&&o.resourceMetrics.length||(o.resourceMetrics=[]),o.resourceMetrics.push(f.opentelemetry.proto.metrics.v1.ResourceMetrics.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceMetrics&&e.hasOwnProperty("resourceMetrics")){if(!Array.isArray(e.resourceMetrics))return"resourceMetrics: array expected";for(var t=0;t<e.resourceMetrics.length;++t){var r=f.opentelemetry.proto.metrics.v1.ResourceMetrics.verify(e.resourceMetrics[t]);if(r)return"resourceMetrics."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.MetricsData)return e;var t=new f.opentelemetry.proto.metrics.v1.MetricsData;if(e.resourceMetrics){if(!Array.isArray(e.resourceMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: array expected");t.resourceMetrics=[];for(var r=0;r<e.resourceMetrics.length;++r){if("object"!=typeof e.resourceMetrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.MetricsData.resourceMetrics: object expected");t.resourceMetrics[r]=f.opentelemetry.proto.metrics.v1.ResourceMetrics.fromObject(e.resourceMetrics[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceMetrics=[]),e.resourceMetrics&&e.resourceMetrics.length){r.resourceMetrics=[];for(var n=0;n<e.resourceMetrics.length;++n)r.resourceMetrics[n]=f.opentelemetry.proto.metrics.v1.ResourceMetrics.toObject(e.resourceMetrics[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.MetricsData"},e}(),r.ResourceMetrics=function(){function e(e){if(this.scopeMetrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeMetrics=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&f.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeMetrics&&e.scopeMetrics.length)for(var r=0;r<e.scopeMetrics.length;++r)f.opentelemetry.proto.metrics.v1.ScopeMetrics.encode(e.scopeMetrics[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.ResourceMetrics;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.resource=f.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:o.scopeMetrics&&o.scopeMetrics.length||(o.scopeMetrics=[]),o.scopeMetrics.push(f.opentelemetry.proto.metrics.v1.ScopeMetrics.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")&&(r=f.opentelemetry.proto.resource.v1.Resource.verify(e.resource)))return"resource."+r;if(null!=e.scopeMetrics&&e.hasOwnProperty("scopeMetrics")){if(!Array.isArray(e.scopeMetrics))return"scopeMetrics: array expected";for(var t=0;t<e.scopeMetrics.length;++t){var r;if(r=f.opentelemetry.proto.metrics.v1.ScopeMetrics.verify(e.scopeMetrics[t]))return"scopeMetrics."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.ResourceMetrics)return e;var t=new f.opentelemetry.proto.metrics.v1.ResourceMetrics;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.resource: object expected");t.resource=f.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeMetrics){if(!Array.isArray(e.scopeMetrics))throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: array expected");t.scopeMetrics=[];for(var r=0;r<e.scopeMetrics.length;++r){if("object"!=typeof e.scopeMetrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.ResourceMetrics.scopeMetrics: object expected");t.scopeMetrics[r]=f.opentelemetry.proto.metrics.v1.ScopeMetrics.fromObject(e.scopeMetrics[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeMetrics=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=f.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeMetrics&&e.scopeMetrics.length){r.scopeMetrics=[];for(var n=0;n<e.scopeMetrics.length;++n)r.scopeMetrics[n]=f.opentelemetry.proto.metrics.v1.ScopeMetrics.toObject(e.scopeMetrics[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ResourceMetrics"},e}(),r.ScopeMetrics=function(){function e(e){if(this.metrics=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.metrics=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&f.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.metrics&&e.metrics.length)for(var r=0;r<e.metrics.length;++r)f.opentelemetry.proto.metrics.v1.Metric.encode(e.metrics[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.ScopeMetrics;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(f.opentelemetry.proto.metrics.v1.Metric.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")&&(r=f.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope)))return"scope."+r;if(null!=e.metrics&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var r;if(r=f.opentelemetry.proto.metrics.v1.Metric.verify(e.metrics[t]))return"metrics."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.ScopeMetrics)return e;var t=new f.opentelemetry.proto.metrics.v1.ScopeMetrics;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.scope: object expected");t.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: array expected");t.metrics=[];for(var r=0;r<e.metrics.length;++r){if("object"!=typeof e.metrics[r])throw TypeError(".opentelemetry.proto.metrics.v1.ScopeMetrics.metrics: object expected");t.metrics[r]=f.opentelemetry.proto.metrics.v1.Metric.fromObject(e.metrics[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.metrics=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.metrics&&e.metrics.length){r.metrics=[];for(var n=0;n<e.metrics.length;++n)r.metrics[n]=f.opentelemetry.proto.metrics.v1.Metric.toObject(e.metrics[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ScopeMetrics"},e}(),r.Metric=function(){function e(e){if(this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.name=null,e.prototype.description=null,e.prototype.unit=null,e.prototype.gauge=null,e.prototype.sum=null,e.prototype.histogram=null,e.prototype.exponentialHistogram=null,e.prototype.summary=null,e.prototype.metadata=g.emptyArray,Object.defineProperty(e.prototype,"data",{get:g.oneOfGetter(t=["gauge","sum","histogram","exponentialHistogram","summary"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(26).string(e.unit),null!=e.gauge&&Object.hasOwnProperty.call(e,"gauge")&&f.opentelemetry.proto.metrics.v1.Gauge.encode(e.gauge,t.uint32(42).fork()).ldelim(),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&f.opentelemetry.proto.metrics.v1.Sum.encode(e.sum,t.uint32(58).fork()).ldelim(),null!=e.histogram&&Object.hasOwnProperty.call(e,"histogram")&&f.opentelemetry.proto.metrics.v1.Histogram.encode(e.histogram,t.uint32(74).fork()).ldelim(),null!=e.exponentialHistogram&&Object.hasOwnProperty.call(e,"exponentialHistogram")&&f.opentelemetry.proto.metrics.v1.ExponentialHistogram.encode(e.exponentialHistogram,t.uint32(82).fork()).ldelim(),null!=e.summary&&Object.hasOwnProperty.call(e,"summary")&&f.opentelemetry.proto.metrics.v1.Summary.encode(e.summary,t.uint32(90).fork()).ldelim(),null!=e.metadata&&e.metadata.length)for(var r=0;r<e.metadata.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.metadata[r],t.uint32(98).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Metric;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.name=e.string();break;case 2:o.description=e.string();break;case 3:o.unit=e.string();break;case 5:o.gauge=f.opentelemetry.proto.metrics.v1.Gauge.decode(e,e.uint32());break;case 7:o.sum=f.opentelemetry.proto.metrics.v1.Sum.decode(e,e.uint32());break;case 9:o.histogram=f.opentelemetry.proto.metrics.v1.Histogram.decode(e,e.uint32());break;case 10:o.exponentialHistogram=f.opentelemetry.proto.metrics.v1.ExponentialHistogram.decode(e,e.uint32());break;case 11:o.summary=f.opentelemetry.proto.metrics.v1.Summary.decode(e,e.uint32());break;case 12:o.metadata&&o.metadata.length||(o.metadata=[]),o.metadata.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.name&&e.hasOwnProperty("name")&&!g.isString(e.name))return"name: string expected";if(null!=e.description&&e.hasOwnProperty("description")&&!g.isString(e.description))return"description: string expected";if(null!=e.unit&&e.hasOwnProperty("unit")&&!g.isString(e.unit))return"unit: string expected";if(null!=e.gauge&&e.hasOwnProperty("gauge")&&(t.data=1,n=f.opentelemetry.proto.metrics.v1.Gauge.verify(e.gauge)))return"gauge."+n;if(null!=e.sum&&e.hasOwnProperty("sum")){if(1===t.data)return"data: multiple values";if(t.data=1,n=f.opentelemetry.proto.metrics.v1.Sum.verify(e.sum))return"sum."+n}if(null!=e.histogram&&e.hasOwnProperty("histogram")){if(1===t.data)return"data: multiple values";if(t.data=1,n=f.opentelemetry.proto.metrics.v1.Histogram.verify(e.histogram))return"histogram."+n}if(null!=e.exponentialHistogram&&e.hasOwnProperty("exponentialHistogram")){if(1===t.data)return"data: multiple values";if(t.data=1,n=f.opentelemetry.proto.metrics.v1.ExponentialHistogram.verify(e.exponentialHistogram))return"exponentialHistogram."+n}if(null!=e.summary&&e.hasOwnProperty("summary")){if(1===t.data)return"data: multiple values";if(t.data=1,n=f.opentelemetry.proto.metrics.v1.Summary.verify(e.summary))return"summary."+n}if(null!=e.metadata&&e.hasOwnProperty("metadata")){if(!Array.isArray(e.metadata))return"metadata: array expected";for(var r=0;r<e.metadata.length;++r){var n;if(n=f.opentelemetry.proto.common.v1.KeyValue.verify(e.metadata[r]))return"metadata."+n}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Metric)return e;var t=new f.opentelemetry.proto.metrics.v1.Metric;if(null!=e.name&&(t.name=String(e.name)),null!=e.description&&(t.description=String(e.description)),null!=e.unit&&(t.unit=String(e.unit)),null!=e.gauge){if("object"!=typeof e.gauge)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.gauge: object expected");t.gauge=f.opentelemetry.proto.metrics.v1.Gauge.fromObject(e.gauge)}if(null!=e.sum){if("object"!=typeof e.sum)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.sum: object expected");t.sum=f.opentelemetry.proto.metrics.v1.Sum.fromObject(e.sum)}if(null!=e.histogram){if("object"!=typeof e.histogram)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.histogram: object expected");t.histogram=f.opentelemetry.proto.metrics.v1.Histogram.fromObject(e.histogram)}if(null!=e.exponentialHistogram){if("object"!=typeof e.exponentialHistogram)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.exponentialHistogram: object expected");t.exponentialHistogram=f.opentelemetry.proto.metrics.v1.ExponentialHistogram.fromObject(e.exponentialHistogram)}if(null!=e.summary){if("object"!=typeof e.summary)throw TypeError(".opentelemetry.proto.metrics.v1.Metric.summary: object expected");t.summary=f.opentelemetry.proto.metrics.v1.Summary.fromObject(e.summary)}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: array expected");t.metadata=[];for(var r=0;r<e.metadata.length;++r){if("object"!=typeof e.metadata[r])throw TypeError(".opentelemetry.proto.metrics.v1.Metric.metadata: object expected");t.metadata[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.metadata[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.metadata=[]),t.defaults&&(r.name="",r.description="",r.unit=""),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.description&&e.hasOwnProperty("description")&&(r.description=e.description),null!=e.unit&&e.hasOwnProperty("unit")&&(r.unit=e.unit),null!=e.gauge&&e.hasOwnProperty("gauge")&&(r.gauge=f.opentelemetry.proto.metrics.v1.Gauge.toObject(e.gauge,t),t.oneofs&&(r.data="gauge")),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=f.opentelemetry.proto.metrics.v1.Sum.toObject(e.sum,t),t.oneofs&&(r.data="sum")),null!=e.histogram&&e.hasOwnProperty("histogram")&&(r.histogram=f.opentelemetry.proto.metrics.v1.Histogram.toObject(e.histogram,t),t.oneofs&&(r.data="histogram")),null!=e.exponentialHistogram&&e.hasOwnProperty("exponentialHistogram")&&(r.exponentialHistogram=f.opentelemetry.proto.metrics.v1.ExponentialHistogram.toObject(e.exponentialHistogram,t),t.oneofs&&(r.data="exponentialHistogram")),null!=e.summary&&e.hasOwnProperty("summary")&&(r.summary=f.opentelemetry.proto.metrics.v1.Summary.toObject(e.summary,t),t.oneofs&&(r.data="summary")),e.metadata&&e.metadata.length){r.metadata=[];for(var n=0;n<e.metadata.length;++n)r.metadata[n]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.metadata[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Metric"},e}(),r.Gauge=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)f.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Gauge;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.dataPoints&&o.dataPoints.length||(o.dataPoints=[]),o.dataPoints.push(f.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=f.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Gauge)return e;var t=new f.opentelemetry.proto.metrics.v1.Gauge;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Gauge.dataPoints: object expected");t.dataPoints[r]=f.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(e.dataPoints[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=f.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(e.dataPoints[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Gauge"},e}(),r.Sum=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=g.emptyArray,e.prototype.aggregationTemporality=null,e.prototype.isMonotonic=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)f.opentelemetry.proto.metrics.v1.NumberDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),null!=e.isMonotonic&&Object.hasOwnProperty.call(e,"isMonotonic")&&t.uint32(24).bool(e.isMonotonic),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Sum;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.dataPoints&&o.dataPoints.length||(o.dataPoints=[]),o.dataPoints.push(f.opentelemetry.proto.metrics.v1.NumberDataPoint.decode(e,e.uint32()));break;case 2:o.aggregationTemporality=e.int32();break;case 3:o.isMonotonic=e.bool();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=f.opentelemetry.proto.metrics.v1.NumberDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null!=e.isMonotonic&&e.hasOwnProperty("isMonotonic")&&"boolean"!=typeof e.isMonotonic?"isMonotonic: boolean expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Sum)return e;var t=new f.opentelemetry.proto.metrics.v1.Sum;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Sum.dataPoints: object expected");t.dataPoints[r]=f.opentelemetry.proto.metrics.v1.NumberDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:if("number"==typeof e.aggregationTemporality){t.aggregationTemporality=e.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return null!=e.isMonotonic&&(t.isMonotonic=Boolean(e.isMonotonic)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0,r.isMonotonic=!1),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=f.opentelemetry.proto.metrics.v1.NumberDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),null!=e.isMonotonic&&e.hasOwnProperty("isMonotonic")&&(r.isMonotonic=e.isMonotonic),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Sum"},e}(),r.Histogram=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=g.emptyArray,e.prototype.aggregationTemporality=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)f.opentelemetry.proto.metrics.v1.HistogramDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Histogram;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.dataPoints&&o.dataPoints.length||(o.dataPoints=[]),o.dataPoints.push(f.opentelemetry.proto.metrics.v1.HistogramDataPoint.decode(e,e.uint32()));break;case 2:o.aggregationTemporality=e.int32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=f.opentelemetry.proto.metrics.v1.HistogramDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Histogram)return e;var t=new f.opentelemetry.proto.metrics.v1.Histogram;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Histogram.dataPoints: object expected");t.dataPoints[r]=f.opentelemetry.proto.metrics.v1.HistogramDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:if("number"==typeof e.aggregationTemporality){t.aggregationTemporality=e.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=f.opentelemetry.proto.metrics.v1.HistogramDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Histogram"},e}(),r.ExponentialHistogram=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=g.emptyArray,e.prototype.aggregationTemporality=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return null!=e.aggregationTemporality&&Object.hasOwnProperty.call(e,"aggregationTemporality")&&t.uint32(16).int32(e.aggregationTemporality),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.ExponentialHistogram;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.dataPoints&&o.dataPoints.length||(o.dataPoints=[]),o.dataPoints.push(f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.decode(e,e.uint32()));break;case 2:o.aggregationTemporality=e.int32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}if(null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality"))switch(e.aggregationTemporality){default:return"aggregationTemporality: enum value expected";case 0:case 1:case 2:}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.ExponentialHistogram)return e;var t=new f.opentelemetry.proto.metrics.v1.ExponentialHistogram;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogram.dataPoints: object expected");t.dataPoints[r]=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.fromObject(e.dataPoints[r])}}switch(e.aggregationTemporality){default:if("number"==typeof e.aggregationTemporality){t.aggregationTemporality=e.aggregationTemporality;break}break;case"AGGREGATION_TEMPORALITY_UNSPECIFIED":case 0:t.aggregationTemporality=0;break;case"AGGREGATION_TEMPORALITY_DELTA":case 1:t.aggregationTemporality=1;break;case"AGGREGATION_TEMPORALITY_CUMULATIVE":case 2:t.aggregationTemporality=2}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),t.defaults&&(r.aggregationTemporality=t.enums===String?"AGGREGATION_TEMPORALITY_UNSPECIFIED":0),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.toObject(e.dataPoints[n],t)}return null!=e.aggregationTemporality&&e.hasOwnProperty("aggregationTemporality")&&(r.aggregationTemporality=t.enums===String?void 0===f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]?e.aggregationTemporality:f.opentelemetry.proto.metrics.v1.AggregationTemporality[e.aggregationTemporality]:e.aggregationTemporality),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogram"},e}(),r.Summary=function(){function e(e){if(this.dataPoints=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dataPoints=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.dataPoints&&e.dataPoints.length)for(var r=0;r<e.dataPoints.length;++r)f.opentelemetry.proto.metrics.v1.SummaryDataPoint.encode(e.dataPoints[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Summary;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.dataPoints&&o.dataPoints.length||(o.dataPoints=[]),o.dataPoints.push(f.opentelemetry.proto.metrics.v1.SummaryDataPoint.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.dataPoints&&e.hasOwnProperty("dataPoints")){if(!Array.isArray(e.dataPoints))return"dataPoints: array expected";for(var t=0;t<e.dataPoints.length;++t){var r=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.verify(e.dataPoints[t]);if(r)return"dataPoints."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Summary)return e;var t=new f.opentelemetry.proto.metrics.v1.Summary;if(e.dataPoints){if(!Array.isArray(e.dataPoints))throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: array expected");t.dataPoints=[];for(var r=0;r<e.dataPoints.length;++r){if("object"!=typeof e.dataPoints[r])throw TypeError(".opentelemetry.proto.metrics.v1.Summary.dataPoints: object expected");t.dataPoints[r]=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.fromObject(e.dataPoints[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dataPoints=[]),e.dataPoints&&e.dataPoints.length){r.dataPoints=[];for(var n=0;n<e.dataPoints.length;++n)r.dataPoints[n]=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.toObject(e.dataPoints[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Summary"},e}(),r.AggregationTemporality=(e={},(t=Object.create(e))[e[0]="AGGREGATION_TEMPORALITY_UNSPECIFIED"]=0,t[e[1]="AGGREGATION_TEMPORALITY_DELTA"]=1,t[e[2]="AGGREGATION_TEMPORALITY_CUMULATIVE"]=2,t),r.DataPointFlags=function(){var e={},t=Object.create(e);return t[e[0]="DATA_POINT_FLAGS_DO_NOT_USE"]=0,t[e[1]="DATA_POINT_FLAGS_NO_RECORDED_VALUE_MASK"]=1,t}(),r.NumberDataPoint=function(){function e(e){if(this.attributes=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.attributes=g.emptyArray,e.prototype.startTimeUnixNano=null,e.prototype.timeUnixNano=null,e.prototype.asDouble=null,e.prototype.asInt=null,e.prototype.exemplars=g.emptyArray,e.prototype.flags=null,Object.defineProperty(e.prototype,"value",{get:g.oneOfGetter(t=["asDouble","asInt"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.asDouble&&Object.hasOwnProperty.call(e,"asDouble")&&t.uint32(33).double(e.asDouble),null!=e.exemplars&&e.exemplars.length)for(var r=0;r<e.exemplars.length;++r)f.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(42).fork()).ldelim();if(null!=e.asInt&&Object.hasOwnProperty.call(e,"asInt")&&t.uint32(49).sfixed64(e.asInt),null!=e.attributes&&e.attributes.length)for(r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(58).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(64).uint32(e.flags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.NumberDataPoint;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 7:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.startTimeUnixNano=e.fixed64();break;case 3:o.timeUnixNano=e.fixed64();break;case 4:o.asDouble=e.double();break;case 6:o.asInt=e.sfixed64();break;case 5:o.exemplars&&o.exemplars.length||(o.exemplars=[]),o.exemplars.push(f.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 8:o.flags=e.uint32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r)if(n=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]))return"attributes."+n}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!(g.isInteger(e.startTimeUnixNano)||e.startTimeUnixNano&&g.isInteger(e.startTimeUnixNano.low)&&g.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(t.value=1,"number"!=typeof e.asDouble))return"asDouble: number expected";if(null!=e.asInt&&e.hasOwnProperty("asInt")){if(1===t.value)return"value: multiple values";if(t.value=1,!(g.isInteger(e.asInt)||e.asInt&&g.isInteger(e.asInt.low)&&g.isInteger(e.asInt.high)))return"asInt: integer|Long expected"}if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(r=0;r<e.exemplars.length;++r){var n;if(n=f.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]))return"exemplars."+n}}return null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags)?"flags: integer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.NumberDataPoint)return e;var t=new f.opentelemetry.proto.metrics.v1.NumberDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(g.Long?(t.startTimeUnixNano=g.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.asDouble&&(t.asDouble=Number(e.asDouble)),null!=e.asInt&&(g.Long?(t.asInt=g.Long.fromValue(e.asInt)).unsigned=!1:"string"==typeof e.asInt?t.asInt=parseInt(e.asInt,10):"number"==typeof e.asInt?t.asInt=e.asInt:"object"==typeof e.asInt&&(t.asInt=new g.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber())),e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: array expected");for(t.exemplars=[],r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.NumberDataPoint.exemplars: object expected");t.exemplars[r]=f.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.exemplars=[],r.attributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;g.Long?(n=new g.Long(0,0,!1),r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.timeUnixNano=t.longs===String?"0":0,r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(r.asDouble=t.json&&!isFinite(e.asDouble)?String(e.asDouble):e.asDouble,t.oneofs&&(r.value="asDouble")),e.exemplars&&e.exemplars.length){r.exemplars=[];for(var o=0;o<e.exemplars.length;++o)r.exemplars[o]=f.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t)}if(null!=e.asInt&&e.hasOwnProperty("asInt")&&("number"==typeof e.asInt?r.asInt=t.longs===String?String(e.asInt):e.asInt:r.asInt=t.longs===String?g.Long.prototype.toString.call(e.asInt):t.longs===Number?new g.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber():e.asInt,t.oneofs&&(r.value="asInt")),e.attributes&&e.attributes.length)for(r.attributes=[],o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t);return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.NumberDataPoint"},e}(),r.HistogramDataPoint=function(){function e(e){if(this.attributes=[],this.bucketCounts=[],this.explicitBounds=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.attributes=g.emptyArray,e.prototype.startTimeUnixNano=null,e.prototype.timeUnixNano=null,e.prototype.count=null,e.prototype.sum=null,e.prototype.bucketCounts=g.emptyArray,e.prototype.explicitBounds=g.emptyArray,e.prototype.exemplars=g.emptyArray,e.prototype.flags=null,e.prototype.min=null,e.prototype.max=null,Object.defineProperty(e.prototype,"_sum",{get:g.oneOfGetter(t=["sum"]),set:g.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_min",{get:g.oneOfGetter(t=["min"]),set:g.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_max",{get:g.oneOfGetter(t=["max"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.bucketCounts&&e.bucketCounts.length){t.uint32(50).fork();for(var r=0;r<e.bucketCounts.length;++r)t.fixed64(e.bucketCounts[r]);t.ldelim()}if(null!=e.explicitBounds&&e.explicitBounds.length){for(t.uint32(58).fork(),r=0;r<e.explicitBounds.length;++r)t.double(e.explicitBounds[r]);t.ldelim()}if(null!=e.exemplars&&e.exemplars.length)for(r=0;r<e.exemplars.length;++r)f.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(66).fork()).ldelim();if(null!=e.attributes&&e.attributes.length)for(r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(74).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(80).uint32(e.flags),null!=e.min&&Object.hasOwnProperty.call(e,"min")&&t.uint32(89).double(e.min),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(97).double(e.max),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.HistogramDataPoint;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 9:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.startTimeUnixNano=e.fixed64();break;case 3:o.timeUnixNano=e.fixed64();break;case 4:o.count=e.fixed64();break;case 5:o.sum=e.double();break;case 6:if(o.bucketCounts&&o.bucketCounts.length||(o.bucketCounts=[]),2==(7&s))for(var i=e.uint32()+e.pos;e.pos<i;)o.bucketCounts.push(e.fixed64());else o.bucketCounts.push(e.fixed64());break;case 7:if(o.explicitBounds&&o.explicitBounds.length||(o.explicitBounds=[]),2==(7&s))for(i=e.uint32()+e.pos;e.pos<i;)o.explicitBounds.push(e.double());else o.explicitBounds.push(e.double());break;case 8:o.exemplars&&o.exemplars.length||(o.exemplars=[]),o.exemplars.push(f.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 10:o.flags=e.uint32();break;case 11:o.min=e.double();break;case 12:o.max=e.double();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r)if(n=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]))return"attributes."+n}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!(g.isInteger(e.startTimeUnixNano)||e.startTimeUnixNano&&g.isInteger(e.startTimeUnixNano.low)&&g.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!(g.isInteger(e.count)||e.count&&g.isInteger(e.count.low)&&g.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&(t._sum=1,"number"!=typeof e.sum))return"sum: number expected";if(null!=e.bucketCounts&&e.hasOwnProperty("bucketCounts")){if(!Array.isArray(e.bucketCounts))return"bucketCounts: array expected";for(r=0;r<e.bucketCounts.length;++r)if(!(g.isInteger(e.bucketCounts[r])||e.bucketCounts[r]&&g.isInteger(e.bucketCounts[r].low)&&g.isInteger(e.bucketCounts[r].high)))return"bucketCounts: integer|Long[] expected"}if(null!=e.explicitBounds&&e.hasOwnProperty("explicitBounds")){if(!Array.isArray(e.explicitBounds))return"explicitBounds: array expected";for(r=0;r<e.explicitBounds.length;++r)if("number"!=typeof e.explicitBounds[r])return"explicitBounds: number[] expected"}if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(r=0;r<e.exemplars.length;++r){var n;if(n=f.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]))return"exemplars."+n}}return null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags)?"flags: integer expected":null!=e.min&&e.hasOwnProperty("min")&&(t._min=1,"number"!=typeof e.min)?"min: number expected":null!=e.max&&e.hasOwnProperty("max")&&(t._max=1,"number"!=typeof e.max)?"max: number expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.HistogramDataPoint)return e;var t=new f.opentelemetry.proto.metrics.v1.HistogramDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(g.Long?(t.startTimeUnixNano=g.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(g.Long?(t.count=g.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),e.bucketCounts){if(!Array.isArray(e.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.bucketCounts: array expected");for(t.bucketCounts=[],r=0;r<e.bucketCounts.length;++r)g.Long?(t.bucketCounts[r]=g.Long.fromValue(e.bucketCounts[r])).unsigned=!1:"string"==typeof e.bucketCounts[r]?t.bucketCounts[r]=parseInt(e.bucketCounts[r],10):"number"==typeof e.bucketCounts[r]?t.bucketCounts[r]=e.bucketCounts[r]:"object"==typeof e.bucketCounts[r]&&(t.bucketCounts[r]=new g.LongBits(e.bucketCounts[r].low>>>0,e.bucketCounts[r].high>>>0).toNumber())}if(e.explicitBounds){if(!Array.isArray(e.explicitBounds))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.explicitBounds: array expected");for(t.explicitBounds=[],r=0;r<e.explicitBounds.length;++r)t.explicitBounds[r]=Number(e.explicitBounds[r])}if(e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: array expected");for(t.exemplars=[],r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.HistogramDataPoint.exemplars: object expected");t.exemplars[r]=f.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),null!=e.min&&(t.min=Number(e.min)),null!=e.max&&(t.max=Number(e.max)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bucketCounts=[],r.explicitBounds=[],r.exemplars=[],r.attributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;g.Long?(n=new g.Long(0,0,!1),r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.timeUnixNano=t.longs===String?"0":0,g.Long?(n=new g.Long(0,0,!1),r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.count=t.longs===String?"0":0,r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?g.Long.prototype.toString.call(e.count):t.longs===Number?new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum,t.oneofs&&(r._sum="sum")),e.bucketCounts&&e.bucketCounts.length){r.bucketCounts=[];for(var o=0;o<e.bucketCounts.length;++o)"number"==typeof e.bucketCounts[o]?r.bucketCounts[o]=t.longs===String?String(e.bucketCounts[o]):e.bucketCounts[o]:r.bucketCounts[o]=t.longs===String?g.Long.prototype.toString.call(e.bucketCounts[o]):t.longs===Number?new g.LongBits(e.bucketCounts[o].low>>>0,e.bucketCounts[o].high>>>0).toNumber():e.bucketCounts[o]}if(e.explicitBounds&&e.explicitBounds.length)for(r.explicitBounds=[],o=0;o<e.explicitBounds.length;++o)r.explicitBounds[o]=t.json&&!isFinite(e.explicitBounds[o])?String(e.explicitBounds[o]):e.explicitBounds[o];if(e.exemplars&&e.exemplars.length)for(r.exemplars=[],o=0;o<e.exemplars.length;++o)r.exemplars[o]=f.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t);if(e.attributes&&e.attributes.length)for(r.attributes=[],o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t);return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),null!=e.min&&e.hasOwnProperty("min")&&(r.min=t.json&&!isFinite(e.min)?String(e.min):e.min,t.oneofs&&(r._min="min")),null!=e.max&&e.hasOwnProperty("max")&&(r.max=t.json&&!isFinite(e.max)?String(e.max):e.max,t.oneofs&&(r._max="max")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.HistogramDataPoint"},e}(),r.ExponentialHistogramDataPoint=function(){function e(e){if(this.attributes=[],this.exemplars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.attributes=g.emptyArray,e.prototype.startTimeUnixNano=null,e.prototype.timeUnixNano=null,e.prototype.count=null,e.prototype.sum=null,e.prototype.scale=null,e.prototype.zeroCount=null,e.prototype.positive=null,e.prototype.negative=null,e.prototype.flags=null,e.prototype.exemplars=g.emptyArray,e.prototype.min=null,e.prototype.max=null,e.prototype.zeroThreshold=null,Object.defineProperty(e.prototype,"_sum",{get:g.oneOfGetter(t=["sum"]),set:g.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_min",{get:g.oneOfGetter(t=["min"]),set:g.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_max",{get:g.oneOfGetter(t=["max"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(10).fork()).ldelim();if(null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&t.uint32(48).sint32(e.scale),null!=e.zeroCount&&Object.hasOwnProperty.call(e,"zeroCount")&&t.uint32(57).fixed64(e.zeroCount),null!=e.positive&&Object.hasOwnProperty.call(e,"positive")&&f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(e.positive,t.uint32(66).fork()).ldelim(),null!=e.negative&&Object.hasOwnProperty.call(e,"negative")&&f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.encode(e.negative,t.uint32(74).fork()).ldelim(),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(80).uint32(e.flags),null!=e.exemplars&&e.exemplars.length)for(r=0;r<e.exemplars.length;++r)f.opentelemetry.proto.metrics.v1.Exemplar.encode(e.exemplars[r],t.uint32(90).fork()).ldelim();return null!=e.min&&Object.hasOwnProperty.call(e,"min")&&t.uint32(97).double(e.min),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(105).double(e.max),null!=e.zeroThreshold&&Object.hasOwnProperty.call(e,"zeroThreshold")&&t.uint32(113).double(e.zeroThreshold),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.startTimeUnixNano=e.fixed64();break;case 3:o.timeUnixNano=e.fixed64();break;case 4:o.count=e.fixed64();break;case 5:o.sum=e.double();break;case 6:o.scale=e.sint32();break;case 7:o.zeroCount=e.fixed64();break;case 8:o.positive=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(e,e.uint32());break;case 9:o.negative=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.decode(e,e.uint32());break;case 10:o.flags=e.uint32();break;case 11:o.exemplars&&o.exemplars.length||(o.exemplars=[]),o.exemplars.push(f.opentelemetry.proto.metrics.v1.Exemplar.decode(e,e.uint32()));break;case 12:o.min=e.double();break;case 13:o.max=e.double();break;case 14:o.zeroThreshold=e.double();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var r=0;r<e.attributes.length;++r)if(n=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[r]))return"attributes."+n}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!(g.isInteger(e.startTimeUnixNano)||e.startTimeUnixNano&&g.isInteger(e.startTimeUnixNano.low)&&g.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!(g.isInteger(e.count)||e.count&&g.isInteger(e.count.low)&&g.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&(t._sum=1,"number"!=typeof e.sum))return"sum: number expected";if(null!=e.scale&&e.hasOwnProperty("scale")&&!g.isInteger(e.scale))return"scale: integer expected";if(null!=e.zeroCount&&e.hasOwnProperty("zeroCount")&&!(g.isInteger(e.zeroCount)||e.zeroCount&&g.isInteger(e.zeroCount.low)&&g.isInteger(e.zeroCount.high)))return"zeroCount: integer|Long expected";if(null!=e.positive&&e.hasOwnProperty("positive")&&(n=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(e.positive)))return"positive."+n;if(null!=e.negative&&e.hasOwnProperty("negative")&&(n=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.verify(e.negative)))return"negative."+n;if(null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags))return"flags: integer expected";if(null!=e.exemplars&&e.hasOwnProperty("exemplars")){if(!Array.isArray(e.exemplars))return"exemplars: array expected";for(r=0;r<e.exemplars.length;++r){var n;if(n=f.opentelemetry.proto.metrics.v1.Exemplar.verify(e.exemplars[r]))return"exemplars."+n}}return null!=e.min&&e.hasOwnProperty("min")&&(t._min=1,"number"!=typeof e.min)?"min: number expected":null!=e.max&&e.hasOwnProperty("max")&&(t._max=1,"number"!=typeof e.max)?"max: number expected":null!=e.zeroThreshold&&e.hasOwnProperty("zeroThreshold")&&"number"!=typeof e.zeroThreshold?"zeroThreshold: number expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint)return e;var t=new f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(g.Long?(t.startTimeUnixNano=g.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(g.Long?(t.count=g.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),null!=e.scale&&(t.scale=0|e.scale),null!=e.zeroCount&&(g.Long?(t.zeroCount=g.Long.fromValue(e.zeroCount)).unsigned=!1:"string"==typeof e.zeroCount?t.zeroCount=parseInt(e.zeroCount,10):"number"==typeof e.zeroCount?t.zeroCount=e.zeroCount:"object"==typeof e.zeroCount&&(t.zeroCount=new g.LongBits(e.zeroCount.low>>>0,e.zeroCount.high>>>0).toNumber())),null!=e.positive){if("object"!=typeof e.positive)throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.positive: object expected");t.positive=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(e.positive)}if(null!=e.negative){if("object"!=typeof e.negative)throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.negative: object expected");t.negative=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.fromObject(e.negative)}if(null!=e.flags&&(t.flags=e.flags>>>0),e.exemplars){if(!Array.isArray(e.exemplars))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: array expected");for(t.exemplars=[],r=0;r<e.exemplars.length;++r){if("object"!=typeof e.exemplars[r])throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.exemplars: object expected");t.exemplars[r]=f.opentelemetry.proto.metrics.v1.Exemplar.fromObject(e.exemplars[r])}}return null!=e.min&&(t.min=Number(e.min)),null!=e.max&&(t.max=Number(e.max)),null!=e.zeroThreshold&&(t.zeroThreshold=Number(e.zeroThreshold)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[],r.exemplars=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;g.Long?(n=new g.Long(0,0,!1),r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.timeUnixNano=t.longs===String?"0":0,g.Long?(n=new g.Long(0,0,!1),r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.count=t.longs===String?"0":0,r.scale=0,g.Long?(n=new g.Long(0,0,!1),r.zeroCount=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.zeroCount=t.longs===String?"0":0,r.positive=null,r.negative=null,r.flags=0,r.zeroThreshold=0}if(e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?g.Long.prototype.toString.call(e.count):t.longs===Number?new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum,t.oneofs&&(r._sum="sum")),null!=e.scale&&e.hasOwnProperty("scale")&&(r.scale=e.scale),null!=e.zeroCount&&e.hasOwnProperty("zeroCount")&&("number"==typeof e.zeroCount?r.zeroCount=t.longs===String?String(e.zeroCount):e.zeroCount:r.zeroCount=t.longs===String?g.Long.prototype.toString.call(e.zeroCount):t.longs===Number?new g.LongBits(e.zeroCount.low>>>0,e.zeroCount.high>>>0).toNumber():e.zeroCount),null!=e.positive&&e.hasOwnProperty("positive")&&(r.positive=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(e.positive,t)),null!=e.negative&&e.hasOwnProperty("negative")&&(r.negative=f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.toObject(e.negative,t)),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),e.exemplars&&e.exemplars.length)for(r.exemplars=[],o=0;o<e.exemplars.length;++o)r.exemplars[o]=f.opentelemetry.proto.metrics.v1.Exemplar.toObject(e.exemplars[o],t);return null!=e.min&&e.hasOwnProperty("min")&&(r.min=t.json&&!isFinite(e.min)?String(e.min):e.min,t.oneofs&&(r._min="min")),null!=e.max&&e.hasOwnProperty("max")&&(r.max=t.json&&!isFinite(e.max)?String(e.max):e.max,t.oneofs&&(r._max="max")),null!=e.zeroThreshold&&e.hasOwnProperty("zeroThreshold")&&(r.zeroThreshold=t.json&&!isFinite(e.zeroThreshold)?String(e.zeroThreshold):e.zeroThreshold),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint"},e.Buckets=function(){function e(e){if(this.bucketCounts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.offset=null,e.prototype.bucketCounts=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(8).sint32(e.offset),null!=e.bucketCounts&&e.bucketCounts.length){t.uint32(18).fork();for(var r=0;r<e.bucketCounts.length;++r)t.uint64(e.bucketCounts[r]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.offset=e.sint32();break;case 2:if(o.bucketCounts&&o.bucketCounts.length||(o.bucketCounts=[]),2==(7&s))for(var i=e.uint32()+e.pos;e.pos<i;)o.bucketCounts.push(e.uint64());else o.bucketCounts.push(e.uint64());break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.offset&&e.hasOwnProperty("offset")&&!g.isInteger(e.offset))return"offset: integer expected";if(null!=e.bucketCounts&&e.hasOwnProperty("bucketCounts")){if(!Array.isArray(e.bucketCounts))return"bucketCounts: array expected";for(var t=0;t<e.bucketCounts.length;++t)if(!(g.isInteger(e.bucketCounts[t])||e.bucketCounts[t]&&g.isInteger(e.bucketCounts[t].low)&&g.isInteger(e.bucketCounts[t].high)))return"bucketCounts: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets)return e;var t=new f.opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets;if(null!=e.offset&&(t.offset=0|e.offset),e.bucketCounts){if(!Array.isArray(e.bucketCounts))throw TypeError(".opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets.bucketCounts: array expected");t.bucketCounts=[];for(var r=0;r<e.bucketCounts.length;++r)g.Long?(t.bucketCounts[r]=g.Long.fromValue(e.bucketCounts[r])).unsigned=!0:"string"==typeof e.bucketCounts[r]?t.bucketCounts[r]=parseInt(e.bucketCounts[r],10):"number"==typeof e.bucketCounts[r]?t.bucketCounts[r]=e.bucketCounts[r]:"object"==typeof e.bucketCounts[r]&&(t.bucketCounts[r]=new g.LongBits(e.bucketCounts[r].low>>>0,e.bucketCounts[r].high>>>0).toNumber(!0))}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.bucketCounts=[]),t.defaults&&(r.offset=0),null!=e.offset&&e.hasOwnProperty("offset")&&(r.offset=e.offset),e.bucketCounts&&e.bucketCounts.length){r.bucketCounts=[];for(var n=0;n<e.bucketCounts.length;++n)"number"==typeof e.bucketCounts[n]?r.bucketCounts[n]=t.longs===String?String(e.bucketCounts[n]):e.bucketCounts[n]:r.bucketCounts[n]=t.longs===String?g.Long.prototype.toString.call(e.bucketCounts[n]):t.longs===Number?new g.LongBits(e.bucketCounts[n].low>>>0,e.bucketCounts[n].high>>>0).toNumber(!0):e.bucketCounts[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.ExponentialHistogramDataPoint.Buckets"},e}(),e}(),r.SummaryDataPoint=function(){function e(e){if(this.attributes=[],this.quantileValues=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.attributes=g.emptyArray,e.prototype.startTimeUnixNano=null,e.prototype.timeUnixNano=null,e.prototype.count=null,e.prototype.sum=null,e.prototype.quantileValues=g.emptyArray,e.prototype.flags=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.startTimeUnixNano&&Object.hasOwnProperty.call(e,"startTimeUnixNano")&&t.uint32(17).fixed64(e.startTimeUnixNano),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(25).fixed64(e.timeUnixNano),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(33).fixed64(e.count),null!=e.sum&&Object.hasOwnProperty.call(e,"sum")&&t.uint32(41).double(e.sum),null!=e.quantileValues&&e.quantileValues.length)for(var r=0;r<e.quantileValues.length;++r)f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.encode(e.quantileValues[r],t.uint32(50).fork()).ldelim();if(null!=e.attributes&&e.attributes.length)for(r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(58).fork()).ldelim();return null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(64).uint32(e.flags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.SummaryDataPoint;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 7:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.startTimeUnixNano=e.fixed64();break;case 3:o.timeUnixNano=e.fixed64();break;case 4:o.count=e.fixed64();break;case 5:o.sum=e.double();break;case 6:o.quantileValues&&o.quantileValues.length||(o.quantileValues=[]),o.quantileValues.push(f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.decode(e,e.uint32()));break;case 8:o.flags=e.uint32();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t)if(r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]))return"attributes."+r}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&!(g.isInteger(e.startTimeUnixNano)||e.startTimeUnixNano&&g.isInteger(e.startTimeUnixNano.low)&&g.isInteger(e.startTimeUnixNano.high)))return"startTimeUnixNano: integer|Long expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.count&&e.hasOwnProperty("count")&&!(g.isInteger(e.count)||e.count&&g.isInteger(e.count.low)&&g.isInteger(e.count.high)))return"count: integer|Long expected";if(null!=e.sum&&e.hasOwnProperty("sum")&&"number"!=typeof e.sum)return"sum: number expected";if(null!=e.quantileValues&&e.hasOwnProperty("quantileValues")){if(!Array.isArray(e.quantileValues))return"quantileValues: array expected";for(t=0;t<e.quantileValues.length;++t){var r;if(r=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.verify(e.quantileValues[t]))return"quantileValues."+r}}return null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags)?"flags: integer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.SummaryDataPoint)return e;var t=new f.opentelemetry.proto.metrics.v1.SummaryDataPoint;if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}if(null!=e.startTimeUnixNano&&(g.Long?(t.startTimeUnixNano=g.Long.fromValue(e.startTimeUnixNano)).unsigned=!1:"string"==typeof e.startTimeUnixNano?t.startTimeUnixNano=parseInt(e.startTimeUnixNano,10):"number"==typeof e.startTimeUnixNano?t.startTimeUnixNano=e.startTimeUnixNano:"object"==typeof e.startTimeUnixNano&&(t.startTimeUnixNano=new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber())),null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.count&&(g.Long?(t.count=g.Long.fromValue(e.count)).unsigned=!1:"string"==typeof e.count?t.count=parseInt(e.count,10):"number"==typeof e.count?t.count=e.count:"object"==typeof e.count&&(t.count=new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber())),null!=e.sum&&(t.sum=Number(e.sum)),e.quantileValues){if(!Array.isArray(e.quantileValues))throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: array expected");for(t.quantileValues=[],r=0;r<e.quantileValues.length;++r){if("object"!=typeof e.quantileValues[r])throw TypeError(".opentelemetry.proto.metrics.v1.SummaryDataPoint.quantileValues: object expected");t.quantileValues[r]=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.fromObject(e.quantileValues[r])}}return null!=e.flags&&(t.flags=e.flags>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.quantileValues=[],r.attributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.startTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.startTimeUnixNano=t.longs===String?"0":0;g.Long?(n=new g.Long(0,0,!1),r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.timeUnixNano=t.longs===String?"0":0,g.Long?(n=new g.Long(0,0,!1),r.count=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.count=t.longs===String?"0":0,r.sum=0,r.flags=0}if(null!=e.startTimeUnixNano&&e.hasOwnProperty("startTimeUnixNano")&&("number"==typeof e.startTimeUnixNano?r.startTimeUnixNano=t.longs===String?String(e.startTimeUnixNano):e.startTimeUnixNano:r.startTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.startTimeUnixNano):t.longs===Number?new g.LongBits(e.startTimeUnixNano.low>>>0,e.startTimeUnixNano.high>>>0).toNumber():e.startTimeUnixNano),null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.count&&e.hasOwnProperty("count")&&("number"==typeof e.count?r.count=t.longs===String?String(e.count):e.count:r.count=t.longs===String?g.Long.prototype.toString.call(e.count):t.longs===Number?new g.LongBits(e.count.low>>>0,e.count.high>>>0).toNumber():e.count),null!=e.sum&&e.hasOwnProperty("sum")&&(r.sum=t.json&&!isFinite(e.sum)?String(e.sum):e.sum),e.quantileValues&&e.quantileValues.length){r.quantileValues=[];for(var o=0;o<e.quantileValues.length;++o)r.quantileValues[o]=f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile.toObject(e.quantileValues[o],t)}if(e.attributes&&e.attributes.length)for(r.attributes=[],o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t);return null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.SummaryDataPoint"},e.ValueAtQuantile=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.quantile=null,e.prototype.value=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=h.create()),null!=e.quantile&&Object.hasOwnProperty.call(e,"quantile")&&t.uint32(9).double(e.quantile),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.quantile=e.double();break;case 2:o.value=e.double();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.quantile&&e.hasOwnProperty("quantile")&&"number"!=typeof e.quantile?"quantile: number expected":null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile)return e;var t=new f.opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile;return null!=e.quantile&&(t.quantile=Number(e.quantile)),null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.quantile=0,r.value=0),null!=e.quantile&&e.hasOwnProperty("quantile")&&(r.quantile=t.json&&!isFinite(e.quantile)?String(e.quantile):e.quantile),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.json&&!isFinite(e.value)?String(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.SummaryDataPoint.ValueAtQuantile"},e}(),e}(),r.Exemplar=function(){function e(e){if(this.filteredAttributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.filteredAttributes=g.emptyArray,e.prototype.timeUnixNano=null,e.prototype.asDouble=null,e.prototype.asInt=null,e.prototype.spanId=null,e.prototype.traceId=null,Object.defineProperty(e.prototype,"value",{get:g.oneOfGetter(t=["asDouble","asInt"]),set:g.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(17).fixed64(e.timeUnixNano),null!=e.asDouble&&Object.hasOwnProperty.call(e,"asDouble")&&t.uint32(25).double(e.asDouble),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(34).bytes(e.spanId),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(42).bytes(e.traceId),null!=e.asInt&&Object.hasOwnProperty.call(e,"asInt")&&t.uint32(49).sfixed64(e.asInt),null!=e.filteredAttributes&&e.filteredAttributes.length)for(var r=0;r<e.filteredAttributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.filteredAttributes[r],t.uint32(58).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.metrics.v1.Exemplar;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 7:o.filteredAttributes&&o.filteredAttributes.length||(o.filteredAttributes=[]),o.filteredAttributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 2:o.timeUnixNano=e.fixed64();break;case 3:o.asDouble=e.double();break;case 6:o.asInt=e.sfixed64();break;case 4:o.spanId=e.bytes();break;case 5:o.traceId=e.bytes();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(null!=e.filteredAttributes&&e.hasOwnProperty("filteredAttributes")){if(!Array.isArray(e.filteredAttributes))return"filteredAttributes: array expected";for(var r=0;r<e.filteredAttributes.length;++r){var n=f.opentelemetry.proto.common.v1.KeyValue.verify(e.filteredAttributes[r]);if(n)return"filteredAttributes."+n}}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(t.value=1,"number"!=typeof e.asDouble))return"asDouble: number expected";if(null!=e.asInt&&e.hasOwnProperty("asInt")){if(1===t.value)return"value: multiple values";if(t.value=1,!(g.isInteger(e.asInt)||e.asInt&&g.isInteger(e.asInt.low)&&g.isInteger(e.asInt.high)))return"asInt: integer|Long expected"}return null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||g.isString(e.spanId))?"spanId: buffer expected":null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||g.isString(e.traceId))?"traceId: buffer expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.metrics.v1.Exemplar)return e;var t=new f.opentelemetry.proto.metrics.v1.Exemplar;if(e.filteredAttributes){if(!Array.isArray(e.filteredAttributes))throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: array expected");t.filteredAttributes=[];for(var r=0;r<e.filteredAttributes.length;++r){if("object"!=typeof e.filteredAttributes[r])throw TypeError(".opentelemetry.proto.metrics.v1.Exemplar.filteredAttributes: object expected");t.filteredAttributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.filteredAttributes[r])}}return null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.asDouble&&(t.asDouble=Number(e.asDouble)),null!=e.asInt&&(g.Long?(t.asInt=g.Long.fromValue(e.asInt)).unsigned=!1:"string"==typeof e.asInt?t.asInt=parseInt(e.asInt,10):"number"==typeof e.asInt?t.asInt=e.asInt:"object"==typeof e.asInt&&(t.asInt=new g.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber())),null!=e.spanId&&("string"==typeof e.spanId?g.base64.decode(e.spanId,t.spanId=g.newBuffer(g.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.traceId&&("string"==typeof e.traceId?g.base64.decode(e.traceId,t.traceId=g.newBuffer(g.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.filteredAttributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=g.newBuffer(r.spanId))),t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=g.newBuffer(r.traceId)))}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.asDouble&&e.hasOwnProperty("asDouble")&&(r.asDouble=t.json&&!isFinite(e.asDouble)?String(e.asDouble):e.asDouble,t.oneofs&&(r.value="asDouble")),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?g.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?g.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.asInt&&e.hasOwnProperty("asInt")&&("number"==typeof e.asInt?r.asInt=t.longs===String?String(e.asInt):e.asInt:r.asInt=t.longs===String?g.Long.prototype.toString.call(e.asInt):t.longs===Number?new g.LongBits(e.asInt.low>>>0,e.asInt.high>>>0).toNumber():e.asInt,t.oneofs&&(r.value="asInt")),e.filteredAttributes&&e.filteredAttributes.length){r.filteredAttributes=[];for(var o=0;o<e.filteredAttributes.length;++o)r.filteredAttributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.filteredAttributes[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.metrics.v1.Exemplar"},e}(),r}(),e}(),u.logs=function(){var e={};return e.v1=function(){var e,t,r={};return r.LogsData=function(){function e(e){if(this.resourceLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resourceLogs=g.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resourceLogs&&e.resourceLogs.length)for(var r=0;r<e.resourceLogs.length;++r)f.opentelemetry.proto.logs.v1.ResourceLogs.encode(e.resourceLogs[r],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.logs.v1.LogsData;e.pos<n;){var s=e.uint32();if(s===r)break;s>>>3==1?(o.resourceLogs&&o.resourceLogs.length||(o.resourceLogs=[]),o.resourceLogs.push(f.opentelemetry.proto.logs.v1.ResourceLogs.decode(e,e.uint32()))):e.skipType(7&s)}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resourceLogs&&e.hasOwnProperty("resourceLogs")){if(!Array.isArray(e.resourceLogs))return"resourceLogs: array expected";for(var t=0;t<e.resourceLogs.length;++t){var r=f.opentelemetry.proto.logs.v1.ResourceLogs.verify(e.resourceLogs[t]);if(r)return"resourceLogs."+r}}return null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.logs.v1.LogsData)return e;var t=new f.opentelemetry.proto.logs.v1.LogsData;if(e.resourceLogs){if(!Array.isArray(e.resourceLogs))throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: array expected");t.resourceLogs=[];for(var r=0;r<e.resourceLogs.length;++r){if("object"!=typeof e.resourceLogs[r])throw TypeError(".opentelemetry.proto.logs.v1.LogsData.resourceLogs: object expected");t.resourceLogs[r]=f.opentelemetry.proto.logs.v1.ResourceLogs.fromObject(e.resourceLogs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.resourceLogs=[]),e.resourceLogs&&e.resourceLogs.length){r.resourceLogs=[];for(var n=0;n<e.resourceLogs.length;++n)r.resourceLogs[n]=f.opentelemetry.proto.logs.v1.ResourceLogs.toObject(e.resourceLogs[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.LogsData"},e}(),r.ResourceLogs=function(){function e(e){if(this.scopeLogs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.resource=null,e.prototype.scopeLogs=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.resource&&Object.hasOwnProperty.call(e,"resource")&&f.opentelemetry.proto.resource.v1.Resource.encode(e.resource,t.uint32(10).fork()).ldelim(),null!=e.scopeLogs&&e.scopeLogs.length)for(var r=0;r<e.scopeLogs.length;++r)f.opentelemetry.proto.logs.v1.ScopeLogs.encode(e.scopeLogs[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.logs.v1.ResourceLogs;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.resource=f.opentelemetry.proto.resource.v1.Resource.decode(e,e.uint32());break;case 2:o.scopeLogs&&o.scopeLogs.length||(o.scopeLogs=[]),o.scopeLogs.push(f.opentelemetry.proto.logs.v1.ScopeLogs.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.resource&&e.hasOwnProperty("resource")&&(r=f.opentelemetry.proto.resource.v1.Resource.verify(e.resource)))return"resource."+r;if(null!=e.scopeLogs&&e.hasOwnProperty("scopeLogs")){if(!Array.isArray(e.scopeLogs))return"scopeLogs: array expected";for(var t=0;t<e.scopeLogs.length;++t){var r;if(r=f.opentelemetry.proto.logs.v1.ScopeLogs.verify(e.scopeLogs[t]))return"scopeLogs."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.logs.v1.ResourceLogs)return e;var t=new f.opentelemetry.proto.logs.v1.ResourceLogs;if(null!=e.resource){if("object"!=typeof e.resource)throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.resource: object expected");t.resource=f.opentelemetry.proto.resource.v1.Resource.fromObject(e.resource)}if(e.scopeLogs){if(!Array.isArray(e.scopeLogs))throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: array expected");t.scopeLogs=[];for(var r=0;r<e.scopeLogs.length;++r){if("object"!=typeof e.scopeLogs[r])throw TypeError(".opentelemetry.proto.logs.v1.ResourceLogs.scopeLogs: object expected");t.scopeLogs[r]=f.opentelemetry.proto.logs.v1.ScopeLogs.fromObject(e.scopeLogs[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.scopeLogs=[]),t.defaults&&(r.resource=null,r.schemaUrl=""),null!=e.resource&&e.hasOwnProperty("resource")&&(r.resource=f.opentelemetry.proto.resource.v1.Resource.toObject(e.resource,t)),e.scopeLogs&&e.scopeLogs.length){r.scopeLogs=[];for(var n=0;n<e.scopeLogs.length;++n)r.scopeLogs[n]=f.opentelemetry.proto.logs.v1.ScopeLogs.toObject(e.scopeLogs[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.ResourceLogs"},e}(),r.ScopeLogs=function(){function e(e){if(this.logRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scope=null,e.prototype.logRecords=g.emptyArray,e.prototype.schemaUrl=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.scope&&Object.hasOwnProperty.call(e,"scope")&&f.opentelemetry.proto.common.v1.InstrumentationScope.encode(e.scope,t.uint32(10).fork()).ldelim(),null!=e.logRecords&&e.logRecords.length)for(var r=0;r<e.logRecords.length;++r)f.opentelemetry.proto.logs.v1.LogRecord.encode(e.logRecords[r],t.uint32(18).fork()).ldelim();return null!=e.schemaUrl&&Object.hasOwnProperty.call(e,"schemaUrl")&&t.uint32(26).string(e.schemaUrl),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.logs.v1.ScopeLogs;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.decode(e,e.uint32());break;case 2:o.logRecords&&o.logRecords.length||(o.logRecords=[]),o.logRecords.push(f.opentelemetry.proto.logs.v1.LogRecord.decode(e,e.uint32()));break;case 3:o.schemaUrl=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.scope&&e.hasOwnProperty("scope")&&(r=f.opentelemetry.proto.common.v1.InstrumentationScope.verify(e.scope)))return"scope."+r;if(null!=e.logRecords&&e.hasOwnProperty("logRecords")){if(!Array.isArray(e.logRecords))return"logRecords: array expected";for(var t=0;t<e.logRecords.length;++t){var r;if(r=f.opentelemetry.proto.logs.v1.LogRecord.verify(e.logRecords[t]))return"logRecords."+r}}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&!g.isString(e.schemaUrl)?"schemaUrl: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.logs.v1.ScopeLogs)return e;var t=new f.opentelemetry.proto.logs.v1.ScopeLogs;if(null!=e.scope){if("object"!=typeof e.scope)throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.scope: object expected");t.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.fromObject(e.scope)}if(e.logRecords){if(!Array.isArray(e.logRecords))throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: array expected");t.logRecords=[];for(var r=0;r<e.logRecords.length;++r){if("object"!=typeof e.logRecords[r])throw TypeError(".opentelemetry.proto.logs.v1.ScopeLogs.logRecords: object expected");t.logRecords[r]=f.opentelemetry.proto.logs.v1.LogRecord.fromObject(e.logRecords[r])}}return null!=e.schemaUrl&&(t.schemaUrl=String(e.schemaUrl)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.logRecords=[]),t.defaults&&(r.scope=null,r.schemaUrl=""),null!=e.scope&&e.hasOwnProperty("scope")&&(r.scope=f.opentelemetry.proto.common.v1.InstrumentationScope.toObject(e.scope,t)),e.logRecords&&e.logRecords.length){r.logRecords=[];for(var n=0;n<e.logRecords.length;++n)r.logRecords[n]=f.opentelemetry.proto.logs.v1.LogRecord.toObject(e.logRecords[n],t)}return null!=e.schemaUrl&&e.hasOwnProperty("schemaUrl")&&(r.schemaUrl=e.schemaUrl),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.ScopeLogs"},e}(),r.SeverityNumber=(e={},(t=Object.create(e))[e[0]="SEVERITY_NUMBER_UNSPECIFIED"]=0,t[e[1]="SEVERITY_NUMBER_TRACE"]=1,t[e[2]="SEVERITY_NUMBER_TRACE2"]=2,t[e[3]="SEVERITY_NUMBER_TRACE3"]=3,t[e[4]="SEVERITY_NUMBER_TRACE4"]=4,t[e[5]="SEVERITY_NUMBER_DEBUG"]=5,t[e[6]="SEVERITY_NUMBER_DEBUG2"]=6,t[e[7]="SEVERITY_NUMBER_DEBUG3"]=7,t[e[8]="SEVERITY_NUMBER_DEBUG4"]=8,t[e[9]="SEVERITY_NUMBER_INFO"]=9,t[e[10]="SEVERITY_NUMBER_INFO2"]=10,t[e[11]="SEVERITY_NUMBER_INFO3"]=11,t[e[12]="SEVERITY_NUMBER_INFO4"]=12,t[e[13]="SEVERITY_NUMBER_WARN"]=13,t[e[14]="SEVERITY_NUMBER_WARN2"]=14,t[e[15]="SEVERITY_NUMBER_WARN3"]=15,t[e[16]="SEVERITY_NUMBER_WARN4"]=16,t[e[17]="SEVERITY_NUMBER_ERROR"]=17,t[e[18]="SEVERITY_NUMBER_ERROR2"]=18,t[e[19]="SEVERITY_NUMBER_ERROR3"]=19,t[e[20]="SEVERITY_NUMBER_ERROR4"]=20,t[e[21]="SEVERITY_NUMBER_FATAL"]=21,t[e[22]="SEVERITY_NUMBER_FATAL2"]=22,t[e[23]="SEVERITY_NUMBER_FATAL3"]=23,t[e[24]="SEVERITY_NUMBER_FATAL4"]=24,t),r.LogRecordFlags=function(){var e={},t=Object.create(e);return t[e[0]="LOG_RECORD_FLAGS_DO_NOT_USE"]=0,t[e[255]="LOG_RECORD_FLAGS_TRACE_FLAGS_MASK"]=255,t}(),r.LogRecord=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.timeUnixNano=null,e.prototype.observedTimeUnixNano=null,e.prototype.severityNumber=null,e.prototype.severityText=null,e.prototype.body=null,e.prototype.attributes=g.emptyArray,e.prototype.droppedAttributesCount=null,e.prototype.flags=null,e.prototype.traceId=null,e.prototype.spanId=null,e.prototype.eventName=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=h.create()),null!=e.timeUnixNano&&Object.hasOwnProperty.call(e,"timeUnixNano")&&t.uint32(9).fixed64(e.timeUnixNano),null!=e.severityNumber&&Object.hasOwnProperty.call(e,"severityNumber")&&t.uint32(16).int32(e.severityNumber),null!=e.severityText&&Object.hasOwnProperty.call(e,"severityText")&&t.uint32(26).string(e.severityText),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&f.opentelemetry.proto.common.v1.AnyValue.encode(e.body,t.uint32(42).fork()).ldelim(),null!=e.attributes&&e.attributes.length)for(var r=0;r<e.attributes.length;++r)f.opentelemetry.proto.common.v1.KeyValue.encode(e.attributes[r],t.uint32(50).fork()).ldelim();return null!=e.droppedAttributesCount&&Object.hasOwnProperty.call(e,"droppedAttributesCount")&&t.uint32(56).uint32(e.droppedAttributesCount),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(69).fixed32(e.flags),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(74).bytes(e.traceId),null!=e.spanId&&Object.hasOwnProperty.call(e,"spanId")&&t.uint32(82).bytes(e.spanId),null!=e.observedTimeUnixNano&&Object.hasOwnProperty.call(e,"observedTimeUnixNano")&&t.uint32(89).fixed64(e.observedTimeUnixNano),null!=e.eventName&&Object.hasOwnProperty.call(e,"eventName")&&t.uint32(98).string(e.eventName),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t,r){e instanceof m||(e=m.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new f.opentelemetry.proto.logs.v1.LogRecord;e.pos<n;){var s=e.uint32();if(s===r)break;switch(s>>>3){case 1:o.timeUnixNano=e.fixed64();break;case 11:o.observedTimeUnixNano=e.fixed64();break;case 2:o.severityNumber=e.int32();break;case 3:o.severityText=e.string();break;case 5:o.body=f.opentelemetry.proto.common.v1.AnyValue.decode(e,e.uint32());break;case 6:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(f.opentelemetry.proto.common.v1.KeyValue.decode(e,e.uint32()));break;case 7:o.droppedAttributesCount=e.uint32();break;case 8:o.flags=e.fixed32();break;case 9:o.traceId=e.bytes();break;case 10:o.spanId=e.bytes();break;case 12:o.eventName=e.string();break;default:e.skipType(7&s)}}return o},e.decodeDelimited=function(e){return e instanceof m||(e=new m(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&!(g.isInteger(e.timeUnixNano)||e.timeUnixNano&&g.isInteger(e.timeUnixNano.low)&&g.isInteger(e.timeUnixNano.high)))return"timeUnixNano: integer|Long expected";if(null!=e.observedTimeUnixNano&&e.hasOwnProperty("observedTimeUnixNano")&&!(g.isInteger(e.observedTimeUnixNano)||e.observedTimeUnixNano&&g.isInteger(e.observedTimeUnixNano.low)&&g.isInteger(e.observedTimeUnixNano.high)))return"observedTimeUnixNano: integer|Long expected";if(null!=e.severityNumber&&e.hasOwnProperty("severityNumber"))switch(e.severityNumber){default:return"severityNumber: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.severityText&&e.hasOwnProperty("severityText")&&!g.isString(e.severityText))return"severityText: string expected";if(null!=e.body&&e.hasOwnProperty("body")&&(r=f.opentelemetry.proto.common.v1.AnyValue.verify(e.body)))return"body."+r;if(null!=e.attributes&&e.hasOwnProperty("attributes")){if(!Array.isArray(e.attributes))return"attributes: array expected";for(var t=0;t<e.attributes.length;++t){var r;if(r=f.opentelemetry.proto.common.v1.KeyValue.verify(e.attributes[t]))return"attributes."+r}}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&!g.isInteger(e.droppedAttributesCount)?"droppedAttributesCount: integer expected":null!=e.flags&&e.hasOwnProperty("flags")&&!g.isInteger(e.flags)?"flags: integer expected":null!=e.traceId&&e.hasOwnProperty("traceId")&&!(e.traceId&&"number"==typeof e.traceId.length||g.isString(e.traceId))?"traceId: buffer expected":null!=e.spanId&&e.hasOwnProperty("spanId")&&!(e.spanId&&"number"==typeof e.spanId.length||g.isString(e.spanId))?"spanId: buffer expected":null!=e.eventName&&e.hasOwnProperty("eventName")&&!g.isString(e.eventName)?"eventName: string expected":null},e.fromObject=function(e){if(e instanceof f.opentelemetry.proto.logs.v1.LogRecord)return e;var t=new f.opentelemetry.proto.logs.v1.LogRecord;switch(null!=e.timeUnixNano&&(g.Long?(t.timeUnixNano=g.Long.fromValue(e.timeUnixNano)).unsigned=!1:"string"==typeof e.timeUnixNano?t.timeUnixNano=parseInt(e.timeUnixNano,10):"number"==typeof e.timeUnixNano?t.timeUnixNano=e.timeUnixNano:"object"==typeof e.timeUnixNano&&(t.timeUnixNano=new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber())),null!=e.observedTimeUnixNano&&(g.Long?(t.observedTimeUnixNano=g.Long.fromValue(e.observedTimeUnixNano)).unsigned=!1:"string"==typeof e.observedTimeUnixNano?t.observedTimeUnixNano=parseInt(e.observedTimeUnixNano,10):"number"==typeof e.observedTimeUnixNano?t.observedTimeUnixNano=e.observedTimeUnixNano:"object"==typeof e.observedTimeUnixNano&&(t.observedTimeUnixNano=new g.LongBits(e.observedTimeUnixNano.low>>>0,e.observedTimeUnixNano.high>>>0).toNumber())),e.severityNumber){default:if("number"==typeof e.severityNumber){t.severityNumber=e.severityNumber;break}break;case"SEVERITY_NUMBER_UNSPECIFIED":case 0:t.severityNumber=0;break;case"SEVERITY_NUMBER_TRACE":case 1:t.severityNumber=1;break;case"SEVERITY_NUMBER_TRACE2":case 2:t.severityNumber=2;break;case"SEVERITY_NUMBER_TRACE3":case 3:t.severityNumber=3;break;case"SEVERITY_NUMBER_TRACE4":case 4:t.severityNumber=4;break;case"SEVERITY_NUMBER_DEBUG":case 5:t.severityNumber=5;break;case"SEVERITY_NUMBER_DEBUG2":case 6:t.severityNumber=6;break;case"SEVERITY_NUMBER_DEBUG3":case 7:t.severityNumber=7;break;case"SEVERITY_NUMBER_DEBUG4":case 8:t.severityNumber=8;break;case"SEVERITY_NUMBER_INFO":case 9:t.severityNumber=9;break;case"SEVERITY_NUMBER_INFO2":case 10:t.severityNumber=10;break;case"SEVERITY_NUMBER_INFO3":case 11:t.severityNumber=11;break;case"SEVERITY_NUMBER_INFO4":case 12:t.severityNumber=12;break;case"SEVERITY_NUMBER_WARN":case 13:t.severityNumber=13;break;case"SEVERITY_NUMBER_WARN2":case 14:t.severityNumber=14;break;case"SEVERITY_NUMBER_WARN3":case 15:t.severityNumber=15;break;case"SEVERITY_NUMBER_WARN4":case 16:t.severityNumber=16;break;case"SEVERITY_NUMBER_ERROR":case 17:t.severityNumber=17;break;case"SEVERITY_NUMBER_ERROR2":case 18:t.severityNumber=18;break;case"SEVERITY_NUMBER_ERROR3":case 19:t.severityNumber=19;break;case"SEVERITY_NUMBER_ERROR4":case 20:t.severityNumber=20;break;case"SEVERITY_NUMBER_FATAL":case 21:t.severityNumber=21;break;case"SEVERITY_NUMBER_FATAL2":case 22:t.severityNumber=22;break;case"SEVERITY_NUMBER_FATAL3":case 23:t.severityNumber=23;break;case"SEVERITY_NUMBER_FATAL4":case 24:t.severityNumber=24}if(null!=e.severityText&&(t.severityText=String(e.severityText)),null!=e.body){if("object"!=typeof e.body)throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.body: object expected");t.body=f.opentelemetry.proto.common.v1.AnyValue.fromObject(e.body)}if(e.attributes){if(!Array.isArray(e.attributes))throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: array expected");t.attributes=[];for(var r=0;r<e.attributes.length;++r){if("object"!=typeof e.attributes[r])throw TypeError(".opentelemetry.proto.logs.v1.LogRecord.attributes: object expected");t.attributes[r]=f.opentelemetry.proto.common.v1.KeyValue.fromObject(e.attributes[r])}}return null!=e.droppedAttributesCount&&(t.droppedAttributesCount=e.droppedAttributesCount>>>0),null!=e.flags&&(t.flags=e.flags>>>0),null!=e.traceId&&("string"==typeof e.traceId?g.base64.decode(e.traceId,t.traceId=g.newBuffer(g.base64.length(e.traceId)),0):e.traceId.length>=0&&(t.traceId=e.traceId)),null!=e.spanId&&("string"==typeof e.spanId?g.base64.decode(e.spanId,t.spanId=g.newBuffer(g.base64.length(e.spanId)),0):e.spanId.length>=0&&(t.spanId=e.spanId)),null!=e.eventName&&(t.eventName=String(e.eventName)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.attributes=[]),t.defaults){if(g.Long){var n=new g.Long(0,0,!1);r.timeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.timeUnixNano=t.longs===String?"0":0;r.severityNumber=t.enums===String?"SEVERITY_NUMBER_UNSPECIFIED":0,r.severityText="",r.body=null,r.droppedAttributesCount=0,r.flags=0,t.bytes===String?r.traceId="":(r.traceId=[],t.bytes!==Array&&(r.traceId=g.newBuffer(r.traceId))),t.bytes===String?r.spanId="":(r.spanId=[],t.bytes!==Array&&(r.spanId=g.newBuffer(r.spanId))),g.Long?(n=new g.Long(0,0,!1),r.observedTimeUnixNano=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):r.observedTimeUnixNano=t.longs===String?"0":0,r.eventName=""}if(null!=e.timeUnixNano&&e.hasOwnProperty("timeUnixNano")&&("number"==typeof e.timeUnixNano?r.timeUnixNano=t.longs===String?String(e.timeUnixNano):e.timeUnixNano:r.timeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.timeUnixNano):t.longs===Number?new g.LongBits(e.timeUnixNano.low>>>0,e.timeUnixNano.high>>>0).toNumber():e.timeUnixNano),null!=e.severityNumber&&e.hasOwnProperty("severityNumber")&&(r.severityNumber=t.enums===String?void 0===f.opentelemetry.proto.logs.v1.SeverityNumber[e.severityNumber]?e.severityNumber:f.opentelemetry.proto.logs.v1.SeverityNumber[e.severityNumber]:e.severityNumber),null!=e.severityText&&e.hasOwnProperty("severityText")&&(r.severityText=e.severityText),null!=e.body&&e.hasOwnProperty("body")&&(r.body=f.opentelemetry.proto.common.v1.AnyValue.toObject(e.body,t)),e.attributes&&e.attributes.length){r.attributes=[];for(var o=0;o<e.attributes.length;++o)r.attributes[o]=f.opentelemetry.proto.common.v1.KeyValue.toObject(e.attributes[o],t)}return null!=e.droppedAttributesCount&&e.hasOwnProperty("droppedAttributesCount")&&(r.droppedAttributesCount=e.droppedAttributesCount),null!=e.flags&&e.hasOwnProperty("flags")&&(r.flags=e.flags),null!=e.traceId&&e.hasOwnProperty("traceId")&&(r.traceId=t.bytes===String?g.base64.encode(e.traceId,0,e.traceId.length):t.bytes===Array?Array.prototype.slice.call(e.traceId):e.traceId),null!=e.spanId&&e.hasOwnProperty("spanId")&&(r.spanId=t.bytes===String?g.base64.encode(e.spanId,0,e.spanId.length):t.bytes===Array?Array.prototype.slice.call(e.spanId):e.spanId),null!=e.observedTimeUnixNano&&e.hasOwnProperty("observedTimeUnixNano")&&("number"==typeof e.observedTimeUnixNano?r.observedTimeUnixNano=t.longs===String?String(e.observedTimeUnixNano):e.observedTimeUnixNano:r.observedTimeUnixNano=t.longs===String?g.Long.prototype.toString.call(e.observedTimeUnixNano):t.longs===Number?new g.LongBits(e.observedTimeUnixNano.low>>>0,e.observedTimeUnixNano.high>>>0).toNumber():e.observedTimeUnixNano),null!=e.eventName&&e.hasOwnProperty("eventName")&&(r.eventName=e.eventName),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/opentelemetry.proto.logs.v1.LogRecord"},e}(),r}(),e}(),u),p),e.exports=f},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{JsonLogsSerializer:()=>i.G,JsonMetricsSerializer:()=>a.K,JsonTraceSerializer:()=>l.U,ProtobufLogsSerializer:()=>n.x,ProtobufMetricsSerializer:()=>o.D,ProtobufTraceSerializer:()=>s.n});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/protobuf/logs.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/protobuf/metrics.js"),s=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/protobuf/trace.js"),i=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/json/logs.js"),a=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/json/metrics.js"),l=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/json/trace.js")},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/internal.js":(e,t,r)=>{r.d(t,{W:()=>s});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/utils.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/internal.js");function s(e,t){return{resourceLogs:i(e,(0,n.Az)(t))}}function i(e,t){const r=function(e){const t=new Map;for(const r of e){const{resource:e,instrumentationScope:{name:n,version:o="",schemaUrl:s=""}}=r;let i=t.get(e);i||(i=new Map,t.set(e,i));const a=`${n}@${o}:${s}`;let l=i.get(a);l||(l=[],i.set(a,l)),l.push(r)}return t}(e);return Array.from(r,(([e,r])=>({resource:(0,o.Zg)(e),scopeLogs:Array.from(r,(([,e])=>({scope:(0,o.d1)(e[0].instrumentationScope),logRecords:e.map((e=>function(e,t){return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:(0,o.Ff)(e.body),eventName:e.eventName,attributes:(r=e.attributes,Object.keys(r).map((e=>(0,o.EB)(e,r[e])))),droppedAttributesCount:e.droppedAttributesCount,flags:e.spanContext?.traceFlags,traceId:t.encodeOptionalSpanContext(e.spanContext?.traceId),spanId:t.encodeOptionalSpanContext(e.spanContext?.spanId)};var r}(e,t))),schemaUrl:e[0].instrumentationScope.schemaUrl}))),schemaUrl:void 0})))}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/json/logs.js":(e,t,r)=>{r.d(t,{G:()=>o});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/internal.js");const o={serializeRequest:e=>{const t=(0,n.W)(e,{useHex:!0,useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(t))},deserializeResponse:e=>{if(0===e.length)return{};const t=new TextDecoder;return JSON.parse(t.decode(e))}}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/protobuf/logs.js":(e,t,r)=>{r.d(t,{x:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/generated/root.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/logs/internal.js");const s=n.opentelemetry.proto.collector.logs.v1.ExportLogsServiceResponse,i=n.opentelemetry.proto.collector.logs.v1.ExportLogsServiceRequest,a={serializeRequest:e=>{const t=(0,o.W)(e);return i.encode(t).finish()},deserializeResponse:e=>s.decode(e)}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/internal.js":(e,t,r)=>{r.d(t,{KI:()=>m});var n,o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/metrics/Metric.js"),s=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/MetricData.js"),i=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/AggregationTemporality.js");!function(e){e[e.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",e[e.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",e[e.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE"}(n||(n={}));var a=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/utils.js"),l=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/internal.js");function c(e,t){return Array.from(e.map((e=>({scope:(0,l.d1)(e.scope),metrics:e.metrics.map((e=>function(e,t){const r={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},o=function(e){switch(e){case i.h.DELTA:return n.AGGREGATION_TEMPORALITY_DELTA;case i.h.CUMULATIVE:return n.AGGREGATION_TEMPORALITY_CUMULATIVE}}(e.aggregationTemporality);switch(e.dataPointType){case s.n.SUM:r.sum={aggregationTemporality:o,isMonotonic:e.isMonotonic,dataPoints:u(e,t)};break;case s.n.GAUGE:r.gauge={dataPoints:u(e,t)};break;case s.n.HISTOGRAM:r.histogram={aggregationTemporality:o,dataPoints:p(e,t)};break;case s.n.EXPONENTIAL_HISTOGRAM:r.exponentialHistogram={aggregationTemporality:o,dataPoints:d(e,t)}}return r}(e,t))),schemaUrl:e.scope.schemaUrl}))))}function u(e,t){return e.dataPoints.map((r=>function(e,t,r){const n={attributes:(0,l.Zs)(e.attributes),startTimeUnixNano:r.encodeHrTime(e.startTime),timeUnixNano:r.encodeHrTime(e.endTime)};switch(t){case o.e.INT:n.asInt=e.value;break;case o.e.DOUBLE:n.asDouble=e.value}return n}(r,e.descriptor.valueType,t)))}function p(e,t){return e.dataPoints.map((e=>{const r=e.value;return{attributes:(0,l.Zs)(e.attributes),bucketCounts:r.buckets.counts,explicitBounds:r.buckets.boundaries,count:r.count,sum:r.sum,min:r.min,max:r.max,startTimeUnixNano:t.encodeHrTime(e.startTime),timeUnixNano:t.encodeHrTime(e.endTime)}}))}function d(e,t){return e.dataPoints.map((e=>{const r=e.value;return{attributes:(0,l.Zs)(e.attributes),count:r.count,min:r.min,max:r.max,sum:r.sum,positive:{offset:r.positive.offset,bucketCounts:r.positive.bucketCounts},negative:{offset:r.negative.offset,bucketCounts:r.negative.bucketCounts},scale:r.scale,zeroCount:r.zeroCount,startTimeUnixNano:t.encodeHrTime(e.startTime),timeUnixNano:t.encodeHrTime(e.endTime)}}))}function m(e,t){return{resourceMetrics:e.map((e=>function(e,t){const r=(0,a.Az)(t);return{resource:(0,l.Zg)(e.resource),schemaUrl:void 0,scopeMetrics:c(e.scopeMetrics,r)}}(e,t)))}}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/json/metrics.js":(e,t,r)=>{r.d(t,{K:()=>o});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/internal.js");const o={serializeRequest:e=>{const t=(0,n.KI)([e],{useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(t))},deserializeResponse:e=>{if(0===e.length)return{};const t=new TextDecoder;return JSON.parse(t.decode(e))}}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/protobuf/metrics.js":(e,t,r)=>{r.d(t,{D:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/generated/root.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/metrics/internal.js");const s=n.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceResponse,i=n.opentelemetry.proto.collector.metrics.v1.ExportMetricsServiceRequest,a={serializeRequest:e=>{const t=(0,o.KI)([e]);return i.encode(t).finish()},deserializeResponse:e=>s.decode(e)}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/internal.js":(e,t,r)=>{r.d(t,{sJ:()=>i});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/internal.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/common/utils.js");function s(e,t){const r=e.spanContext(),o=e.status,s=e.parentSpanContext?.spanId?t.encodeSpanContext(e.parentSpanContext?.spanId):void 0;return{traceId:t.encodeSpanContext(r.traceId),spanId:t.encodeSpanContext(r.spanId),parentSpanId:s,traceState:r.traceState?.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:(0,n.Zs)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map((e=>function(e,t){return{attributes:e.attributes?(0,n.Zs)(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t))),droppedEventsCount:e.droppedEventsCount,status:{code:o.code,message:o.message},links:e.links.map((e=>function(e,t){return{attributes:e.attributes?(0,n.Zs)(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:e.context.traceState?.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}(e,t))),droppedLinksCount:e.droppedLinksCount}}function i(e,t){return{resourceSpans:a(e,(0,o.Az)(t))}}function a(e,t){const r=function(e){const t=new Map;for(const r of e){let e=t.get(r.resource);e||(e=new Map,t.set(r.resource,e));const n=`${r.instrumentationScope.name}@${r.instrumentationScope.version||""}:${r.instrumentationScope.schemaUrl||""}`;let o=e.get(n);o||(o=[],e.set(n,o)),o.push(r)}return t}(e),o=[],i=r.entries();let a=i.next();for(;!a.done;){const[e,r]=a.value,l=[],c=r.values();let u=c.next();for(;!u.done;){const e=u.value;if(e.length>0){const r=e.map((e=>s(e,t)));l.push({scope:(0,n.d1)(e[0].instrumentationScope),spans:r,schemaUrl:e[0].instrumentationScope.schemaUrl})}u=c.next()}const p={resource:(0,n.Zg)(e),scopeSpans:l,schemaUrl:void 0};o.push(p),a=i.next()}return o}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/json/trace.js":(e,t,r)=>{r.d(t,{U:()=>o});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/internal.js");const o={serializeRequest:e=>{const t=(0,n.sJ)(e,{useHex:!0,useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(t))},deserializeResponse:e=>{if(0===e.length)return{};const t=new TextDecoder;return JSON.parse(t.decode(e))}}},"../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/protobuf/trace.js":(e,t,r)=>{r.d(t,{n:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/generated/root.js"),o=r("../../node_modules/.pnpm/@opentelemetry+otlp-transformer@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/otlp-transformer/build/esm/trace/internal.js");const s=n.opentelemetry.proto.collector.trace.v1.ExportTraceServiceResponse,i=n.opentelemetry.proto.collector.trace.v1.ExportTraceServiceRequest,a={serializeRequest:e=>{const t=(0,o.sJ)(e);return i.encode(t).finish()},deserializeResponse:e=>s.decode(e)}},"../../node_modules/.pnpm/@opentelemetry+propagator-b3@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/propagator-b3/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{B3InjectEncoding:()=>x,B3Propagator:()=>E,B3_CONTEXT_HEADER:()=>l,X_B3_FLAGS:()=>m,X_B3_PARENT_SPAN_ID:()=>d,X_B3_SAMPLED:()=>p,X_B3_SPAN_ID:()=>u,X_B3_TRACE_ID:()=>c});var n=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/trace/suppress-tracing.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/trace_flags.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace-api.js"),i=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/spancontext-utils.js");const a=(0,r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/context/context.js").n)("OpenTelemetry Context Key B3 Debug Flag"),l="b3",c="x-b3-traceid",u="x-b3-spanid",p="x-b3-sampled",d="x-b3-parentspanid",m="x-b3-flags",h=new Set([!0,"true","True","1",1]),g=new Set([!1,"false","False","0",0]);function f(e,t,r){return n=t.get(e,r),Array.isArray(n)?n[0]:n;var n}function y(e,t){return"1"===f(e,t,m)?"1":void 0}class b{inject(e,t,r){const l=s.u.getSpanContext(e);if(!l||!(0,i.YA)(l)||(0,n.Zf)(e))return;const d=e.getValue(a);r.set(t,c,l.traceId),r.set(t,u,l.spanId),"1"===d?r.set(t,m,d):void 0!==l.traceFlags&&r.set(t,p,(o.X.SAMPLED&l.traceFlags)===o.X.SAMPLED?"1":"0")}extract(e,t,r){const n=function(e,t){const r=f(e,t,c);return"string"==typeof r?r.padStart(32,"0"):""}(t,r),l=function(e,t){const r=f(e,t,u);return"string"==typeof r?r:""}(t,r),d=function(e,t){const r=f(e,t,p);return"1"===y(e,t)||h.has(r)?o.X.SAMPLED:void 0===r||g.has(r)?o.X.NONE:void 0}(t,r),m=y(t,r);return(0,i.hX)(n)&&(0,i.wN)(l)&&((b=d)===o.X.SAMPLED||b===o.X.NONE)?(e=e.setValue(a,m),s.u.setSpanContext(e,{traceId:n,spanId:l,isRemote:!0,traceFlags:d})):e;var b}fields(){return[c,u,m,p,d]}}const v=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,_="0".repeat(16),S=new Set(["d","1"]);class T{inject(e,t,r){const o=s.u.getSpanContext(e);if(!o||!(0,i.YA)(o)||(0,n.Zf)(e))return;const c=e.getValue(a)||1&o.traceFlags,u=`${o.traceId}-${o.spanId}-${c}`;r.set(t,l,u)}extract(e,t,r){const n=r.get(t,l),c=Array.isArray(n)?n[0]:n;if("string"!=typeof c)return e;const u=c.match(v);if(!u)return e;const[,p,d,m]=u,h=function(e){return 32===e.length?e:`${_}${e}`}(p);if(!(0,i.hX)(h)||!(0,i.wN)(d))return e;const g=function(e){return e&&S.has(e)?o.X.SAMPLED:o.X.NONE}(m);return"d"===m&&(e=e.setValue(a,m)),s.u.setSpanContext(e,{traceId:h,spanId:d,isRemote:!0,traceFlags:g})}fields(){return[l]}}var x;!function(e){e[e.SINGLE_HEADER=0]="SINGLE_HEADER",e[e.MULTI_HEADER=1]="MULTI_HEADER"}(x||(x={}));class E{_b3MultiPropagator=new b;_b3SinglePropagator=new T;_inject;_fields;constructor(e={}){e.injectEncoding===x.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}inject(e,t,r){(0,n.Zf)(e)||this._inject(e,t,r)}extract(e,t,r){const n=r.get(t,l);return(Array.isArray(n)?n[0]:n)?this._b3SinglePropagator.extract(e,t,r):this._b3MultiPropagator.extract(e,t,r)}fields(){return this._fields}}},"../../node_modules/.pnpm/@opentelemetry+propagator-jaeger@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/propagator-jaeger/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{JaegerPropagator:()=>c,UBER_BAGGAGE_HEADER_PREFIX:()=>l,UBER_TRACE_ID_HEADER:()=>a});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace-api.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/propagation-api.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/trace_flags.js"),i=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/trace/suppress-tracing.js");const a="uber-trace-id",l="uberctx";class c{_jaegerTraceHeader;_jaegerBaggageHeaderPrefix;constructor(e){"string"==typeof e?(this._jaegerTraceHeader=e,this._jaegerBaggageHeaderPrefix=l):(this._jaegerTraceHeader=e?.customTraceHeader||a,this._jaegerBaggageHeaderPrefix=e?.customBaggageHeaderPrefix||l)}inject(e,t,r){const a=n.u.getSpanContext(e),l=o.$.getBaggage(e);if(a&&!1===(0,i.Zf)(e)){const e=`0${(a.traceFlags||s.X.NONE).toString(16)}`;r.set(t,this._jaegerTraceHeader,`${a.traceId}:${a.spanId}:0:${e}`)}if(l)for(const[e,n]of l.getAllEntries())r.set(t,`${this._jaegerBaggageHeaderPrefix}-${e}`,encodeURIComponent(n.value))}extract(e,t,r){const s=r.get(t,this._jaegerTraceHeader),i=Array.isArray(s)?s[0]:s,a=r.keys(t).filter((e=>e.startsWith(`${this._jaegerBaggageHeaderPrefix}-`))).map((e=>{const n=r.get(t,e);return{key:e.substring(this._jaegerBaggageHeaderPrefix.length+1),value:Array.isArray(n)?n[0]:n}}));let l=e;if("string"==typeof i){const e=function(e){const t=decodeURIComponent(e).split(":");if(4!==t.length)return null;const[r,n,,o]=t;return{traceId:r.padStart(32,"0"),spanId:n.padStart(16,"0"),isRemote:!0,traceFlags:u.test(o)?1&parseInt(o,16):1}}(i);e&&(l=n.u.setSpanContext(l,e))}if(0===a.length)return l;let c=o.$.getBaggage(e)??o.$.createBaggage();for(const e of a)void 0!==e.value&&(c=c.setEntry(e.key,{value:decodeURIComponent(e.value)}));return l=o.$.setBaggage(l,c),l}fields(){return[this._jaegerTraceHeader]}}const u=/^[0-9a-f]{1,2}$/i},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/execAsync.js":(e,t,r)=>{r.d(t,{q:()=>o});var n=r("child_process");const o=r("util").promisify(n.exec)},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-bsd.js":(e,t,r)=>{r.r(t),r.d(t,{getMachineId:()=>i});var n=r("fs"),o=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/execAsync.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");async function i(){try{return(await n.promises.readFile("/etc/hostid",{encoding:"utf8"})).trim()}catch(e){s.s.debug(`error reading machine id: ${e}`)}try{return(await(0,o.q)("kenv -q smbios.system.uuid")).stdout.trim()}catch(e){s.s.debug(`error reading machine id: ${e}`)}}},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-darwin.js":(e,t,r)=>{r.r(t),r.d(t,{getMachineId:()=>s});var n=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/execAsync.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");async function s(){try{const e=(await(0,n.q)('ioreg -rd1 -c "IOPlatformExpertDevice"')).stdout.split("\n").find((e=>e.includes("IOPlatformUUID")));if(!e)return;const t=e.split('" = "');if(2===t.length)return t[1].slice(0,-1)}catch(e){o.s.debug(`error reading machine id: ${e}`)}}},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-linux.js":(e,t,r)=>{r.r(t),r.d(t,{getMachineId:()=>s});var n=r("fs"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");async function s(){const e=["/etc/machine-id","/var/lib/dbus/machine-id"];for(const t of e)try{return(await n.promises.readFile(t,{encoding:"utf8"})).trim()}catch(e){o.s.debug(`error reading machine id: ${e}`)}}},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-unsupported.js":(e,t,r)=>{r.r(t),r.d(t,{getMachineId:()=>o});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");async function o(){n.s.debug("could not read machine-id: unsupported platform")}},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-win.js":(e,t,r)=>{r.r(t),r.d(t,{getMachineId:()=>s}),r("process");var n=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/execAsync.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");async function s(){try{const e=(await(0,n.q)("%windir%\\System32\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid")).stdout.split("REG_SZ");if(2===e.length)return e[1].trim()}catch(e){o.s.debug(`error reading machine id: ${e}`)}}},"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{defaultResource:()=>o.gk,defaultServiceName:()=>k.m,detectResources:()=>s,emptyResource:()=>o.sq,envDetector:()=>l,hostDetector:()=>j,osDetector:()=>O,processDetector:()=>P,resourceFromAttributes:()=>o.QZ,serviceInstanceIdDetector:()=>N});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js"),o=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/ResourceImpl.js");const s=(e={})=>(e.detectors||[]).map((t=>{try{const r=(0,o.Lm)(t.detect(e));return n.s.debug(`${t.constructor.name} found resource.`,r),r}catch(e){return n.s.debug(`${t.constructor.name} failed: ${e.message}`),(0,o.sq)()}})).reduce(((e,t)=>e.merge(t)),(0,o.sq)());var i=r("../../node_modules/.pnpm/@opentelemetry+semantic-conventions@1.36.0/node_modules/@opentelemetry/semantic-conventions/build/esm/stable_attributes.js"),a=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/environment.js");const l=new class{_MAX_LENGTH=255;_COMMA_SEPARATOR=",";_LABEL_KEY_VALUE_SPLITTER="=";_ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.";_ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters.";detect(e){const t={},r=(0,a.HF)("OTEL_RESOURCE_ATTRIBUTES"),o=(0,a.HF)("OTEL_SERVICE_NAME");if(r)try{const e=this._parseResourceAttributes(r);Object.assign(t,e)}catch(e){n.s.debug(`EnvDetector failed: ${e.message}`)}return o&&(t[i.UX]=o),{attributes:t}}_parseResourceAttributes(e){if(!e)return{};const t={},r=e.split(this._COMMA_SEPARATOR,-1);for(const e of r){const r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,o]=r;if(n=n.trim(),o=o.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=decodeURIComponent(o)}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<33||44===r||59===r||92===r||r>126)return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}},c="host.arch",u="host.id",p="host.name",d="os.type",m="os.version",h="process.command_args",g="process.executable.name",f="process.executable.path",y="process.pid",b="process.runtime.description",v="process.runtime.name",_="process.runtime.version",S="service.instance.id";var T=r("os");let x;async function E(){return x||(x=(await r.e(240).then(r.bind(r,"../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/detectors/platform/node/machine-id/getMachineId-linux.js"))).getMachineId),x()}r("process");const C=e=>{switch(e){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return e}},w=e=>{switch(e){case"sunos":return"solaris";case"win32":return"windows";default:return e}},j=new class{detect(e){return{attributes:{[p]:(0,T.hostname)(),[c]:C((0,T.arch)()),[u]:E()}}}},O=new class{detect(e){return{attributes:{[d]:w((0,T.platform)()),[m]:(0,T.release)()}}}},P=new class{detect(e){const t={[y]:process.pid,[g]:process.title,[f]:process.execPath,[h]:[process.argv[0],...process.execArgv,...process.argv.slice(1)],[_]:process.versions.node,[v]:"nodejs",[b]:"Node.js"};process.argv.length>1&&(t["process.command"]=process.argv[1]);try{const e=T.userInfo();t["process.owner"]=e.username}catch(e){n.s.debug(`error obtaining process owner: ${e}`)}return{attributes:t}}};var R=r("crypto");const N=new class{detect(e){return{attributes:{[S]:(0,R.randomUUID)()}}}};var k=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/platform/node/default-service-name.js")},"../../node_modules/.pnpm/@opentelemetry+sdk-logs@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-logs/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{BatchLogRecordProcessor:()=>P,ConsoleLogRecordExporter:()=>T,InMemoryLogRecordExporter:()=>w,LoggerProvider:()=>_,NoopLogRecordProcessor:()=>f,SimpleLogRecordProcessor:()=>C});var n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api-logs@0.203.0/node_modules/@opentelemetry/api-logs/build/esm/NoopLogger.js"),s=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/ResourceImpl.js"),i=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/utils/merge.js"),a=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/utils/callback.js"),l=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/context-api.js"),c=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace-api.js"),u=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/spancontext-utils.js"),p=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js"),d=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/attributes.js");class m{hrTime;hrTimeObserved;spanContext;resource;instrumentationScope;attributes={};_severityText;_severityNumber;_body;_eventName;totalAttributesCount=0;_isReadonly=!1;_logRecordLimits;set severityText(e){this._isLogRecordReadonly()||(this._severityText=e)}get severityText(){return this._severityText}set severityNumber(e){this._isLogRecordReadonly()||(this._severityNumber=e)}get severityNumber(){return this._severityNumber}set body(e){this._isLogRecordReadonly()||(this._body=e)}get body(){return this._body}get eventName(){return this._eventName}set eventName(e){this._isLogRecordReadonly()||(this._eventName=e)}get droppedAttributesCount(){return this.totalAttributesCount-Object.keys(this.attributes).length}constructor(e,t,r){const{timestamp:n,observedTimestamp:o,eventName:s,severityNumber:i,severityText:a,body:l,attributes:d={},context:m}=r,h=Date.now();if(this.hrTime=(0,p.KJ)(n??h),this.hrTimeObserved=(0,p.KJ)(o??h),m){const e=c.u.getSpanContext(m);e&&u.YA(e)&&(this.spanContext=e)}this.severityNumber=i,this.severityText=a,this.body=l,this.resource=e.resource,this.instrumentationScope=t,this._logRecordLimits=e.logRecordLimits,this._eventName=s,this.setAttributes(d)}setAttribute(e,t){return this._isLogRecordReadonly()||null===t?this:0===e.length?(n.s.warn(`Invalid attribute key: ${e}`),this):(0,d.m)(t)||"object"==typeof t&&!Array.isArray(t)&&Object.keys(t).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(1===this.droppedAttributesCount&&n.s.warn("Dropping extra attributes."),this):((0,d.m)(t)?this.attributes[e]=this._truncateToSize(t):this.attributes[e]=t,this)):(n.s.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(const[t,r]of Object.entries(e))this.setAttribute(t,r);return this}setBody(e){return this.body=e,this}setEventName(e){return this.eventName=e,this}setSeverityNumber(e){return this.severityNumber=e,this}setSeverityText(e){return this.severityText=e,this}_makeReadonly(){this._isReadonly=!0}_truncateToSize(e){const t=this._logRecordLimits.attributeValueLengthLimit;return t<=0?(n.s.warn(`Attribute value limit must be positive, got ${t}`),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map((e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e)):e}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substring(0,t)}_isLogRecordReadonly(){return this._isReadonly&&n.s.warn("Can not execute the operation on emitted log record"),this._isReadonly}}class h{instrumentationScope;_sharedState;constructor(e,t){this.instrumentationScope=e,this._sharedState=t}emit(e){const t=e.context||l._.active(),r=new m(this._sharedState,this.instrumentationScope,{context:t,...e});this._sharedState.activeProcessor.onEmit(r,t),r._makeReadonly()}}var g=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/environment.js");class f{forceFlush(){return Promise.resolve()}onEmit(e,t){}shutdown(){return Promise.resolve()}}var y=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/utils/timeout.js");class b{processors;forceFlushTimeoutMillis;constructor(e,t){this.processors=e,this.forceFlushTimeoutMillis=t}async forceFlush(){const e=this.forceFlushTimeoutMillis;await Promise.all(this.processors.map((t=>(0,y.o)(t.forceFlush(),e))))}onEmit(e,t){this.processors.forEach((r=>r.onEmit(e,t)))}async shutdown(){await Promise.all(this.processors.map((e=>e.shutdown())))}}class v{resource;forceFlushTimeoutMillis;logRecordLimits;processors;loggers=new Map;activeProcessor;registeredLogRecordProcessors=[];constructor(e,t,r,n){this.resource=e,this.forceFlushTimeoutMillis=t,this.logRecordLimits=r,this.processors=n,n.length>0?(this.registeredLogRecordProcessors=n,this.activeProcessor=new b(this.registeredLogRecordProcessors,this.forceFlushTimeoutMillis)):this.activeProcessor=new f}}class _{_shutdownOnce;_sharedState;constructor(e={}){const t=(0,i.h)({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:(0,g.Jk)("OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,g.Jk)("OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT")??128},includeTraceContext:!0},e),r=e.resource??(0,s.gk)();var n;this._sharedState=new v(r,t.forceFlushTimeoutMillis,{attributeCountLimit:(n=t.logRecordLimits).attributeCountLimit??(0,g.Jk)("OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT")??(0,g.Jk)("OTEL_ATTRIBUTE_COUNT_LIMIT")??128,attributeValueLengthLimit:n.attributeValueLengthLimit??(0,g.Jk)("OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT")??(0,g.Jk)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0},e?.processors??[]),this._shutdownOnce=new a.I(this._shutdown,this)}getLogger(e,t,r){if(this._shutdownOnce.isCalled)return n.s.warn("A shutdown LoggerProvider cannot provide a Logger"),o.G;e||n.s.warn("Logger requested without instrumentation scope name.");const s=e||"unknown",i=`${s}@${t||""}:${r?.schemaUrl||""}`;return this._sharedState.loggers.has(i)||this._sharedState.loggers.set(i,new h({name:s,version:t,schemaUrl:r?.schemaUrl},this._sharedState)),this._sharedState.loggers.get(i)}forceFlush(){return this._shutdownOnce.isCalled?(n.s.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()}shutdown(){return this._shutdownOnce.isCalled?(n.s.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()}_shutdown(){return this._sharedState.activeProcessor.shutdown()}}var S=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/ExportResult.js");class T{export(e,t){this._sendLogRecords(e,t)}shutdown(){return Promise.resolve()}_exportInfo(e){return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationScope,timestamp:(0,p.w_)(e.hrTime),traceId:e.spanContext?.traceId,spanId:e.spanContext?.spanId,traceFlags:e.spanContext?.traceFlags,severityText:e.severityText,severityNumber:e.severityNumber,body:e.body,attributes:e.attributes}}_sendLogRecords(e,t){for(const t of e)console.dir(this._exportInfo(t),{depth:3});t?.({code:S.V.SUCCESS})}}var x=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),E=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/global-error-handler.js");class C{_exporter;_shutdownOnce;_unresolvedExports;constructor(e){this._exporter=e,this._shutdownOnce=new a.I(this._shutdown,this),this._unresolvedExports=new Set}onEmit(e){if(this._shutdownOnce.isCalled)return;const t=()=>x.internal._export(this._exporter,[e]).then((e=>{e.code!==S.V.SUCCESS&&(0,E.s)(e.error??new Error(`SimpleLogRecordProcessor: log record export failed (status ${e})`))})).catch(E.s);if(e.resource.asyncAttributesPending){const r=e.resource.waitForAsyncAttributes?.().then((()=>(this._unresolvedExports.delete(r),t())),E.s);null!=r&&this._unresolvedExports.add(r)}else t()}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class w{_finishedLogRecords=[];_stopped=!1;export(e,t){if(this._stopped)return t({code:S.V.FAILED,error:new Error("Exporter has been stopped")});this._finishedLogRecords.push(...e),t({code:S.V.SUCCESS})}shutdown(){return this._stopped=!0,this.reset(),Promise.resolve()}getFinishedLogRecords(){return this._finishedLogRecords}reset(){this._finishedLogRecords=[]}}var j=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/timer-util.js");class O{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_finishedLogRecords=[];_timer;_shutdownOnce;constructor(e,t){this._exporter=e,this._maxExportBatchSize=t?.maxExportBatchSize??(0,g.Jk)("OTEL_BLRP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=t?.maxQueueSize??(0,g.Jk)("OTEL_BLRP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=t?.scheduledDelayMillis??(0,g.Jk)("OTEL_BLRP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=t?.exportTimeoutMillis??(0,g.Jk)("OTEL_BLRP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new a.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(n.s.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}onEmit(e){this._shutdownOnce.isCalled||this._addToBuffer(e)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}shutdown(){return this._shutdownOnce.call()}async _shutdown(){this.onShutdown(),await this._flushAll(),await this._exporter.shutdown()}_addToBuffer(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{const r=[],n=Math.ceil(this._finishedLogRecords.length/this._maxExportBatchSize);for(let e=0;e<n;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedLogRecords.length?Promise.resolve():new Promise(((e,t)=>{(0,y.o)(this._export(this._finishedLogRecords.splice(0,this._maxExportBatchSize)),this._exportTimeoutMillis).then((()=>e())).catch(t)}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedLogRecords.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{(0,E.s)(e)}))}),this._scheduledDelayMillis),(0,j.K)(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}_export(e){const t=()=>x.internal._export(this._exporter,e).then((e=>{e.code!==S.V.SUCCESS&&(0,E.s)(e.error??new Error(`BatchLogRecordProcessor: log record export failed (status ${e})`))})).catch(E.s),r=e.map((e=>e.resource)).filter((e=>e.asyncAttributesPending));return 0===r.length?t():Promise.all(r.map((e=>e.waitForAsyncAttributes?.()))).then(t,E.s)}}class P extends O{onShutdown(){}}},"../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/AggregationTemporality.js":(e,t,r)=>{var n;r.d(t,{h:()=>n}),function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"}(n||(n={}))},"../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/MetricData.js":(e,t,r)=>{var n,o;r.d(t,{O:()=>n,n:()=>o}),function(e){e.COUNTER="COUNTER",e.GAUGE="GAUGE",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(n||(n={})),function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"}(o||(o={}))},"../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{AggregationTemporality:()=>n.h,AggregationType:()=>a.D,ConsoleMetricExporter:()=>y,DataPointType:()=>o.n,InMemoryMetricExporter:()=>f,InstrumentType:()=>o.O,MeterProvider:()=>me,MetricReader:()=>u,PeriodicExportingMetricReader:()=>g,TimeoutError:()=>i.MU,createAllowListAttributesProcessor:()=>te,createDenyListAttributesProcessor:()=>re});var n=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/AggregationTemporality.js"),o=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/MetricData.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js"),i=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/utils.js"),a=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/view/AggregationOption.js");const l=e=>({type:a.D.DEFAULT}),c=e=>n.h.CUMULATIVE;class u{_shutdown=!1;_metricProducers;_sdkMetricProducer;_aggregationTemporalitySelector;_aggregationSelector;_cardinalitySelector;constructor(e){this._aggregationSelector=e?.aggregationSelector??l,this._aggregationTemporalitySelector=e?.aggregationTemporalitySelector??c,this._metricProducers=e?.metricProducers??[],this._cardinalitySelector=e?.cardinalitySelector}setMetricProducer(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}selectCardinalityLimit(e){return this._cardinalitySelector?this._cardinalitySelector(e):2e3}onInitialized(){}async collect(e){if(void 0===this._sdkMetricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");const[t,...r]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:e?.timeoutMillis}),...this._metricProducers.map((t=>t.collect({timeoutMillis:e?.timeoutMillis})))]),n=t.errors.concat((0,i.kR)(r,(e=>e.errors)));return{resourceMetrics:{resource:t.resourceMetrics.resource,scopeMetrics:t.resourceMetrics.scopeMetrics.concat((0,i.kR)(r,(e=>e.resourceMetrics.scopeMetrics)))},errors:n}}async shutdown(e){this._shutdown?s.s.error("Cannot call shutdown twice."):(null==e?.timeoutMillis?await this.onShutdown():await(0,i.od)(this.onShutdown(),e.timeoutMillis),this._shutdown=!0)}async forceFlush(e){this._shutdown?s.s.warn("Cannot forceFlush on already shutdown MetricReader."):null!=e?.timeoutMillis?await(0,i.od)(this.onForceFlush(),e.timeoutMillis):await this.onForceFlush()}}var p=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/global-error-handler.js"),d=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),m=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/ExportResult.js"),h=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/timer-util.js");class g extends u{_interval;_exporter;_exportInterval;_exportTimeout;constructor(e){if(super({aggregationSelector:e.exporter.selectAggregation?.bind(e.exporter),aggregationTemporalitySelector:e.exporter.selectAggregationTemporality?.bind(e.exporter),metricProducers:e.metricProducers}),void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&e.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<e.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=e.exportIntervalMillis??6e4,this._exportTimeout=e.exportTimeoutMillis??3e4,this._exporter=e.exporter}async _runOnce(){try{await(0,i.od)(this._doRun(),this._exportTimeout)}catch(e){if(e instanceof i.MU)return void s.s.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);(0,p.s)(e)}}async _doRun(){const{resourceMetrics:e,errors:t}=await this.collect({timeoutMillis:this._exportTimeout});if(t.length>0&&s.s.error("PeriodicExportingMetricReader: metrics collection errors",...t),e.resource.asyncAttributesPending)try{await(e.resource.waitForAsyncAttributes?.())}catch(e){s.s.debug("Error while resolving async portion of resource: ",e),(0,p.s)(e)}if(0===e.scopeMetrics.length)return;const r=await d.internal._export(this._exporter,e);if(r.code!==m.V.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${r.error})`)}onInitialized(){this._interval=setInterval((()=>{this._runOnce()}),this._exportInterval),(0,h.K)(this._interval)}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this.onForceFlush(),await this._exporter.shutdown()}}class f{_shutdown=!1;_aggregationTemporality;_metrics=[];constructor(e){this._aggregationTemporality=e}export(e,t){this._shutdown?setTimeout((()=>t({code:m.V.FAILED})),0):(this._metrics.push(e),setTimeout((()=>t({code:m.V.SUCCESS})),0))}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(e){return this._aggregationTemporality}shutdown(){return this._shutdown=!0,Promise.resolve()}}class y{_shutdown=!1;_temporalitySelector;constructor(e){this._temporalitySelector=e?.temporalitySelector??c}export(e,t){if(!this._shutdown)return y._sendMetrics(e,t);setImmediate(t,{code:m.V.FAILED})}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._temporalitySelector(e)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(e,t){for(const t of e.scopeMetrics)for(const e of t.metrics)console.dir({descriptor:e.descriptor,dataPointType:e.dataPointType,dataPoints:e.dataPoints},{depth:null});t({code:m.V.SUCCESS})}}var b=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/metrics/NoopMeter.js"),v=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/ResourceImpl.js");class _{_registeredViews=[];addView(e){this._registeredViews.push(e)}findViews(e,t){return this._registeredViews.filter((r=>this._matchInstrument(r.instrumentSelector,e)&&this._matchMeter(r.meterSelector,t)))}_matchInstrument(e,t){return(void 0===e.getType()||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)}_matchMeter(e,t){return e.getNameFilter().match(t.name)&&(void 0===t.version||e.getVersionFilter().match(t.version))&&(void 0===t.schemaUrl||e.getSchemaUrlFilter().match(t.schemaUrl))}}var S=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/metrics/Metric.js");function T(e,t,r){return function(e){return null!=e.match(x)}(e)||s.s.warn(`Invalid metric name: "${e}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:e,type:t,description:r?.description??"",unit:r?.unit??"",valueType:r?.valueType??S.e.DOUBLE,advice:r?.advice??{}}}const x=/^[a-z][a-z0-9_.\-/]{0,254}$/i;var E=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/context-api.js"),C=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js");class w{_writableMetricStorage;_descriptor;constructor(e,t){this._writableMetricStorage=e,this._descriptor=t}_record(e,t={},r=E._.active()){"number"==typeof e?(this._descriptor.valueType!==S.e.INT||Number.isInteger(e)||(s.s.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e),Number.isInteger(e)))&&this._writableMetricStorage.record(e,t,r,(0,C.lg)(Date.now())):s.s.warn(`non-number value provided to metric ${this._descriptor.name}: ${e}`)}}class j extends w{add(e,t,r){this._record(e,t,r)}}class O extends w{add(e,t,r){e<0?s.s.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`):this._record(e,t,r)}}class P extends w{record(e,t,r){this._record(e,t,r)}}class R extends w{record(e,t,r){e<0?s.s.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`):this._record(e,t,r)}}class N{_observableRegistry;_metricStorages;_descriptor;constructor(e,t,r){this._observableRegistry=r,this._descriptor=e,this._metricStorages=t}addCallback(e){this._observableRegistry.addCallback(e,this)}removeCallback(e){this._observableRegistry.removeCallback(e,this)}}class k extends N{}class A extends N{}class I extends N{}function M(e){return e instanceof N}class L{_meterSharedState;constructor(e){this._meterSharedState=e}createGauge(e,t){const r=T(e,o.O.GAUGE,t),n=this._meterSharedState.registerMetricStorage(r);return new P(n,r)}createHistogram(e,t){const r=T(e,o.O.HISTOGRAM,t),n=this._meterSharedState.registerMetricStorage(r);return new R(n,r)}createCounter(e,t){const r=T(e,o.O.COUNTER,t),n=this._meterSharedState.registerMetricStorage(r);return new O(n,r)}createUpDownCounter(e,t){const r=T(e,o.O.UP_DOWN_COUNTER,t),n=this._meterSharedState.registerMetricStorage(r);return new j(n,r)}createObservableGauge(e,t){const r=T(e,o.O.OBSERVABLE_GAUGE,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new A(r,n,this._meterSharedState.observableRegistry)}createObservableCounter(e,t){const r=T(e,o.O.OBSERVABLE_COUNTER,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new k(r,n,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(e,t){const r=T(e,o.O.OBSERVABLE_UP_DOWN_COUNTER,t),n=this._meterSharedState.registerAsyncMetricStorage(r);return new I(r,n,this._meterSharedState.observableRegistry)}addBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)}removeBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)}}class U{_instrumentDescriptor;constructor(e){this._instrumentDescriptor=e}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=T(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}}class D{_hash;_valueMap=new Map;_keyMap=new Map;constructor(e){this._hash=e}get(e,t){return t??=this._hash(e),this._valueMap.get(t)}getOrDefault(e,t){const r=this._hash(e);if(this._valueMap.has(r))return this._valueMap.get(r);const n=t();return this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,n),n}set(e,t,r){r??=this._hash(e),this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,t)}has(e,t){return t??=this._hash(e),this._valueMap.has(t)}*keys(){const e=this._keyMap.entries();let t=e.next();for(;!0!==t.done;)yield[t.value[1],t.value[0]],t=e.next()}*entries(){const e=this._valueMap.entries();let t=e.next();for(;!0!==t.done;)yield[this._keyMap.get(t.value[0]),t.value[1],t.value[0]],t=e.next()}get size(){return this._valueMap.size}}class B extends D{constructor(){super(i.eM)}}class V{_aggregator;_activeCollectionStorage=new B;_cumulativeMemoStorage=new B;_cardinalityLimit;_overflowAttributes={"otel.metric.overflow":!0};_overflowHashCode;constructor(e,t){this._aggregator=e,this._cardinalityLimit=(t??2e3)-1,this._overflowHashCode=(0,i.eM)(this._overflowAttributes)}record(e,t,r,n){let o=this._activeCollectionStorage.get(t);if(!o){if(this._activeCollectionStorage.size>=this._cardinalityLimit){const t=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,(()=>this._aggregator.createAccumulation(n)));return void t?.record(e)}o=this._aggregator.createAccumulation(n),this._activeCollectionStorage.set(t,o)}o?.record(e)}batchCumulate(e,t){Array.from(e.entries()).forEach((([e,r,n])=>{const o=this._aggregator.createAccumulation(t);o?.record(r);let s=o;if(this._cumulativeMemoStorage.has(e,n)){const t=this._cumulativeMemoStorage.get(e,n);s=this._aggregator.diff(t,o)}else if(this._cumulativeMemoStorage.size>=this._cardinalityLimit&&(e=this._overflowAttributes,n=this._overflowHashCode,this._cumulativeMemoStorage.has(e,n))){const t=this._cumulativeMemoStorage.get(e,n);s=this._aggregator.diff(t,o)}if(this._activeCollectionStorage.has(e,n)){const t=this._activeCollectionStorage.get(e,n);s=this._aggregator.merge(t,s)}this._cumulativeMemoStorage.set(e,o,n),this._activeCollectionStorage.set(e,s,n)}))}collect(){const e=this._activeCollectionStorage;return this._activeCollectionStorage=new B,e}}class F{_aggregator;_unreportedAccumulations=new Map;_reportHistory=new Map;constructor(e,t){this._aggregator=e,t.forEach((e=>{this._unreportedAccumulations.set(e,[])}))}buildMetrics(e,t,r,o){this._stashAccumulations(r);const s=this._getMergedUnreportedAccumulations(e);let i,a=s;if(this._reportHistory.has(e)){const t=this._reportHistory.get(e),r=t.collectionTime;i=t.aggregationTemporality,a=i===n.h.CUMULATIVE?F.merge(t.accumulations,s,this._aggregator):F.calibrateStartTime(t.accumulations,s,r)}else i=e.selectAggregationTemporality(t.type);this._reportHistory.set(e,{accumulations:a,collectionTime:o,aggregationTemporality:i});const l=(c=a,Array.from(c.entries()));var c;if(0!==l.length)return this._aggregator.toMetricData(t,i,l,o)}_stashAccumulations(e){const t=this._unreportedAccumulations.keys();for(const r of t){let t=this._unreportedAccumulations.get(r);void 0===t&&(t=[],this._unreportedAccumulations.set(r,t)),t.push(e)}}_getMergedUnreportedAccumulations(e){let t=new B;const r=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),void 0===r)return t;for(const e of r)t=F.merge(t,e,this._aggregator);return t}static merge(e,t,r){const n=e,o=t.entries();let s=o.next();for(;!0!==s.done;){const[t,i,a]=s.value;if(e.has(t,a)){const o=e.get(t,a),s=r.merge(o,i);n.set(t,s,a)}else n.set(t,i,a);s=o.next()}return n}static calibrateStartTime(e,t,r){for(const[n,o]of e.keys()){const e=t.get(n,o);e?.setStartTime(r)}return t}}class z extends U{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(e,t,r,n,o){super(e),this._attributesProcessor=r,this._aggregationCardinalityLimit=o,this._deltaMetricStorage=new V(t,this._aggregationCardinalityLimit),this._temporalMetricStorage=new F(t,n)}record(e,t){const r=new B;Array.from(e.entries()).forEach((([e,t])=>{r.set(this._attributesProcessor.process(e),t)})),this._deltaMetricStorage.batchCumulate(r,t)}collect(e,t){const r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)}}function H(e,t){let r="";return e.unit!==t.unit&&(r+=`\t- Unit '${e.unit}' does not match '${t.unit}'\n`),e.type!==t.type&&(r+=`\t- Type '${e.type}' does not match '${t.type}'\n`),e.valueType!==t.valueType&&(r+=`\t- Value Type '${e.valueType}' does not match '${t.valueType}'\n`),e.description!==t.description&&(r+=`\t- Description '${e.description}' does not match '${t.description}'\n`),r}function G(e,t){return e.valueType!==t.valueType?function(e,t){return`\t- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}(e,t):e.unit!==t.unit?function(e,t){return`\t- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}(e,t):e.type!==t.type?function(e,t){const r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}(e,t):e.description!==t.description?function(e,t){const r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'\n    \t- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}\n    \t- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}(e,t):""}class ${_sharedRegistry=new Map;_perCollectorRegistry=new Map;static create(){return new $}getStorages(e){let t=[];for(const e of this._sharedRegistry.values())t=t.concat(e);const r=this._perCollectorRegistry.get(e);if(null!=r)for(const e of r.values())t=t.concat(e);return t}register(e){this._registerStorage(e,this._sharedRegistry)}registerForCollector(e,t){let r=this._perCollectorRegistry.get(e);null==r&&(r=new Map,this._perCollectorRegistry.set(e,r)),this._registerStorage(t,r)}findOrUpdateCompatibleStorage(e){const t=this._sharedRegistry.get(e.name);return void 0===t?null:this._findOrUpdateCompatibleStorage(e,t)}findOrUpdateCompatibleCollectorStorage(e,t){const r=this._perCollectorRegistry.get(e);if(void 0===r)return null;const n=r.get(t.name);return void 0===n?null:this._findOrUpdateCompatibleStorage(t,n)}_registerStorage(e,t){const r=e.getInstrumentDescriptor(),n=t.get(r.name);void 0!==n?n.push(e):t.set(r.name,[e])}_findOrUpdateCompatibleStorage(e,t){let r=null;for(const a of t){const t=a.getInstrumentDescriptor();n=t,o=e,(0,i.Pz)(n.name,o.name)&&n.unit===o.unit&&n.type===o.type&&n.valueType===o.valueType?(t.description!==e.description&&(e.description.length>t.description.length&&a.updateDescription(e.description),s.s.warn("A view or instrument with the name ",e.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",H(t,e),"The longer description will be used.\nTo resolve the conflict:",G(t,e))),r=a):s.s.warn("A view or instrument with the name ",e.name," has already been registered and is incompatible with another registered view.\n","Details:\n",H(t,e),"To resolve the conflict:\n",G(t,e))}var n,o;return r}}class K{_backingStorages;constructor(e){this._backingStorages=e}record(e,t,r,n){this._backingStorages.forEach((o=>{o.record(e,t,r,n)}))}}class q{_instrumentName;_valueType;_buffer=new B;constructor(e,t){this._instrumentName=e,this._valueType=t}observe(e,t={}){"number"==typeof e?(this._valueType!==S.e.INT||Number.isInteger(e)||(s.s.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),e=Math.trunc(e),Number.isInteger(e)))&&this._buffer.set(t,e):s.s.warn(`non-number value provided to metric ${this._instrumentName}: ${e}`)}}class W{_buffer=new Map;observe(e,t,r={}){if(!M(e))return;let n=this._buffer.get(e);null==n&&(n=new B,this._buffer.set(e,n)),"number"==typeof t?(e._descriptor.valueType!==S.e.INT||Number.isInteger(t)||(s.s.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),Number.isInteger(t)))&&n.set(r,t):s.s.warn(`non-number value provided to metric ${e._descriptor.name}: ${t}`)}}class Y{_callbacks=[];_batchCallbacks=[];addCallback(e,t){this._findCallback(e,t)>=0||this._callbacks.push({callback:e,instrument:t})}removeCallback(e,t){const r=this._findCallback(e,t);r<0||this._callbacks.splice(r,1)}addBatchCallback(e,t){const r=new Set(t.filter(M));0!==r.size?this._findBatchCallback(e,r)>=0||this._batchCallbacks.push({callback:e,instruments:r}):s.s.error("BatchObservableCallback is not associated with valid instruments",t)}removeBatchCallback(e,t){const r=new Set(t.filter(M)),n=this._findBatchCallback(e,r);n<0||this._batchCallbacks.splice(n,1)}async observe(e,t){const r=this._observeCallbacks(e,t),n=this._observeBatchCallbacks(e,t);return(await(0,i.u9)([...r,...n])).filter(i.gL).map((e=>e.reason))}_observeCallbacks(e,t){return this._callbacks.map((async({callback:r,instrument:n})=>{const o=new q(n._descriptor.name,n._descriptor.valueType);let s=Promise.resolve(r(o));null!=t&&(s=(0,i.od)(s,t)),await s,n._metricStorages.forEach((t=>{t.record(o._buffer,e)}))}))}_observeBatchCallbacks(e,t){return this._batchCallbacks.map((async({callback:r,instruments:n})=>{const o=new W;let s=Promise.resolve(r(o));null!=t&&(s=(0,i.od)(s,t)),await s,n.forEach((t=>{const r=o._buffer.get(t);null!=r&&t._metricStorages.forEach((t=>{t.record(r,e)}))}))}))}_findCallback(e,t){return this._callbacks.findIndex((r=>r.callback===e&&r.instrument===t))}_findBatchCallback(e,t){return this._batchCallbacks.findIndex((r=>r.callback===e&&(0,i.yZ)(r.instruments,t)))}}class J extends U{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(e,t,r,n,o){super(e),this._attributesProcessor=r,this._aggregationCardinalityLimit=o,this._deltaMetricStorage=new V(t,this._aggregationCardinalityLimit),this._temporalMetricStorage=new F(t,n)}record(e,t,r,n){t=this._attributesProcessor.process(t,r),this._deltaMetricStorage.record(e,t,r,n)}collect(e,t){const r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)}}class X{_processors;constructor(e){this._processors=e}process(e,t){let r=e;for(const e of this._processors)r=e.process(r,t);return r}}class Q{_allowedAttributeNames;constructor(e){this._allowedAttributeNames=e}process(e,t){const r={};return Object.keys(e).filter((e=>this._allowedAttributeNames.includes(e))).forEach((t=>r[t]=e[t])),r}}class Z{_deniedAttributeNames;constructor(e){this._deniedAttributeNames=e}process(e,t){const r={};return Object.keys(e).filter((e=>!this._deniedAttributeNames.includes(e))).forEach((t=>r[t]=e[t])),r}}function ee(){return ne}function te(e){return new Q(e)}function re(e){return new Z(e)}const ne=new class{process(e,t){return e}};class oe{_meterProviderSharedState;_instrumentationScope;metricStorageRegistry=new $;observableRegistry=new Y;meter;constructor(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.meter=new L(this)}registerMetricStorage(e){const t=this._registerMetricStorage(e,J);return 1===t.length?t[0]:new K(t)}registerAsyncMetricStorage(e){return this._registerMetricStorage(e,z)}async collect(e,t,r){const n=await this.observableRegistry.observe(t,r?.timeoutMillis),o=this.metricStorageRegistry.getStorages(e);if(0===o.length)return null;const s=o.map((r=>r.collect(e,t))).filter(i.Vq);return 0===s.length?{errors:n}:{scopeMetrics:{scope:this._instrumentationScope,metrics:s},errors:n}}_registerMetricStorage(e,t){let r=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope).map((r=>{const n=function(e,t){return{name:e.name??t.name,description:e.description??t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice}}(r,e),o=this.metricStorageRegistry.findOrUpdateCompatibleStorage(n);if(null!=o)return o;const s=r.aggregation.createAggregator(n),i=new t(n,s,r.attributesProcessor,this._meterProviderSharedState.metricCollectors,r.aggregationCardinalityLimit);return this.metricStorageRegistry.register(i),i}));if(0===r.length){const n=this._meterProviderSharedState.selectAggregations(e.type).map((([r,n])=>{const o=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(r,e);if(null!=o)return o;const s=n.createAggregator(e),i=r.selectCardinalityLimit(e.type),a=new t(e,s,ee(),[r],i);return this.metricStorageRegistry.registerForCollector(r,a),a}));r=r.concat(n)}return r}}class se{resource;viewRegistry=new _;metricCollectors=[];meterSharedStates=new Map;constructor(e){this.resource=e}getMeterSharedState(e){const t=(0,i.UY)(e);let r=this.meterSharedStates.get(t);return null==r&&(r=new oe(this,e),this.meterSharedStates.set(t,r)),r}selectAggregations(e){const t=[];for(const r of this.metricCollectors)t.push([r,(0,a.E)(r.selectAggregation(e))]);return t}}class ie{_sharedState;_metricReader;constructor(e,t){this._sharedState=e,this._metricReader=t}async collect(e){const t=(0,C.lg)(Date.now()),r=[],n=[],o=Array.from(this._sharedState.meterSharedStates.values()).map((async o=>{const s=await o.collect(this,t,e);null!=s?.scopeMetrics&&r.push(s.scopeMetrics),null!=s?.errors&&n.push(...s.errors)}));return await Promise.all(o),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:r},errors:n}}async forceFlush(e){await this._metricReader.forceFlush(e)}async shutdown(e){await this._metricReader.shutdown(e)}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}selectAggregation(e){return this._metricReader.selectAggregation(e)}selectCardinalityLimit(e){return this._metricReader.selectCardinalityLimit?.(e)??2e3}}const ae=/[\^$\\.+?()[\]{}|]/g;class le{_matchAll;_regexp;constructor(e){"*"===e?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(le.escapePattern(e)))}match(e){return!!this._matchAll||this._regexp.test(e)}static escapePattern(e){return`^${e.replace(ae,"\\$&").replace("*",".*")}$`}static hasWildcard(e){return e.includes("*")}}class ce{_matchAll;_pattern;constructor(e){this._matchAll=void 0===e,this._pattern=e}match(e){return!!this._matchAll||e===this._pattern}}class ue{_nameFilter;_type;_unitFilter;constructor(e){this._nameFilter=new le(e?.name??"*"),this._type=e?.type,this._unitFilter=new ce(e?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}class pe{_nameFilter;_versionFilter;_schemaUrlFilter;constructor(e){this._nameFilter=new ce(e?.name),this._versionFilter=new ce(e?.version),this._schemaUrlFilter=new ce(e?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}class de{name;description;aggregation;attributesProcessor;instrumentSelector;meterSelector;aggregationCardinalityLimit;constructor(e){var t;!function(e){if(null==(t=e).instrumentName&&null==t.instrumentType&&null==t.instrumentUnit&&null==t.meterName&&null==t.meterVersion&&null==t.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");var t;if(null!=e.name&&(null==e?.instrumentName||le.hasWildcard(e.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}(e),null!=e.attributesProcessors?this.attributesProcessor=(t=e.attributesProcessors,new X(t)):this.attributesProcessor=ee(),this.name=e.name,this.description=e.description,this.aggregation=(0,a.E)(e.aggregation??{type:a.D.DEFAULT}),this.instrumentSelector=new ue({name:e.instrumentName,type:e.instrumentType,unit:e.instrumentUnit}),this.meterSelector=new pe({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl}),this.aggregationCardinalityLimit=e.aggregationCardinalityLimit}}class me{_sharedState;_shutdown=!1;constructor(e){if(this._sharedState=new se(e?.resource??(0,v.gk)()),null!=e?.views&&e.views.length>0)for(const t of e.views)this._sharedState.viewRegistry.addView(new de(t));if(null!=e?.readers&&e.readers.length>0)for(const t of e.readers){const e=new ie(this._sharedState,t);t.setMetricProducer(e),this._sharedState.metricCollectors.push(e)}}getMeter(e,t="",r={}){return this._shutdown?(s.s.warn("A shutdown MeterProvider cannot provide a Meter"),(0,b.Ac)()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:r.schemaUrl}).meter}async shutdown(e){this._shutdown?s.s.warn("shutdown may only be called once per MeterProvider"):(this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map((t=>t.shutdown(e)))))}async forceFlush(e){this._shutdown?s.s.warn("invalid attempt to force flush after MeterProvider shutdown"):await Promise.all(this._sharedState.metricCollectors.map((t=>t.forceFlush(e))))}}},"../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/utils.js":(e,t,r)=>{function n(e){return null!=e}function o(e){let t=Object.keys(e);return 0===t.length?"":(t=t.sort(),JSON.stringify(t.map((t=>[t,e[t]]))))}function s(e){return`${e.name}:${e.version??""}:${e.schemaUrl??""}`}r.d(t,{Dm:()=>d,MU:()=>i,Pz:()=>m,UY:()=>s,Vq:()=>n,eM:()=>o,gL:()=>c,kR:()=>u,od:()=>a,u9:()=>l,yZ:()=>p});class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}function a(e,t){let r;const n=new Promise((function(e,n){r=setTimeout((function(){n(new i("Operation timed out."))}),t)}));return Promise.race([e,n]).then((e=>(clearTimeout(r),e)),(e=>{throw clearTimeout(r),e}))}async function l(e){return Promise.all(e.map((async e=>{try{return{status:"fulfilled",value:await e}}catch(e){return{status:"rejected",reason:e}}})))}function c(e){return"rejected"===e.status}function u(e,t){const r=[];return e.forEach((e=>{r.push(...t(e))})),r}function p(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function d(e,t){let r=0,n=e.length-1,o=e.length;for(;n>=r;){const s=r+Math.trunc((n-r)/2);e[s]<t?r=s+1:(o=s,n=s-1)}return o}function m(e,t){return e.toLowerCase()===t.toLowerCase()}},"../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/view/AggregationOption.js":(e,t,r)=>{r.d(t,{D:()=>V,E:()=>F});var n,o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js");!function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"}(n||(n={}));class s{kind=n.DROP;createAccumulation(){}merge(e,t){}diff(e,t){}toMetricData(e,t,r,n){}}var i=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/export/MetricData.js");class a{startTime;monotonic;_current;reset;constructor(e,t,r=0,n=!1){this.startTime=e,this.monotonic=t,this._current=r,this.reset=n}record(e){this.monotonic&&e<0||(this._current+=e)}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}class l{monotonic;kind=n.SUM;constructor(e){this.monotonic=e}createAccumulation(e){return new a(e,this.monotonic)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue();return t.reset?new a(t.startTime,this.monotonic,n,t.reset):new a(e.startTime,this.monotonic,r+n)}diff(e,t){const r=e.toPointValue(),n=t.toPointValue();return this.monotonic&&r>n?new a(t.startTime,this.monotonic,n,!0):new a(t.startTime,this.monotonic,n-r)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.n.SUM,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()}))),isMonotonic:this.monotonic}}}var c=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js");class u{startTime;_current;sampleTime;constructor(e,t=0,r=[0,0]){this.startTime=e,this._current=t,this.sampleTime=r}record(e){this._current=e,this.sampleTime=(0,c.lg)(Date.now())}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}class p{kind=n.LAST_VALUE;createAccumulation(e){return new u(e)}merge(e,t){const r=(0,c.w_)(t.sampleTime)>=(0,c.w_)(e.sampleTime)?t:e;return new u(e.startTime,r.toPointValue(),r.sampleTime)}diff(e,t){const r=(0,c.w_)(t.sampleTime)>=(0,c.w_)(e.sampleTime)?t:e;return new u(t.startTime,r.toPointValue(),r.sampleTime)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.n.GAUGE,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()})))}}}var d=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/utils.js");class m{startTime;_boundaries;_recordMinMax;_current;constructor(e,t,r=!0,n=function(e){const t=e.map((()=>0));return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}(t)){this.startTime=e,this._boundaries=t,this._recordMinMax=r,this._current=n}record(e){if(Number.isNaN(e))return;this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);const t=(0,d.Dm)(this._boundaries,e);this._current.buckets.counts[t]+=1}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}class h{_boundaries;_recordMinMax;kind=n.HISTOGRAM;constructor(e,t){this._boundaries=e,this._recordMinMax=t}createAccumulation(e){return new m(e,this._boundaries,this._recordMinMax)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,s=n.buckets.counts,i=new Array(o.length);for(let e=0;e<o.length;e++)i[e]=o[e]+s[e];let a=1/0,l=-1/0;return this._recordMinMax&&(r.hasMinMax&&n.hasMinMax?(a=Math.min(r.min,n.min),l=Math.max(r.max,n.max)):r.hasMinMax?(a=r.min,l=r.max):n.hasMinMax&&(a=n.min,l=n.max)),new m(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:i},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:a,max:l})}diff(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,s=n.buckets.counts,i=new Array(o.length);for(let e=0;e<o.length;e++)i[e]=s[e]-o[e];return new m(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:i},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.n.HISTOGRAM,dataPoints:r.map((([t,r])=>{const o=r.toPointValue(),s=e.type===i.O.GAUGE||e.type===i.O.UP_DOWN_COUNTER||e.type===i.O.OBSERVABLE_GAUGE||e.type===i.O.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:n,value:{min:o.hasMinMax?o.min:void 0,max:o.hasMinMax?o.max:void 0,sum:s?void 0:o.sum,buckets:o.buckets,count:o.count}}}))}}}class g{backing;indexBase;indexStart;indexEnd;constructor(e=new f,t=0,r=0,n=0){this.backing=e,this.indexBase=t,this.indexStart=r,this.indexEnd=n}get offset(){return this.indexStart}get length(){return 0===this.backing.length||this.indexEnd===this.indexStart&&0===this.at(0)?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},((e,t)=>this.at(t)))}at(e){const t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)}incrementBucket(e,t){this.backing.increment(e,t)}decrementBucket(e,t){this.backing.decrement(e,t)}trim(){for(let e=0;e<this.length;e++){if(0!==this.at(e)){this.indexStart+=e;break}if(e===this.length-1)return void(this.indexStart=this.indexEnd=this.indexBase=0)}for(let e=this.length-1;e>=0;e--)if(0!==this.at(e)){this.indexEnd-=this.length-e-1;break}this._rotate()}downscale(e){this._rotate();const t=1+this.indexEnd-this.indexStart,r=1<<e;let n=0,o=0;for(let e=this.indexStart;e<=this.indexEnd;){let s=e%r;s<0&&(s+=r);for(let i=s;i<r&&n<t;i++)this._relocateBucket(o,n),n++,e++;o++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart}clone(){return new g(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){const e=this.indexBase-this.indexStart;0!==e&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)}_relocateBucket(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))}}class f{_counts;constructor(e=[0]){this._counts=e}get length(){return this._counts.length}countAt(e){return this._counts[e]}growTo(e,t,r){const n=new Array(e).fill(0);n.splice(r,this._counts.length-t,...this._counts.slice(t)),n.splice(0,t,...this._counts.slice(0,t)),this._counts=n}reverse(e,t){const r=Math.floor((e+t)/2)-e;for(let n=0;n<r;n++){const r=this._counts[e+n];this._counts[e+n]=this._counts[t-n-1],this._counts[t-n-1]=r}}emptyBucket(e){const t=this._counts[e];return this._counts[e]=0,t}increment(e,t){this._counts[e]+=t}decrement(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0}clone(){return new f([...this._counts])}}const y=Math.pow(2,-1022);function b(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e),((2146435072&t.getUint32(0))>>20)-1023}function v(e){const t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);const r=t.getUint32(0),n=t.getUint32(4);return(1048575&r)*Math.pow(2,32)+n}function _(e,t){return 0===e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)?e:e*Math.pow(2,t)}class S extends Error{}class T{_shift;constructor(e){this._shift=-e}mapToIndex(e){return e<y?this._minNormalLowerBoundaryIndex():b(e)+this._rightShift(v(e)-1,52)>>this._shift}lowerBoundary(e){const t=this._minNormalLowerBoundaryIndex();if(e<t)throw new S(`underflow: ${e} is < minimum lower boundary: ${t}`);const r=this._maxNormalLowerBoundaryIndex();if(e>r)throw new S(`overflow: ${e} is > maximum lower boundary: ${r}`);return _(1,e<<this._shift)}get scale(){return 0===this._shift?0:-this._shift}_minNormalLowerBoundaryIndex(){let e=-1022>>this._shift;return this._shift<2&&e--,e}_maxNormalLowerBoundaryIndex(){return 1023>>this._shift}_rightShift(e,t){return Math.floor(e*Math.pow(2,-t))}}class x{_scale;_scaleFactor;_inverseFactor;constructor(e){this._scale=e,this._scaleFactor=_(Math.LOG2E,e),this._inverseFactor=_(Math.LN2,-e)}mapToIndex(e){if(e<=y)return this._minNormalLowerBoundaryIndex()-1;if(0===v(e))return(b(e)<<this._scale)-1;const t=Math.floor(Math.log(e)*this._scaleFactor),r=this._maxNormalLowerBoundaryIndex();return t>=r?r:t}lowerBoundary(e){const t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new S(`overflow: ${e} is > maximum lower boundary: ${t}`)}const r=this._minNormalLowerBoundaryIndex();if(e<=r){if(e===r)return y;if(e===r-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new S(`overflow: ${e} is < minimum lower boundary: ${r}`)}return Math.exp(e*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return-1022<<this._scale}_maxNormalLowerBoundaryIndex(){return(1024<<this._scale)-1}}const E=Array.from({length:31},((e,t)=>t>10?new x(t-10):new T(t-10)));function C(e){if(e>20||e<-10)throw new S(`expected scale >= -10 && <= 20, got: ${e}`);return E[e+10]}class w{low;high;static combine(e,t){return new w(Math.min(e.low,t.low),Math.max(e.high,t.high))}constructor(e,t){this.low=e,this.high=t}}class j{startTime;_maxSize;_recordMinMax;_sum;_count;_zeroCount;_min;_max;_positive;_negative;_mapping;constructor(e=e,t=160,r=!0,n=0,s=0,i=0,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=new g,u=new g,p=C(20)){this.startTime=e,this._maxSize=t,this._recordMinMax=r,this._sum=n,this._count=s,this._zeroCount=i,this._min=a,this._max=l,this._positive=c,this._negative=u,this._mapping=p,this._maxSize<2&&(o.s.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: 2`),this._maxSize=2)}record(e){this.updateByIncrement(e,1)}setStartTime(e){this.startTime=e}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(e,t){Number.isNaN(e)||(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,0!==e?(this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)):this._zeroCount+=t)}merge(e){0===this._count?(this._min=e.min,this._max=e.max):0!==e.count&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;const t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)}diff(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;const t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)}clone(){return new j(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(e,t,r){let n=this._mapping.mapToIndex(t),o=!1,s=0,i=0;if(0===e.length?(e.indexStart=n,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):n<e.indexStart&&e.indexEnd-n>=this._maxSize?(o=!0,i=n,s=e.indexEnd):n>e.indexEnd&&n-e.indexStart>=this._maxSize&&(o=!0,i=e.indexStart,s=n),o){const e=this._changeScale(s,i);this._downscale(e),n=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,n,r)}_incrementIndexBy(e,t,r){if(0===r)return;if(0===e.length&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){const r=e.indexEnd-t;r>=e.backing.length&&this._grow(e,r+1),e.indexStart=t}else if(t>e.indexEnd){const r=t-e.indexStart;r>=e.backing.length&&this._grow(e,r+1),e.indexEnd=t}let n=t-e.indexBase;n<0&&(n+=e.backing.length),e.incrementBucket(n,r)}_grow(e,t){const r=e.backing.length,n=e.indexBase-e.indexStart,o=r-n;let s=(i=t,i--,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,++i);var i;s>this._maxSize&&(s=this._maxSize);const a=s-n;e.backing.growTo(s,o,a)}_changeScale(e,t){let r=0;for(;e-t>=this._maxSize;)e>>=1,t>>=1,r++;return r}_downscale(e){if(0===e)return;if(e<0)throw new Error(`impossible change of scale: ${this.scale}`);const t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=C(t)}_minScale(e){const t=Math.min(this.scale,e.scale),r=w.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),n=w.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(r.high,r.low),t-this._changeScale(n.high,n.low))}_highLowAtScale(e,t,r){if(0===e.length)return new w(0,-1);const n=t-r;return new w(e.indexStart>>n,e.indexEnd>>n)}_mergeBuckets(e,t,r,n){const o=r.offset,s=t.scale-n;for(let t=0;t<r.length;t++)this._incrementIndexBy(e,o+t>>s,r.at(t))}_diffBuckets(e,t,r,n){const o=r.offset,s=t.scale-n;for(let t=0;t<r.length;t++){let n=(o+t>>s)-e.indexBase;n<0&&(n+=e.backing.length),e.decrementBucket(n,r.at(t))}e.trim()}}class O{_maxSize;_recordMinMax;kind=n.EXPONENTIAL_HISTOGRAM;constructor(e,t){this._maxSize=e,this._recordMinMax=t}createAccumulation(e){return new j(e,this._maxSize,this._recordMinMax)}merge(e,t){const r=t.clone();return r.merge(e),r}diff(e,t){const r=t.clone();return r.diff(e),r}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.n.EXPONENTIAL_HISTOGRAM,dataPoints:r.map((([t,r])=>{const o=r.toPointValue(),s=e.type===i.O.GAUGE||e.type===i.O.UP_DOWN_COUNTER||e.type===i.O.OBSERVABLE_GAUGE||e.type===i.O.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:n,value:{min:o.hasMinMax?o.min:void 0,max:o.hasMinMax?o.max:void 0,sum:s?void 0:o.sum,positive:{offset:o.positive.offset,bucketCounts:o.positive.bucketCounts},negative:{offset:o.negative.offset,bucketCounts:o.negative.bucketCounts},count:o.count,scale:o.scale,zeroCount:o.zeroCount}}}))}}}class P{static DEFAULT_INSTANCE=new s;createAggregator(e){return P.DEFAULT_INSTANCE}}class R{static MONOTONIC_INSTANCE=new l(!0);static NON_MONOTONIC_INSTANCE=new l(!1);createAggregator(e){switch(e.type){case i.O.COUNTER:case i.O.OBSERVABLE_COUNTER:case i.O.HISTOGRAM:return R.MONOTONIC_INSTANCE;default:return R.NON_MONOTONIC_INSTANCE}}}class N{static DEFAULT_INSTANCE=new p;createAggregator(e){return N.DEFAULT_INSTANCE}}class k{static DEFAULT_INSTANCE=new h([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);createAggregator(e){return k.DEFAULT_INSTANCE}}class A{_recordMinMax;_boundaries;constructor(e,t=!0){if(this._recordMinMax=t,null==e)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");const r=(e=(e=e.concat()).sort(((e,t)=>e-t))).lastIndexOf(-1/0);let n=e.indexOf(1/0);-1===n&&(n=void 0),this._boundaries=e.slice(r+1,n)}createAggregator(e){return new h(this._boundaries,this._recordMinMax)}}class I{_maxSize;_recordMinMax;constructor(e=160,t=!0){this._maxSize=e,this._recordMinMax=t}createAggregator(e){return new O(this._maxSize,this._recordMinMax)}}const M=new P,L=new R,U=new N,D=new k,B=(new I,new class{_resolve(e){switch(e.type){case i.O.COUNTER:case i.O.UP_DOWN_COUNTER:case i.O.OBSERVABLE_COUNTER:case i.O.OBSERVABLE_UP_DOWN_COUNTER:return L;case i.O.GAUGE:case i.O.OBSERVABLE_GAUGE:return U;case i.O.HISTOGRAM:return e.advice.explicitBucketBoundaries?new A(e.advice.explicitBucketBoundaries):D}return o.s.warn(`Unable to recognize instrument type: ${e.type}`),M}createAggregator(e){return this._resolve(e).createAggregator(e)}});var V;function F(e){switch(e.type){case V.DEFAULT:return B;case V.DROP:return M;case V.SUM:return L;case V.LAST_VALUE:return U;case V.EXPONENTIAL_HISTOGRAM:{const t=e;return new I(t.options?.maxSize,t.options?.recordMinMax)}case V.EXPLICIT_BUCKET_HISTOGRAM:{const t=e;return null==t.options?D:new A(t.options?.boundaries,t.options?.recordMinMax)}default:throw new Error("Unsupported Aggregation")}}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.DROP=1]="DROP",e[e.SUM=2]="SUM",e[e.LAST_VALUE=3]="LAST_VALUE",e[e.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM"}(V||(V={}))},"../../node_modules/.pnpm/@opentelemetry+sdk-node@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/index.js":(e,t,r)=>{t.P=void 0,r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+sdk-logs@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-logs/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-node@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-node/build/src/index.js"),r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/index.js"),r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js");var n=r("../../node_modules/.pnpm/@opentelemetry+sdk-node@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/sdk.js");Object.defineProperty(t,"P",{enumerable:!0,get:function(){return n.NodeSDK}})},"../../node_modules/.pnpm/@opentelemetry+sdk-node@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/sdk.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSDK=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api-logs@0.203.0/node_modules/@opentelemetry/api-logs/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+instrumentation@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js"),i=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/index.js"),a=r("../../node_modules/.pnpm/@opentelemetry+sdk-logs@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-logs/build/esm/index.js"),l=r("../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-http/build/esm/index.js"),c=r("../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-grpc/build/src/index.js"),u=r("../../node_modules/.pnpm/@opentelemetry+exporter-logs-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-logs-otlp-proto/build/esm/index.js"),p=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-grpc/build/src/index.js"),d=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-proto/build/esm/index.js"),m=r("../../node_modules/.pnpm/@opentelemetry+exporter-metrics-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-metrics-otlp-http/build/esm/index.js"),h=r("../../node_modules/.pnpm/@opentelemetry+exporter-prometheus@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-prometheus/build/src/index.js"),g=r("../../node_modules/.pnpm/@opentelemetry+sdk-metrics@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-metrics/build/esm/index.js"),f=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js"),y=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-node@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-node/build/src/index.js"),b=r("../../node_modules/.pnpm/@opentelemetry+semantic-conventions@1.36.0/node_modules/@opentelemetry/semantic-conventions/build/esm/index.js"),v=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),_=r("../../node_modules/.pnpm/@opentelemetry+sdk-node@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/utils.js");function S(e,t){return parseInt(process.env[e]||"")||t}t.NodeSDK=class{_tracerProviderConfig;_loggerProviderConfig;_meterProviderConfig;_instrumentations;_resource;_resourceDetectors;_autoDetectResources;_tracerProvider;_loggerProvider;_meterProvider;_serviceName;_configuration;_disabled;constructor(e={}){(0,v.getBooleanFromEnv)("OTEL_SDK_DISABLED")&&(this._disabled=!0);const t=(0,v.getStringFromEnv)("OTEL_LOG_LEVEL");if(null!=t&&n.diag.setLogger(new n.DiagConsoleLogger,{logLevel:(0,v.diagLogLevelFromString)(t)}),this._configuration=e,this._resource=e.resource??(0,i.defaultResource)(),this._autoDetectResources=e.autoDetectResources??!0,this._autoDetectResources?null!=e.resourceDetectors?this._resourceDetectors=e.resourceDetectors:(0,v.getStringFromEnv)("OTEL_NODE_RESOURCE_DETECTORS")?this._resourceDetectors=(0,_.getResourceDetectorsFromEnv)():this._resourceDetectors=[i.envDetector,i.processDetector,i.hostDetector]:this._resourceDetectors=[],this._serviceName=e.serviceName,e.traceExporter||e.spanProcessor||e.spanProcessors){const t={};e.sampler&&(t.sampler=e.sampler),e.spanLimits&&(t.spanLimits=e.spanLimits),e.idGenerator&&(t.idGenerator=e.idGenerator),e.spanProcessor&&n.diag.warn("The 'spanProcessor' option is deprecated. Please use 'spanProcessors' instead.");const r=e.spanProcessor??new f.BatchSpanProcessor(e.traceExporter),o=e.spanProcessors??[r];this._tracerProviderConfig={tracerConfig:t,spanProcessors:o,contextManager:e.contextManager,textMapPropagator:e.textMapPropagator}}if(e.logRecordProcessors?this._loggerProviderConfig={logRecordProcessors:e.logRecordProcessors}:e.logRecordProcessor?(this._loggerProviderConfig={logRecordProcessors:[e.logRecordProcessor]},n.diag.warn("The 'logRecordProcessor' option is deprecated. Please use 'logRecordProcessors' instead.")):this.configureLoggerProviderFromEnv(),e.metricReader||e.views){const t={};e.metricReader&&(t.reader=e.metricReader),e.views&&(t.views=e.views),this._meterProviderConfig=t}this._instrumentations=e.instrumentations?.flat()??[]}start(){if(this._disabled)return;if((0,s.registerInstrumentations)({instrumentations:this._instrumentations}),this._autoDetectResources){const e={detectors:this._resourceDetectors};this._resource=this._resource.merge((0,i.detectResources)(e))}this._resource=void 0===this._serviceName?this._resource:this._resource.merge((0,i.resourceFromAttributes)({[b.ATTR_SERVICE_NAME]:this._serviceName}));const e=this._tracerProviderConfig?this._tracerProviderConfig.spanProcessors:(0,_.getSpanProcessorsFromEnv)();if(this._tracerProvider=new y.NodeTracerProvider({...this._configuration,resource:this._resource,spanProcessors:e}),e.length>0&&this._tracerProvider.register({contextManager:this._tracerProviderConfig?.contextManager??this._configuration?.contextManager,propagator:this._tracerProviderConfig?.textMapPropagator??(0,_.getPropagatorFromEnv)()}),this._loggerProviderConfig){const e=new a.LoggerProvider({resource:this._resource,processors:this._loggerProviderConfig.logRecordProcessors});this._loggerProvider=e,o.logs.setGlobalLoggerProvider(e)}const t=function(){const e=[],t=(0,v.getStringListFromEnv)("OTEL_METRICS_EXPORTER");return t?(0===t.length&&n.diag.debug("OTEL_METRICS_EXPORTER is empty. Using default otlp exporter."),t.includes("none")?(n.diag.info('OTEL_METRICS_EXPORTER contains "none". Metric provider will not be initialized.'),e):(t.forEach((t=>{if("otlp"===t){const t=process.env.OTEL_EXPORTER_OTLP_METRICS_PROTOCOL?.trim()||process.env.OTEL_EXPORTER_OTLP_PROTOCOL?.trim(),r=S("OTEL_METRIC_EXPORT_INTERVAL",6e4),o=S("OTEL_METRIC_EXPORT_TIMEOUT",3e4);switch(t){case"grpc":e.push(new g.PeriodicExportingMetricReader({exporter:new p.OTLPMetricExporter,exportIntervalMillis:r,exportTimeoutMillis:o}));break;case"http/json":e.push(new g.PeriodicExportingMetricReader({exporter:new m.OTLPMetricExporter,exportIntervalMillis:r,exportTimeoutMillis:o}));break;case"http/protobuf":e.push(new g.PeriodicExportingMetricReader({exporter:new d.OTLPMetricExporter,exportIntervalMillis:r,exportTimeoutMillis:o}));break;default:n.diag.warn(`Unsupported OTLP metrics protocol: "${t}". Using http/protobuf.`),e.push(new g.PeriodicExportingMetricReader({exporter:new d.OTLPMetricExporter,exportIntervalMillis:r,exportTimeoutMillis:o}))}}else"console"===t?e.push(new g.PeriodicExportingMetricReader({exporter:new g.ConsoleMetricExporter})):"prometheus"===t?e.push(new h.PrometheusExporter):n.diag.warn(`Unsupported OTEL_METRICS_EXPORTER value: "${t}". Supported values are: otlp, console, prometheus, none.`)})),e)):e}();if(this._meterProviderConfig||t.length>0){const e=[];this._meterProviderConfig?.reader&&e.push(this._meterProviderConfig.reader),0===e.length&&t.forEach((t=>e.push(t)));const r=new g.MeterProvider({resource:this._resource,views:this._meterProviderConfig?.views??[],readers:e});this._meterProvider=r,n.metrics.setGlobalMeterProvider(r);for(const e of this._instrumentations)e.setMeterProvider(n.metrics.getMeterProvider())}}shutdown(){const e=[];return this._tracerProvider&&e.push(this._tracerProvider.shutdown()),this._loggerProvider&&e.push(this._loggerProvider.shutdown()),this._meterProvider&&e.push(this._meterProvider.shutdown()),Promise.all(e).then((()=>{}))}configureLoggerProviderFromEnv(){const e=(0,v.getStringListFromEnv)("OTEL_LOGS_EXPORTER")??[];if(0===e.length&&(n.diag.debug("OTEL_LOGS_EXPORTER is empty. Using default otlp exporter."),e.push("otlp")),e.includes("none"))return void n.diag.info('OTEL_LOGS_EXPORTER contains "none". Logger provider will not be initialized.');const t=[];e.forEach((e=>{if("otlp"===e){const e=((0,v.getStringFromEnv)("OTEL_EXPORTER_OTLP_LOGS_PROTOCOL")??(0,v.getStringFromEnv)("OTEL_EXPORTER_OTLP_PROTOCOL"))?.trim();switch(e){case"grpc":t.push(new c.OTLPLogExporter);break;case"http/json":t.push(new l.OTLPLogExporter);break;case"http/protobuf":case void 0:case"":t.push(new u.OTLPLogExporter);break;default:n.diag.warn(`Unsupported OTLP logs protocol: "${e}". Using http/protobuf.`),t.push(new u.OTLPLogExporter)}}else"console"===e?t.push(new a.ConsoleLogRecordExporter):n.diag.warn(`Unsupported OTEL_LOGS_EXPORTER value: "${e}". Supported values are: otlp, console, none.`)})),t.length>0&&(this._loggerProviderConfig={logRecordProcessors:t.map((e=>e instanceof a.ConsoleLogRecordExporter?new a.SimpleLogRecordProcessor(e):new a.BatchLogRecordProcessor(e)))})}}},"../../node_modules/.pnpm/@opentelemetry+sdk-node@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/utils.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPropagatorFromEnv=t.getSpanProcessorsFromEnv=t.getOtlpProtocolFromEnv=t.filterBlanksAndNulls=t.getResourceDetectorsFromEnv=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-proto@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-proto/build/esm/index.js"),i=r("../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-http@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-http/build/esm/index.js"),a=r("../../node_modules/.pnpm/@opentelemetry+exporter-trace-otlp-grpc@0.203.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-trace-otlp-grpc/build/src/index.js"),l=r("../../node_modules/.pnpm/@opentelemetry+exporter-zipkin@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/exporter-zipkin/build/esm/index.js"),c=r("../../node_modules/.pnpm/@opentelemetry+resources@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/resources/build/esm/index.js"),u=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js"),p=r("../../node_modules/.pnpm/@opentelemetry+propagator-b3@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/propagator-b3/build/esm/index.js"),d=r("../../node_modules/.pnpm/@opentelemetry+propagator-jaeger@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/propagator-jaeger/build/esm/index.js");function m(e){return e.map((e=>e.trim())).filter((e=>"null"!==e&&""!==e))}function h(){return(0,o.getStringFromEnv)("OTEL_EXPORTER_OTLP_TRACES_PROTOCOL")??(0,o.getStringFromEnv)("OTEL_EXPORTER_OTLP_PROTOCOL")??"http/protobuf"}t.getResourceDetectorsFromEnv=function(){const e=new Map([["env",c.envDetector],["host",c.hostDetector],["os",c.osDetector],["serviceinstance",c.serviceInstanceIdDetector],["process",c.processDetector]]),t=(0,o.getStringListFromEnv)("OTEL_NODE_RESOURCE_DETECTORS")??["all"];return t.includes("all")?[...e.values()].flat():t.includes("none")?[]:t.flatMap((t=>{const r=e.get(t);return r||n.diag.warn(`Invalid resource detector "${t}" specified in the environment variable OTEL_NODE_RESOURCE_DETECTORS`),r||[]}))},t.filterBlanksAndNulls=m,t.getOtlpProtocolFromEnv=h,t.getSpanProcessorsFromEnv=function(){const e=new Map([["otlp",()=>function(){const e=h();switch(e){case"grpc":return new a.OTLPTraceExporter;case"http/json":return new i.OTLPTraceExporter;case"http/protobuf":return new s.OTLPTraceExporter;default:return n.diag.warn(`Unsupported OTLP traces protocol: ${e}. Using http/protobuf.`),new s.OTLPTraceExporter}}()],["zipkin",()=>new l.ZipkinExporter],["console",()=>new u.ConsoleSpanExporter],["jaeger",()=>function(){try{const{JaegerExporter:e}=r("@opentelemetry/exporter-jaeger");return new e}catch(e){throw new Error(`Could not instantiate JaegerExporter. This could be due to the JaegerExporter's lack of support for bundling. If possible, use @opentelemetry/exporter-trace-otlp-proto instead. Original Error: ${e}`)}}()]]),t=[],c=[];let p=m(Array.from(new Set((0,o.getStringListFromEnv)("OTEL_TRACES_EXPORTER"))));if("none"===p[0])return n.diag.warn('OTEL_TRACES_EXPORTER contains "none". SDK will not be initialized.'),[];0===p.length?(n.diag.debug("OTEL_TRACES_EXPORTER is empty. Using default otlp exporter."),p=["otlp"]):p.length>1&&p.includes("none")&&(n.diag.warn('OTEL_TRACES_EXPORTER contains "none" along with other exporters. Using default otlp exporter.'),p=["otlp"]);for(const r of p){const o=e.get(r)?.();o?t.push(o):n.diag.warn(`Unrecognized OTEL_TRACES_EXPORTER value: ${r}.`)}for(const e of t)e instanceof u.ConsoleSpanExporter?c.push(new u.SimpleSpanProcessor(e)):c.push(new u.BatchSpanProcessor(e));return 0===t.length&&n.diag.warn("Unable to set up trace exporter(s) due to invalid exporter and/or protocol values."),c},t.getPropagatorFromEnv=function(){const e=(0,o.getStringListFromEnv)("OTEL_PROPAGATORS");if(null==e)return;const t=new Map([["tracecontext",()=>new o.W3CTraceContextPropagator],["baggage",()=>new o.W3CBaggagePropagator],["b3",()=>new p.B3Propagator],["b3multi",()=>new p.B3Propagator({injectEncoding:p.B3InjectEncoding.MULTI_HEADER})],["jaeger",()=>new d.JaegerPropagator]]),r=Array.from(new Set(e)),s=r.map((e=>{const r=t.get(e)?.();if(r)return r;n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`)})).reduce(((e,t)=>(t&&e.push(t),e)),[]);return 0===s.length?null:1===r.length?s[0]:new o.CompositePropagator({propagators:s})}},"../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js":(e,t,r)=>{r.r(t),r.d(t,{AlwaysOffSampler:()=>T.t,AlwaysOnSampler:()=>x.f,BasicTracerProvider:()=>n.l,BatchSpanProcessor:()=>h,ConsoleSpanExporter:()=>y,InMemorySpanExporter:()=>b,NoopSpanProcessor:()=>S,ParentBasedSampler:()=>E.e,RandomIdGenerator:()=>g.s,SamplingDecision:()=>w.i,SimpleSpanProcessor:()=>_,TraceIdRatioBasedSampler:()=>C.h});var n=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/BasicTracerProvider.js"),o=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/diag-api.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/trace/trace_flags.js"),i=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/context-api.js"),a=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/environment.js"),l=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/utils/callback.js"),c=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/trace/suppress-tracing.js"),u=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/ExportResult.js"),p=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/global-error-handler.js"),d=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/platform/node/timer-util.js");class m{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(e,t){this._exporter=e,this._maxExportBatchSize="number"==typeof t?.maxExportBatchSize?t.maxExportBatchSize:(0,a.Jk)("OTEL_BSP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize="number"==typeof t?.maxQueueSize?t.maxQueueSize:(0,a.Jk)("OTEL_BSP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis="number"==typeof t?.scheduledDelayMillis?t.scheduledDelayMillis:(0,a.Jk)("OTEL_BSP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis="number"==typeof t?.exportTimeoutMillis?t.exportTimeoutMillis:(0,a.Jk)("OTEL_BSP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new l.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(o.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&s.X.SAMPLED&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&o.s.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(o.s.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise(((e,t)=>{const r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,t)=>{const r=setTimeout((()=>{t(new Error("Timeout"))}),this._exportTimeoutMillis);i._.with((0,c.M1)(i._.active()),(()=>{let n;this._finishedSpans.length<=this._maxExportBatchSize?(n=this._finishedSpans,this._finishedSpans=[]):n=this._finishedSpans.splice(0,this._maxExportBatchSize);const o=()=>this._exporter.export(n,(n=>{clearTimeout(r),n.code===u.V.SUCCESS?e():t(n.error??new Error("BatchSpanProcessor: span export failed"))}));let s=null;for(let e=0,t=n.length;e<t;e++){const t=n[e];t.resource.asyncAttributesPending&&t.resource.waitForAsyncAttributes&&(s??=[],s.push(t.resource.waitForAsyncAttributes()))}null===s?o():Promise.all(s).then(o,(e=>{(0,p.s)(e),t(e)}))}))}))}_maybeStartTimer(){if(this._isExporting)return;const e=()=>{this._isExporting=!0,this._flushOneBatch().finally((()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{this._isExporting=!1,(0,p.s)(e)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();void 0===this._timer&&(this._timer=setTimeout((()=>e()),this._scheduledDelayMillis),(0,d.K)(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}class h extends m{onShutdown(){}}var g=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/platform/node/RandomIdGenerator.js"),f=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/common/time.js");class y{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationScope,traceId:e.spanContext().traceId,parentSpanContext:e.parentSpanContext,traceState:e.spanContext().traceState?.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,f.w_)(e.startTime),duration:(0,f.w_)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,t){for(const t of e)console.dir(this._exportInfo(t),{depth:3});if(t)return t({code:u.V.SUCCESS})}}class b{_finishedSpans=[];_stopped=!1;export(e,t){if(this._stopped)return t({code:u.V.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>t({code:u.V.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}var v=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js");class _{_exporter;_shutdownOnce;_pendingExports;constructor(e){this._exporter=e,this._shutdownOnce=new l.I(this._shutdown,this),this._pendingExports=new Set}async forceFlush(){await Promise.all(Array.from(this._pendingExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(e,t){}onEnd(e){if(this._shutdownOnce.isCalled)return;if(!(e.spanContext().traceFlags&s.X.SAMPLED))return;const t=this._doExport(e).catch((e=>(0,p.s)(e)));this._pendingExports.add(t),t.finally((()=>this._pendingExports.delete(t)))}async _doExport(e){e.resource.asyncAttributesPending&&await(e.resource.waitForAsyncAttributes?.());const t=await v.internal._export(this._exporter,[e]);if(t.code!==u.V.SUCCESS)throw t.error??new Error(`SimpleSpanProcessor: span export failed (status ${t})`)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class S{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}var T=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOffSampler.js"),x=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOnSampler.js"),E=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/ParentBasedSampler.js"),C=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/TraceIdRatioBasedSampler.js"),w=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/Sampler.js")},"../../node_modules/.pnpm/@opentelemetry+sdk-trace-node@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-node/build/src/NodeTracerProvider.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeTracerProvider=void 0;const n=r("../../node_modules/.pnpm/@opentelemetry+context-async-hooks@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/context-async-hooks/build/src/index.js"),o=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js"),s=r("../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js"),i=r("../../node_modules/.pnpm/@opentelemetry+core@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js");class a extends o.BasicTracerProvider{constructor(e={}){super(e)}register(e={}){var t;s.trace.setGlobalTracerProvider(this),function(e){if(null!==e){if(void 0===e){const e=new n.AsyncLocalStorageContextManager;return e.enable(),void s.context.setGlobalContextManager(e)}e.enable(),s.context.setGlobalContextManager(e)}}(e.contextManager),null!==(t=e.propagator)&&(void 0!==t?s.propagation.setGlobalPropagator(t):s.propagation.setGlobalPropagator(new i.CompositePropagator({propagators:[new i.W3CTraceContextPropagator,new i.W3CBaggagePropagator]})))}}t.NodeTracerProvider=a},"../../node_modules/.pnpm/@opentelemetry+sdk-trace-node@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-node/build/src/index.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=t.SimpleSpanProcessor=t.SamplingDecision=t.RandomIdGenerator=t.ParentBasedSampler=t.NoopSpanProcessor=t.InMemorySpanExporter=t.ConsoleSpanExporter=t.BatchSpanProcessor=t.BasicTracerProvider=t.AlwaysOnSampler=t.AlwaysOffSampler=t.NodeTracerProvider=void 0;var n=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-node@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-node/build/src/NodeTracerProvider.js");Object.defineProperty(t,"NodeTracerProvider",{enumerable:!0,get:function(){return n.NodeTracerProvider}});var o=r("../../node_modules/.pnpm/@opentelemetry+sdk-trace-base@2.0.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-trace-base/build/esm/index.js");Object.defineProperty(t,"AlwaysOffSampler",{enumerable:!0,get:function(){return o.AlwaysOffSampler}}),Object.defineProperty(t,"AlwaysOnSampler",{enumerable:!0,get:function(){return o.AlwaysOnSampler}}),Object.defineProperty(t,"BasicTracerProvider",{enumerable:!0,get:function(){return o.BasicTracerProvider}}),Object.defineProperty(t,"BatchSpanProcessor",{enumerable:!0,get:function(){return o.BatchSpanProcessor}}),Object.defineProperty(t,"ConsoleSpanExporter",{enumerable:!0,get:function(){return o.ConsoleSpanExporter}}),Object.defineProperty(t,"InMemorySpanExporter",{enumerable:!0,get:function(){return o.InMemorySpanExporter}}),Object.defineProperty(t,"NoopSpanProcessor",{enumerable:!0,get:function(){return o.NoopSpanProcessor}}),Object.defineProperty(t,"ParentBasedSampler",{enumerable:!0,get:function(){return o.ParentBasedSampler}}),Object.defineProperty(t,"RandomIdGenerator",{enumerable:!0,get:function(){return o.RandomIdGenerator}}),Object.defineProperty(t,"SamplingDecision",{enumerable:!0,get:function(){return o.SamplingDecision}}),Object.defineProperty(t,"SimpleSpanProcessor",{enumerable:!0,get:function(){return o.SimpleSpanProcessor}}),Object.defineProperty(t,"TraceIdRatioBasedSampler",{enumerable:!0,get:function(){return o.TraceIdRatioBasedSampler}})}};