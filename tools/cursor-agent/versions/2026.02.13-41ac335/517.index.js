try{!function(){var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new n.Error).stack;r&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[r]="3029ca3b-6af8-4617-bff8-80580ebade71",n._sentryDebugIdIdentifier="sentry-dbid-3029ca3b-6af8-4617-bff8-80580ebade71")}()}catch(n){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.02.13-41ac335"}}catch(n){}}(),exports.id=517,exports.ids=[517],exports.modules={"./src/commands/install-core-posix.ts":(n,r,e)=>{e.d(r,{BV:()=>d});var t=e("node:child_process"),o=e("node:fs"),i=e("node:os"),c=e("node:path"),s=function(n,r,e,t){return new(e||(e=Promise))((function(o,i){function c(n){try{a(t.next(n))}catch(n){i(n)}}function s(n){try{a(t.throw(n))}catch(n){i(n)}}function a(n){var r;n.done?o(n.value):(r=n.value,r instanceof e?r:new e((function(n){n(r)}))).then(c,s)}a((t=t.apply(n,r||[])).next())}))};const a=6e4;function l(n){const r=c.join(i.homedir(),".local","bin");o.mkdirSync(r,{recursive:!0});const e=c.join(n,"cursor-agent"),t=c.join(r,"agent"),s=c.join(r,"cursor-agent"),a=(n,r)=>{try{o.unlinkSync(r)}catch(n){}o.symlinkSync(n,r)};a(e,t),a(e,s)}function u(){const n=c.join(i.homedir(),".local","bin");o.mkdirSync(n,{recursive:!0});const r=c.join(n,"cursor"),e=["#!/bin/sh","set -eu","","# Find cursor executable in PATH, excluding the current shim","find_cursor() {",'  old_IFS="$IFS"',"  IFS=:","  for dir in $PATH; do",'    [ -n "$dir" ] || continue','    cursor_path="$dir/cursor"','    if [ "$cursor_path" != "$HOME/.local/bin/cursor" ] && [ -x "$cursor_path" ]; then','      IFS="$old_IFS"','      echo "$cursor_path"',"      return 0","    fi","  done",'  IFS="$old_IFS"',"  return 1","}","","OTHER_CURSOR=$(find_cursor || true)","",'if [ -n "${OTHER_CURSOR:-}" ]; then','  exec "$OTHER_CURSOR" "$@"',"else",'  if [ "$1" != "agent" ]; then',"    echo \"Error: No Cursor IDE installation found. Use 'cursor agent' or 'agent' to run the agent.\" 1>&2",'    echo "Or, install Cursor at https://cursor.com/download" 1>&2',"    exit 1","  fi",'  exec "$HOME/.local/bin/agent" "$@"',"fi",""].join("\n");o.writeFileSync(r,e,{mode:493});try{o.chmodSync(r,493)}catch(n){}}function d(n){return s(this,void 0,void 0,(function*(){const{version:r,urlPrefix:e,showProgress:s=!1,skipIfLocked:d=!1}=n,f=c.join(i.homedir(),".local","share","cursor-agent",".install.lock"),h=function(n){const r=c.dirname(n);try{o.mkdirSync(r,{recursive:!0})}catch(n){}try{if(o.existsSync(n)){const r=o.statSync(n);if(Date.now()-r.mtimeMs>a)try{o.statSync(n).ino===r.ino&&o.unlinkSync(n)}catch(n){}}return o.openSync(n,"wx")}catch(n){if(n&&"object"==typeof n&&"code"in n&&"EEXIST"===n.code)return null;throw n}}(f);if(null===h){if(d)return;throw new Error("Another CLI update is already in progress. Wait for it to finish or remove ~/.local/share/cursor-agent/.install.lock if no update is running.")}try{const{os:a,arch:d}=function(){const n=i.platform(),r=i.arch();let e,t;switch(n){case"linux":e="linux";break;case"darwin":e="darwin";break;default:throw new Error(`Unsupported operating system: ${n}`)}switch(r){case"x64":t="x64";break;case"arm64":t="arm64";break;default:throw new Error(`Unsupported architecture: ${r}`)}return{os:e,arch:t}}(),f=c.join(i.homedir(),".local","share","cursor-agent","versions"),h=c.join(f,r),p=c.join(f,`.${r}`);if(o.existsSync(h))return l(h),void u();try{o.rmSync(p,{recursive:!0,force:!0})}catch(n){}o.mkdirSync(p,{recursive:!0});const y=`${e.endsWith("/")?e:`${e}/`}${a}/${d}/agent-cli-package.tar.gz`;try{const r=s?["-fSL","--progress-bar",y]:["-fSL","-s",y];yield new Promise(((e,o)=>{const i=n.showProgress?"inherit":"ignore",c=(0,t.spawn)("tar",["--strip-components=1","-xzf","-","-C",p],{stdio:["pipe","ignore",i]}),s=(0,t.spawn)("curl",r,{stdio:["ignore","pipe",i]});s.stdout.pipe(c.stdin);let a=null,l=null,u=!1;const d=()=>{null===a||null===l||u||(u=!0,0===a?0===l?e():o(new Error(`Extraction failed (tar exit ${l})`)):o(new Error(`Download failed (curl exit ${a})`)))};s.on("error",(n=>{if(!u){u=!0;try{c.kill("SIGTERM")}catch(n){}o(n)}})),c.on("error",(n=>{if(!u){u=!0;try{s.kill("SIGTERM")}catch(n){}o(n)}})),s.on("close",(n=>{var r;a=null!=n?n:1;try{null===(r=c.stdin)||void 0===r||r.end()}catch(n){}if(0!==a)try{c.kill("SIGTERM")}catch(n){}d()})),c.on("close",(n=>{if(l=null!=n?n:1,0!==l)try{s.kill("SIGTERM")}catch(n){}d()}))}));try{o.rmSync(h,{recursive:!0,force:!0})}catch(n){}o.renameSync(p,h)}catch(n){try{o.rmSync(p,{recursive:!0,force:!0})}catch(n){}throw new Error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}l(h),u()}finally{!function(n,r){try{o.closeSync(r)}catch(n){}try{o.unlinkSync(n)}catch(n){}}(f,h)}}))}},"./src/commands/update-core.ts":(n,r,e)=>{e.d(r,{N:()=>a});var t=e("./src/analytics.ts"),o=e("./src/console-io.ts"),i=e("./src/commands/install-core-posix.ts");e("node:child_process");var c=function(n,r,e,t){return new(e||(e=Promise))((function(o,i){function c(n){try{a(t.next(n))}catch(n){i(n)}}function s(n){try{a(t.throw(n))}catch(n){i(n)}}function a(n){var r;n.done?o(n.value):(r=n.value,r instanceof e?r:new e((function(n){n(r)}))).then(c,s)}a((t=t.apply(n,r||[])).next())}))};function s(n){const r=n.match(/^(\d{4})\.(\d{2})\.(\d{2})/);if(!r)throw new Error(`Invalid version format: ${n}`);const[,e,t,o]=r;return 1e6*parseInt(e,10)+1e3*parseInt(t.replace(/^0/,""),10)+parseInt(o.replace(/^0/,""),10)}function a(n){return c(this,void 0,void 0,(function*(){const{dashboardClient:r,showProgress:e=!0,isAutoUpdate:a=!1}=n,l=null!=="2026.02.13-41ac335"?"2026.02.13-41ac335":"unknown",u=null!=="2026.02.13-41ac335"?"2026.02.13-41ac335":"";e&&(0,o.p2)("Checking for updates...");const d=yield function(n,r){return c(this,void 0,void 0,(function*(){const e="prod-stable-internal"===r?"prod":r,t=yield n.getCliDownloadUrl({channel:e});if(!t.url||!t.version)throw new Error("Invalid response from server: missing URL or version information");return{version:t.version,url:t.url}}))}(r,n.channel);if(!function(n,r,e=!1){try{const t=s(n),o=s(r);return t!==o?t<o:!e&&n!==r}catch(e){return(0,o.p2)(`Invalid version format: ${n} or ${r}`),n!==r}}(u,d.version,a))return void(e&&(0,o.p2)("Already up to date"));e&&(0,o.p2)(`Latest version available: ${d.version}`);let f=!1;try{yield(0,i.BV)({version:d.version,urlPrefix:d.url,showProgress:e,skipIfLocked:a}),e&&(0,o.p2)("Done"),f=!0}finally{(0,t.sx)("cli.updated",{update_type:a?"auto":"manual",from_version:l,to_version:d.version,success:f})}}))}},"./src/commands/update.ts":(n,r,e)=>{e.r(r),e.d(r,{handleUpdate:()=>c});var t=e("./src/analytics.ts"),o=e("./src/commands/update-core.ts"),i=function(n,r,e,t){return new(e||(e=Promise))((function(o,i){function c(n){try{a(t.next(n))}catch(n){i(n)}}function s(n){try{a(t.throw(n))}catch(n){i(n)}}function a(n){var r;n.done?o(n.value):(r=n.value,r instanceof e?r:new e((function(n){n(r)}))).then(c,s)}a((t=t.apply(n,r||[])).next())}))};function c(n,r){return i(this,void 0,void 0,(function*(){try{const e=r.get();"static"===e.channel&&(process.stdout.write("Skipping update check for static channel\n"),process.exit(0)),yield(0,o.N)({dashboardClient:n,showProgress:!0,channel:e.channel,isAutoUpdate:!1}),yield(0,t.PO)(),process.exit(0)}catch(n){throw new Error(`Update failed: ${n instanceof Error?n.message:String(n)}`)}}))}}};