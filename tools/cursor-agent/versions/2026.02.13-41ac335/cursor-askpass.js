(()=>{var e={27:(e,r,n)=>{e=n.nmd(e);try{process.dlopen(e,n(928).join(__dirname,n.p,"merkle-tree-napi.linux-x64-gnu.node"))}catch(e){throw new Error("node-loader:\n"+e)}},648:(e,r,n)=>{let t=null,o=null;const{platform:s,arch:i}=process;try{if("darwin"===s)if("arm64"===i)t=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.darwin-arm64.node'");throw e.code="MODULE_NOT_FOUND",e}()));else{if("x64"!==i)throw new Error(`Unsupported macOS architecture: ${i}`);t=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.darwin-x64.node'");throw e.code="MODULE_NOT_FOUND",e}()))}else if("linux"===s)if("x64"===i)t=n(27);else{if("arm64"!==i)throw new Error(`Unsupported Linux architecture: ${i}`);t=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.linux-arm64-gnu.node'");throw e.code="MODULE_NOT_FOUND",e}()))}else{if("win32"!==s)throw new Error(`Unsupported platform: ${s}`);if("x64"===i)t=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.win32-x64-msvc.node'");throw e.code="MODULE_NOT_FOUND",e}()));else{if("arm64"!==i)throw new Error(`Unsupported Windows architecture: ${i}`);t=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.win32-arm64-msvc.node'");throw e.code="MODULE_NOT_FOUND",e}()))}}}catch(e){o=e}if(!t){const e={"darwin-arm64":"merkle-tree-napi.darwin-arm64.node","darwin-x64":"merkle-tree-napi.darwin-x64.node","linux-x64":"merkle-tree-napi.linux-x64-gnu.node","linux-arm64":"merkle-tree-napi.linux-arm64-gnu.node","win32-x64":"merkle-tree-napi.win32-x64-msvc.node","win32-arm64":"merkle-tree-napi.win32-arm64-msvc.node"},r=`${s}-${i}`,n=`Failed to load native binding for ${s}/${i}${e[r]?` (expected: ./${e[r]})`:""}\nOriginal error: ${o&&o.stack?o.stack:o}`;throw new Error(n)}e.exports=t,e.exports.MerkleClient=t.MerkleClient,e.exports.MULTI_ROOT_ABSOLUTE_PATH=t.MULTI_ROOT_ABSOLUTE_PATH},928:e=>{"use strict";e.exports=require("path")}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var s=r[t]={id:t,loaded:!1,exports:{}};return e[t](s,s.exports,n),s.loaded=!0,s.exports}n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="",(()=>{"use strict";const e=require("node:crypto"),r=require("node:fs/promises"),t=require("node:net"),o=require("node:path");var s=n(648),i=function(e,r,n,t){return new(n||(n=Promise))((function(o,s){function i(e){try{c(t.next(e))}catch(e){s(e)}}function a(e){try{c(t.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}c((t=t.apply(e,r||[])).next())}))};(function(){return i(this,void 0,void 0,(function*(){const{parentPid:n,parentExePath:a}=(0,s.getParentProcessInfo)();if(a){const e=yield(0,r.realpath)(a);["sudo","doas"].includes((0,o.basename)(e))||process.exit(1);const n=yield(0,r.stat)(e);2048&n.mode||process.exit(1),0!==n.uid&&process.exit(1)}n||process.exit(1);const c=process.env.CURSOR_ASKPASS_SOCKET,d=process.env.CURSOR_ASKPASS_SECRET;c||(process.stderr.write("cursor-askpass: CURSOR_ASKPASS_SOCKET environment variable not set\n"),process.exit(1)),d||(process.stderr.write("cursor-askpass: CURSOR_ASKPASS_SECRET environment variable not set\n"),process.exit(1));const p=process.argv[2]||"Password:",u=(0,e.randomUUID)();try{const r=yield function(r,n,o,s){return i(this,void 0,void 0,(function*(){return new Promise(((i,a)=>{const c=setTimeout((()=>{d.destroy(),a(new Error("password request timed out"))}),12e4),d=(0,t.connect)(r);let p="";d.on("connect",(()=>{const r={type:"password_request",id:o,prompt:s},t=function(r,n){return(0,e.createHmac)("sha256",r).update(JSON.stringify(n)).digest("hex")}(n,r),i=Object.assign(Object.assign({},r),{signature:t});d.write(`${JSON.stringify(i)}\n`)})),d.on("data",(e=>{p+=e.toString("utf8");const r=p.indexOf("\n");if(-1!==r){const e=p.slice(0,r);clearTimeout(c),d.destroy();try{const r=JSON.parse(e);if(r.id!==o)return void a(new Error("response ID mismatch"));"password_response"===r.type?i(r.password):"password_denied"===r.type?i(null):a(new Error("unknown response type"))}catch(e){a(new Error("failed to parse response"))}}})),d.on("error",(e=>{clearTimeout(c),a(new Error(`socket error: ${e.message}`))})),d.on("close",(()=>{clearTimeout(c),a(new Error("connection closed unexpectedly"))}))}))}))}(c,d,u,p);null!==r?(process.stdout.write(r),process.exit(0)):(process.stderr.write("cursor-askpass: password request denied\n"),process.exit(1))}catch(e){const r=e instanceof Error?e.message:String(e);process.stderr.write(`cursor-askpass: ${r}\n`),process.exit(1)}}))})().catch((e=>{const r=e instanceof Error?e.message:String(e);process.stderr.write(`cursor-askpass: unhandled error: ${r}\n`),process.exit(1)}))})()})();