try{!function(){var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="78cb044c-7e64-49e0-8de3-c303d59cb536",t._sentryDebugIdIdentifier="sentry-dbid-78cb044c-7e64-49e0-8de3-c303d59cb536")}()}catch(t){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.02.13-41ac335"}}catch(t){}}(),exports.id=678,exports.ids=[678],exports.modules={"./src/components/text-input.tsx":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{A:()=>p});var s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../ink/build/index.js"),o=n("../../node_modules/.pnpm/chalk@5.4.1/node_modules/chalk/source/index.js"),l=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),c=n("./src/context/theme-context.tsx"),u=n("./src/context/vim-mode-context.tsx"),a=n("./src/hooks/use-text-input.ts"),f=t([i,c,a]);[i,c,a]=f.then?(await f)():f;const d=new RegExp(`\\[${"Pasted text".replace(/[.*+?^${}()|[\]\\]/g,"\\$&")} #(\\d+)(?: \\+\\d+(?: lines)?)?\\]`,"g"),h=/(?:^|\s)(\/[\w-]+)/g,g=(t,e)=>t.replace(d,(t=>e?o.Ay.dim.gray(t):o.Ay.dim.cyan(t))),m=(t,e,n)=>n&&0!==n.size?t.replace(h,((t,r)=>{const s=r.slice(1).toLowerCase();return n.has(s)?t.slice(0,t.length-r.length)+(e?o.Ay.bold.blue(r):o.Ay.bold.cyan(r)):t})):t,p=l.memo((function({value:t,placeholder:e="",rightPlaceholder:n,ghostText:r,focus:f=!0,visualFocus:d=!1,mask:h,highlightPastedText:p=!1,showCursor:v=!0,dimmed:b=!1,onChange:x,onSubmit:y,onTab:w,onCtrlC:M,onShiftTab:O,cursorToEndSignal:C,cursorToStartSignal:k,replaceValueRef:A,onReplace:j,onCursorInfoChange:$,onUpAtFirstLine:E,onDownAtLastLine:T,onEscape:R,onPaste:L,allowExplicitNewline:S,onCtrlR:D,onCtrlD:_,validSlashCommands:P,suppressArrowKeys:W,disableTextInput:V,debounceMs:I}){var J;const{mode:F,vimEnabled:G}=(0,u.v)(),{stdout:H}=(0,i.t$)(),{cursorOffset:N,cursorWidth:z,displayValue:U}=(0,a.t)(t,x,{focus:f,showCursor:v,highlightPastedText:p,onSubmit:y,onTab:w,onShiftTab:O,onCtrlC:M,onCtrlD:_,onCtrlR:D,cursorToEndSignal:C,cursorToStartSignal:k,replaceValueRef:A,onReplace:j,onCursorInfoChange:$,onUpAtFirstLine:E,onDownAtLastLine:T,onEscape:R,onPaste:L,allowExplicitNewline:S,suppressArrowKeys:W,disableTextInput:V,debounceMs:I}),K=p?z:0,B=(0,c.pW)(),Q=h?h.repeat(U.length):U;let Z=Q,X=e?o.Ay.grey(e):void 0;if(v&&(f||d)){const t=G&&"normal"===F?o.Ay.bgGray:o.Ay.inverse;X=e.length>0?t(e[0])+(B?o.Ay.dim(o.Ay.grey(e.slice(1))):o.Ay.grey(e.slice(1))):t(" "),Z=Q.length>0?"":t(" ");let n=0,r=0;const s=null!==(J=null==H?void 0:H.columns)&&void 0!==J?J:0;let i=!1;for(const e of Q){if("\n"===e){const e=n>=N-K&&n<N,o=0===K&&N===n&&(0===n||"\n"!==Q[n-1]);if(i||!e&&!o||(s>0&&r===s-1||(Z+=t(" ")),i=!0),Z+="\n",n++,r=0,!i&&0===K&&N===n){const e=Q[n];null!=e&&"\n"!==e||(Z+=t(" "),i=!0)}continue}const o=0===K&&n===N;K>0&&n>=N-K&&n<N||o?(Z+=t(e),o&&(i=!0)):Z+=e,n+=e.length,r++,s>0&&r>=s&&(r=0)}!i&&Q.length>0&&N===Q.length&&(Z+=t(" "),i=!0)}const{isRawModeSupported:q}=(0,i.mT)();(0,l.useEffect)((()=>(q&&process.stdin.setRawMode(!0),()=>{q&&process.stdin.setRawMode(!1)})),[q]);const Y=e?Q.length>0?Z:X:Z,tt=g("string"==typeof Y?Y:"",null!=B&&B),et="string"==typeof Y?e.length>0&&0===Q.length?tt:m(tt,null!=B&&B,P):Y,nt=r&&Q.length>0&&N===Q.length;return(0,s.jsxs)(i.az,{flexDirection:"row",justifyContent:"space-between",width:"100%",children:[(0,s.jsx)(i.az,{flexGrow:1,marginRight:2,children:(0,s.jsxs)(i.EY,{dimColor:b,children:[et,nt&&(0,s.jsx)(i.EY,{color:"gray",dimColor:!0,children:r})]})}),n&&0===Q.length&&(0,s.jsx)(i.az,{flexShrink:0,marginLeft:1,marginRight:1,children:(0,s.jsx)(i.EY,{color:"gray",dimColor:null!=B&&B,children:n})})]})}));r()}catch(t){r(t)}}))},"./src/context/theme-context.tsx":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{NP:()=>u,cb:()=>d,pW:()=>a,xl:()=>f});var s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/hooks/use-theme-detection.ts"),l=t([o]);o=(l.then?(await l)():l)[0];const c=(0,i.createContext)({isLightTheme:!1,backgroundRgb:null,syncTheme:()=>{return t=void 0,e=void 0,r=function*(){},new((n=void 0)||(n=Promise))((function(s,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,l)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}}),u=({children:t,detection:e})=>{const{isLightTheme:n,backgroundRgb:r,sync:i}=(0,o.A)(Object.assign({},e));return(0,s.jsx)(c.Provider,{value:{isLightTheme:null!=n&&n,backgroundRgb:r,syncTheme:i},children:t})},a=()=>{const{isLightTheme:t}=(0,i.useContext)(c);return t},f=()=>{const{backgroundRgb:t}=(0,i.useContext)(c);return t},d=()=>{const{syncTheme:t}=(0,i.useContext)(c);return t};r()}catch(t){r(t)}}))},"./src/context/vim-mode-context.tsx":(t,e,n)=>{n.d(e,{l:()=>o,v:()=>l});var r=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),s=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js");const i=(0,s.createContext)(void 0),o=({children:t,configProvider:e})=>{const[n,o]=(0,s.useState)("insert"),[l,c]=(0,s.useState)(e.get().editor.vimMode);return(0,r.jsx)(i.Provider,{value:{mode:l?n:"insert",setMode:o,toggleMode:()=>{o((t=>"normal"===t?"insert":"normal"))},vimEnabled:l,toggleVimEnabled:()=>{c((t=>{const n=!t;try{e.transform((t=>Object.assign(Object.assign({},t),{editor:Object.assign(Object.assign({},t.editor),{vimMode:n})}))).catch((()=>{}))}catch(t){}return n||o("insert"),n}))}},children:t})},l=()=>{const t=(0,s.useContext)(i);if(void 0===t)throw new Error("useVimMode must be used within a VimModeProvider");return t}},"./src/hooks/use-text-input-sync.ts":(t,e,n)=>{function r(t,e,n,r){const s=null!=t?t:"";return""===s?{shouldOverwriteRefs:!0,clampedCursor:0}:null!=r&&s!==e||s.length<e.length?{shouldOverwriteRefs:!1,clampedCursor:null}:{shouldOverwriteRefs:!0,clampedCursor:Math.max(0,Math.min(n,s.length))}}n.d(e,{l:()=>r})},"./src/hooks/use-text-input.ts":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{t:()=>g});var s=n("../ink/build/index.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/constants.ts"),l=n("./src/context/vim-mode-context.tsx"),c=n("./src/debug.ts"),u=n("./src/utils/cursor-navigation.ts"),a=n("./src/utils/input-keys.ts"),f=n("./src/utils/vim-engine.ts"),d=n("./src/hooks/use-text-input-sync.ts"),h=t([s]);s=(h.then?(await h)():h)[0];const p=/^(?:\u001b\[H|\u001b\[1~|\u001b\[7~|\u001bOH|\u001b\[1;1H)$/u,v=/^(?:\u001b\[F|\u001b\[4~|\u001b\[8~|\u001bOF|\u001b\[1;1F)$/u,b=t=>p.test(t),x=t=>v.test(t),y=/\u001b?\](?:10|11|12|4);[^\\\u0007]*(?:\u0007|\u001b\\|\\)/g,w=/\u001b?\[200~/,M=/\u001b?\[201~/;function g(t,e,n={}){const{focus:r=!0,showCursor:h=!0,highlightPastedText:g=!1,onSubmit:p,onTab:v,onShiftTab:O,onCtrlC:C,onCtrlD:k,onCtrlR:A,cursorToEndSignal:j,cursorToStartSignal:$,replaceValueRef:E,onReplace:T,onCursorInfoChange:R,onUpAtFirstLine:L,onDownAtLastLine:S,allowExplicitNewline:D=!0,onPaste:_,suppressArrowKeys:P=!1,disableTextInput:W=!1,debounceMs:V=0,onEscape:I}=n,[J,F]=(0,i.useState)({cursorOffset:(t||"").length,cursorWidth:0,displayValue:t||""}),{cursorOffset:G,cursorWidth:H,displayValue:N}=J,z=(0,i.useRef)(t),U=(0,i.useRef)(G),K=(0,i.useRef)(null),B=(0,i.useRef)(0),Q=(0,i.useRef)(0),Z=(0,i.useRef)(!1),X=(0,i.useRef)(""),q=(0,i.useRef)(""),Y=(0,i.useRef)(!1),tt=(0,i.useRef)(!1),et=(0,i.useRef)(function(){let t=!1,e="";return function(n){if(y.test(n)){const t=n.replace(y,"");return t.length>0?t:""}let r="",s=0;for(;s<n.length;)if(t){const r=n[s++];e+=r;const i=e.length,o=e[i-1];if(""===o||"\\"===o){t=!1,e="";continue}i>=2&&""===e[i-2]&&"\\"===o&&(t=!1,e="")}else{const l=""===(i=n)[o=s]&&"]"===i[o+1]&&/^(?:10|11|12|4);/.test(i.slice(o+2))?4:"]"===i[o]&&/^(?:10|11|12|4);/.test(i.slice(o+1))?3:0;if(l>0){t=!0,e="",s+=l;continue}r+=n[s++]}var i,o;return r}}()),{mode:nt,setMode:rt,vimEnabled:st}=(0,l.v)(),[it,ot]=(0,i.useState)(null),[lt,ct]=(0,i.useState)(null),[ut,at]=(0,i.useState)(null),ft=(0,i.useRef)(j),dt=(0,i.useRef)($),ht=(0,i.useRef)(null),gt=(0,i.useRef)(null),mt=(0,i.useCallback)((t=>{V>0?(ht.current=t,gt.current&&clearTimeout(gt.current),gt.current=setTimeout((()=>{const t=ht.current;ht.current=null,gt.current=null,null!=t&&e(t)}),V)):e(t)}),[e,V]),pt=(0,i.useCallback)((()=>{var t;gt.current&&(clearTimeout(gt.current),gt.current=null);const n=null!==(t=ht.current)&&void 0!==t?t:z.current;ht.current=null,null!=n&&(K.current=n,e(n))}),[e]);(0,i.useLayoutEffect)((()=>{if(E)return E.current=t=>{gt.current&&(clearTimeout(gt.current),gt.current=null),ht.current=null;const e=null!=t?t:"";z.current=e;const n=e.length;U.current=n,K.current=null,F({cursorOffset:n,cursorWidth:0,displayValue:e}),null==T||T(e)},()=>{E.current=null}}),[E,T]);const{internal_eventEmitter:vt}=(0,s.mT)(),bt=(0,i.useCallback)((t=>{const e=z.current,n=Math.max(0,Math.min(e.length,t));U.current=n,F((t=>Object.assign(Object.assign({},t),{cursorOffset:n,cursorWidth:0})))}),[]);return(0,i.useEffect)((()=>{if(!r)return;const t=t=>{if(t&&!Z.current&&!w.test(t)&&!M.test(t)&&(b(t)||x(t))){const e=z.current,n=U.current,r=b(t)?(0,u.Jh)(e,n):st&&"normal"===nt?(0,u.cs)(e,n):(0,u.GD)(e,n);Y.current=!0,bt(r)}};return null==vt||vt.on("input",t),()=>{var e,n;null===(e=null==vt?void 0:vt.off)||void 0===e||e.call(vt,"input",t),null===(n=null==vt?void 0:vt.removeListener)||void 0===n||n.call(vt,"input",t)}}),[r,vt,st,nt,bt]),(0,i.useLayoutEffect)((()=>{if(void 0===j)return;if(ft.current===j)return;ft.current=j;const e=t||"";F({cursorOffset:e.length,cursorWidth:0,displayValue:e}),U.current=e.length,z.current=e}),[j,t]),(0,i.useLayoutEffect)((()=>{if(void 0===$)return;if(dt.current===$)return;dt.current=$;const e=t||"";F({cursorOffset:0,cursorWidth:0,displayValue:e}),U.current=0,z.current=e}),[$,t]),(0,i.useEffect)((()=>{const t=N||"",e=(0,u.q5)(t,G);null==R||R({offset:G,isAtLastLine:e})}),[G,N,R]),(0,i.useLayoutEffect)((()=>{const e=t||"",n=K.current;if(e===z.current&&null===n)return;const s=(0,d.l)(e,z.current,U.current,n);if(null!=n&&e===n&&(K.current=null),!s.shouldOverwriteRefs)return;z.current=e;const i=r&&h?s.clampedCursor:null;null!==i&&(U.current=i),F((t=>{const n=Object.assign({},t);let r=!1;return t.displayValue!==e&&(n.displayValue=e,r=!0),null===i||t.cursorOffset===i&&0===t.cursorWidth||(n.cursorOffset=i,n.cursorWidth=0,r=!0),r?n:t}))}),[t,r,h]),(0,i.useEffect)((()=>{try{process.stdout.write("[?2004h")}catch(t){}return()=>{try{process.stdout.write("[?2004l")}catch(t){}gt.current&&(clearTimeout(gt.current),gt.current=null)}}),[]),(0,s.Ge)(((e,n)=>{if(W)return;if(tt.current)return void(tt.current=!1);const r=("\r"===e||"\n"===e)&&!n.return,s=n.ctrl&&("j"===e||"J"===e);if(r||s){if(D){const e=z.current,n=U.current,r=`${e.slice(0,n)}\n${e.slice(n)}`;z.current=r,U.current=n+1,F((t=>Object.assign(Object.assign({},t),{cursorOffset:n+1,cursorWidth:0,displayValue:r}))),r!==t&&(K.current=r,mt(r))}return}if(q.current.length>0&&(e=q.current+e,q.current=""),n.backspace&&n.ctrl||""===e||"[127;5u"===e||"u"===e&&n.ctrl){const e=z.current,n=U.current,r=(0,u.Jh)(e,n),s=e.slice(0,r)+e.slice(n),i=r;return z.current=s,U.current=i,F((t=>Object.assign(Object.assign({},t),{cursorOffset:i,cursorWidth:0,displayValue:s}))),void(s!==t&&(K.current=s,mt(s)))}const i=Date.now(),l=i-B.current;B.current=i,Q.current=l<35?Q.current+1:1;let d=z.current,g=U.current;const b=(e,n,r=0)=>{const s=e,i=Math.max(0,Math.min(s.length,n));z.current=s,U.current=i,F((t=>Object.assign(Object.assign({},t),{cursorOffset:i,cursorWidth:r,displayValue:s}))),s!==t&&(K.current=s,mt(s))};if(Z.current||w.test(e)||M.test(e)||e.includes("[200~")||e.includes("[201~")){let t=e;if(!Z.current){const e=t.search(w);if(-1!==e){const n=t.match(w),r=n?n[0].length:0;if(Z.current=!0,X.current="",e>0){const n=t.slice(0,e),r=d.slice(0,g)+n+d.slice(g);d=r,g=r.length,b(r,g,0)}t=t.slice(e+r)}}if(Z.current){const e=X.current+t,n=e.indexOf("[201~"),r=e.indexOf("[201~");let s=-1,i=0;if(-1!==n&&(-1===r||n<r)?(s=n,i=6):-1!==r&&(s=r,i=5),-1!==s){const t=e.slice(0,s),n=e.slice(s+i),r=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");Z.current=!1,X.current="",d=z.current,g=U.current;let o=r;try{const t=null==_?void 0:_({kind:"bracketed",content:r});null!=t&&(o=t)}catch(t){}o.includes("\t")&&(o=o.replace(/\t/g,"  "));const l=d.slice(0,g)+o+d.slice(g);return b(l,g+o.length,0),void(n.length>0&&(q.current=n))}return void(X.current=e)}}if(n.ctrl&&"c"===e)return d.length>0?(null==C||C(),void b("",0,0)):void(null==C||C());if(o.hD&&(n.ctrl&&("r"===e||"R"===e)||""===e))return void(null==A||A());if(n.ctrl&&("o"===e||"O"===e)||""===e)return;if(n.ctrl&&("k"===e||"K"===e)||"\v"===e){if(0===d.length)return;const t=(0,u.GD)(d,g);let e=t;g===t&&g<d.length&&"\n"===d[g]&&(e=g+1);const n=d.slice(0,g)+d.slice(e);return void b(n,g,0)}if(n.ctrl&&("d"===e||"D"===e)||""===e){if(k)return void k();if(g>=d.length)return;const t=g+1,e=d.slice(0,g)+d.slice(t);return void b(e,g,0)}if(n.ctrl&&("t"===e||"T"===e)||""===e){const t=d,e=g;if(t.length<2)return;const n=(0,u.Jh)(t,e),r=(0,u.GD)(t,e);if(e===n)return;if(r-n<2)return;const s=e===r?e-1:e;if(s-1<n||s>=r)return;const i=t.slice(0,s-1),o=t[s-1],l=i+t[s]+o+t.slice(s+1);return void b(l,Math.min(s+1,l.length),0)}if(n.tab)return n.shift?void(null==O||O()):void(null==v||v());const x=n.ctrl&&n.leftArrow||n.ctrl&&"a"===e||""===e||"[1;5D"===e||"[1;2D"===e,y=n.ctrl&&n.rightArrow||n.ctrl&&"e"===e||""===e||"[1;5C"===e||"[1;2C"===e,j=n.meta&&n.leftArrow||n.meta&&"b"===e||"[1;3D"===e||"b"===e||"[1;5D"===e,$=n.meta&&n.rightArrow||n.meta&&"f"===e||"[1;3C"===e||"f"===e||"[1;5C"===e,E="[H"===e||"[1~"===e||"[7~"===e||"OH"===e||"[1;1H"===e,T="[F"===e||"[4~"===e||"[8~"===e||"OF"===e||"[1;1F"===e;if(Y.current&&(E||T))return void(Y.current=!1);if(x||y||j||$||E||T){if(x||E)bt((0,u.Jh)(d,g));else if(y||T){const t=st&&"normal"===nt?(0,u.cs)(d,g):(0,u.GD)(d,g);bt(t)}else bt(j?(0,f.y0)(d,g):(0,f.Qn)(d,g));return}const R=(0,a.Po)(e,n),V=(0,a.u$)(e,n);if(R){if(P)return;const t=(0,u.te)(d,g);return null==t?void(0===g?null==L||L():bt(0)):(U.current=t,void F((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0}))))}if(V){if(P)return;const t=(0,u.kC)(d,g);if(null==t||t===g){if(g<d.length){if(-1!==d.indexOf("\n",g)){const t=Math.min(d.length,g+1);return U.current=t,void F((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}return void bt(d.length)}return void(null==S||S())}return U.current=t,void F((e=>Object.assign(Object.assign({},e),{cursorOffset:t,cursorWidth:0})))}if(n.ctrl&&("b"===e||"B"===e)||""===e)return void bt(Math.max(0,g-1));if(n.ctrl&&("f"===e||"F"===e)||""===e)return void bt(Math.min(z.current.length,g+1));if(n.shift&&n.tab)return;const J=["[13;2~","[27;2;13~","[13;2~","[27;2;13~","[13;2~","[27;2;13~","[13;2u","[13;2u","[13;2u"].includes(e)||/^(?:\u001b|\x1b)?\[[0-9]{1,3};2;13~$/.test(e)||/^(?:\u001b|\x1b)?\[13;2u$/.test(e),H=n.meta&&n.return,N="\n"===e&&1===e.length&&Q.current<2;if(n.shift&&n.return||J||H||N){if(!D)return;const t=`${d.slice(0,g)}\n${d.slice(g)}`;return void b(t,g+1,0)}if(n.return){if(Q.current>=3){if(!D||0===d.length)return void(p&&(pt(),p(d)));const t=`${d.slice(0,g)}\n${d.slice(g)}`;return void b(t,t.length,0)}if(D&&g>0&&"\\"===d[g-1]){const t=`${d.slice(0,g-1)}\n${d.slice(g)}`;return void b(t,g,0)}return void(p&&(pt(),p(d)))}if(st&&"normal"===nt){const r=()=>{ct(null),at(null)};if(n.ctrl&&"w"===e||""===e){const t=(0,f.y0)(d,g),e=d.slice(0,t)+d.slice(g);return b(e,t,0),void r()}const s=()=>{const t=null!=ut?ut:1,e=(0,f.JZ)(lt,1);return{op:t,motion:e,total:t*e}};if(/^[1-9]$/.test(e))return void ct((t=>null==t?e:t+e));if("0"===e){if(null!=lt)return void ct(`${lt}0`);if(null==it){const e=(0,u.Jh)(t,g);return bt(e),void r()}}if("d"===it){const n=t,i=(t,e)=>{if(e<=t)return ot(null),void r();const s=(0,f.Xo)(n,{start:t,end:e});b(s.text,s.cursor,0),ot(null),r()},o={w:"w",W:"W",b:"b",B:"B",e:"e",E:"E",0:"0",$:"$",h:"h",l:"l"};if(e in o){const{total:t}=s(),r=(0,f.IA)(o[e],n,G,t);return void i(r.start,r.end)}if("d"===e){const{total:t}=s(),e=(0,u.Jh)(n,G);let r=G;for(let e=0;e<t;e++){const t=n.indexOf("\n",r);if(-1===t){r=n.length;break}r=t+1}return void(r===n.length&&e>0&&"\n"===n[e-1]?i(e-1,r):i(e,r))}return ot(null),void r()}if("d"===e)return null!=lt&&(at((0,f.JZ)(lt,1)),ct(null)),void ot("d");if("i"===e)return rt("insert"),void r();if("a"===e){rt("insert");const e=Math.min(g+1,t.length);return bt(e),void r()}if("A"===e){rt("insert");const e=t,n=(0,u.Jh)(e,g),s=e.indexOf("\n",n),i=-1===s?e.length:s;return bt(i),void r()}if("k"===e){const{motion:t}=s();if(null==(0,u.te)(d,g))return null==L||L(),void r();const e=function(t,e,n){let r=e;for(let e=0;e<n;e++){const e=(0,u.te)(t,r);if(null==e)break;r=e}return r}(d,g,t);return bt(e),void r()}if("j"===e){const{motion:t}=s(),{pos:e,hitEnd:n}=m(d,g,t);return n&&(0,u.q5)(d,g)&&(null==S||S()),bt(e),void r()}if("o"===e){if(!D)return rt("insert"),void r();const{value:t,newOffset:e}=(0,u.Vs)(d,g);return b(t,e,0),rt("insert"),void r()}if("O"===e){if(!D)return rt("insert"),void r();const{value:t,newOffset:e}=(0,u.V)(d,g);return b(t,e,0),rt("insert"),void r()}if("I"===e){rt("insert");const t=(0,u.Jh)(d,g);return bt(t),void r()}if("h"===e||n.leftArrow){const{motion:t}=s(),e=Math.max(0,g-t);return bt(e),void r()}if("l"===e||n.rightArrow){const{motion:t}=s(),e=Math.min(Math.max(0,d.length-1),g+t);return bt(e),void r()}if("$"===e){const{motion:t}=s();let e=g;if(t>1){const{pos:n,hitEnd:r}=m(d,g,t-1);r&&(0,u.q5)(d,g)&&(null==S||S()),e=n}const n=(0,u.cs)(d,e);return bt(n),void r()}if("x"===e){const{motion:t}=s(),e=Math.max(1,t);if(g<d.length){const t=Math.min(d.length,g+e),n=d.slice(0,g)+d.slice(t),r=Math.min(g,Math.max(0,n.length-1));b(n,r,0)}return void r()}if("X"===e){const{motion:t}=s(),e=Math.max(1,t);if(g>0){const t=Math.max(0,g-e),n=d.slice(0,t)+d.slice(g);b(n,t,0)}return void r()}if("w"===e){const{motion:t}=s();let e=g;for(let n=0;n<t;n++)e=(0,f.Qn)(d,e);return bt(e),void r()}if("e"===e){const{motion:t}=s();let e=g;for(let n=0;n<t;n++)e=(0,f.ek)(d,e);return bt(e),void r()}if("E"===e){const{motion:t}=s();let e=g;for(let n=0;n<t;n++)e=(0,f.Pg)(d,e);return bt(e),void r()}if("b"===e){const{motion:t}=s();let e=g;for(let n=0;n<t;n++)e=(0,f.y0)(d,e);return bt(e),void r()}if("B"===e){const{motion:t}=s(),e=d;if(e.length>0){let n=g;for(let r=0;r<t&&!(n<=0);r++){for(n=Math.min(n,e.length-1);n>0&&/\s/.test(e[n]);)n--;for(;n>0&&!/\s/.test(e[n-1]);)n--}bt(n)}return void r()}if("W"===e){const{motion:t}=s(),e=d;if(e.length>0){let n=g;for(let r=0;r<t;r++){if(n<e.length&&!/\s/.test(e[n]))for(;n<e.length&&!/\s/.test(e[n]);)n++;for(;n<e.length&&/\s/.test(e[n]);)n++}const r=Math.min(Math.max(0,e.length-1),n);bt(r)}return void r()}if("D"===e){const{motion:t}=s(),e=d;let n=g;if(t>1){const{pos:r}=m(e,g,t-1);n=r}const i=(0,u.GD)(e,n),o=e.slice(0,g)+e.slice(i);return b(o,g,0),void r()}if("C"===e){const{motion:t}=s(),e=d;let n=g;if(t>1){const{pos:r}=m(e,g,t-1);n=r}const i=(0,u.GD)(e,n),o=e.slice(0,g)+e.slice(i);return b(o,g,0),rt("insert"),void r()}if("s"===e){const{motion:t}=s(),e=d,n=Math.max(1,t),i=(0,u.GD)(e,g),o=Math.min(i,g+n),l=e.slice(0,g)+e.slice(o);return b(l,g,0),rt("insert"),void r()}if("S"===e){const{motion:t}=s(),e=d,n=Math.max(1,t),i=(0,u.Jh)(e,g);let o=g;for(let t=0;t<n;t++){const t=e.indexOf("\n",o);if(-1===t){o=e.length;break}o=t+1}let l=i;const c=o;c===e.length&&l>0&&"\n"===e[l-1]&&(l-=1);const a=e.slice(0,l)+e.slice(c);return b(a,l,0),rt("insert"),void r()}return void r()}if((0,a.xv)(e,n)){if(null==I?void 0:I())return;return void(st&&(rt("normal"),bt(Math.max(0,g-1)),ct(null),at(null)))}const ft=e.length>1?e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"):e,dt=et.current(ft).replace(/\u001b?\[27(?:;\d+)?u/g,"");if("\t"===dt)return(0,c.debugLog)("input.tab.single",{mode:nt,vimEnabled:st}),void(n.shift?null==O||O():null==v||v());const ht=0===dt.length&&ft.length>0,gt=n.backspace||n.delete||n.return||n.tab||n.upArrow||n.downArrow||n.leftArrow||n.rightArrow||n.ctrl||n.meta;if(ht&&!gt)return;let vt=g,xt=d,yt=0;if(n.leftArrow)h&&vt--;else if(n.rightArrow)h&&vt++;else if(n.backspace||n.delete){(n.meta||n.ctrl)&&(n.backspace||n.delete)&&(0,c.debugLog)("Modifier key event:",{input:JSON.stringify(e),inputHex:Array.from(e).map((t=>`0x${t.charCodeAt(0).toString(16)}`)).join(" "),key:{backspace:n.backspace,delete:n.delete,meta:n.meta,ctrl:n.ctrl,shift:n.shift}});const t=n.backspace&&(n.meta||n.ctrl)||""===e||"\b"===e||"[8;3~"===e||"[127;3u"===e,r=n.delete&&n.meta||"[3;3~"===e||"d"===e||"[3~"===e&&n.meta;if(t||r)if(t){const t=(0,f.y0)(d,g);xt=d.slice(0,t)+d.slice(g),vt=t}else{const t=(0,f.Qn)(d,g);xt=d.slice(0,g)+d.slice(t),vt=g}else n.backspace&&g>0?(xt=d.slice(0,g-1)+d.slice(g,d.length),vt--):n.delete&&g<d.length&&(xt=d.slice(0,g)+d.slice(g+1,d.length))}else if(st&&"normal"===nt||!(n.meta&&"w"===dt||"w"===dt||n.ctrl&&"w"===dt||""===dt))if(st&&"normal"===nt||!(n.meta&&"d"===dt||"d"===dt)){let t=dt;if(dt.length>1){if(/^\t+$/.test(dt)){const t=dt.length;(0,c.debugLog)("input.tabs.aggregated",{count:t});for(let e=0;e<t;e++)try{null==v||v()}catch(t){}return}const e=dt;let n=0,r=0,s=0;for(;s<e.length;){const t=e[s];if(""!==t){if(""!==t)break;r++,s++}else n++,s++}if(n>0||r>0){const t=Math.min(n,g);let e=d.slice(0,g-t)+d.slice(g);const s=g-t;if(r>0){const t=Math.min(r,e.length-s);t>0&&(e=e.slice(0,s)+e.slice(s+t))}return void b(e,s,0)}try{const e=null==_?void 0:_({kind:"aggregated",content:dt});null!=e&&(t=e)}catch(t){}if(/^\n+$/.test(t)&&(!D||0===z.current.length))return void(p&&(pt(),p(d)))}t.includes("\t")&&(t=t.replace(/\t/g,"  ")),xt=d.slice(0,g)+t+d.slice(g,d.length),t.includes("\n")?(vt=g+t.length,yt=0):(vt=g+t.length,t.length>1&&(yt=0))}else{const t=(0,f.Qn)(d,g);xt=d.slice(0,g)+d.slice(t),vt=g}else{const t=(0,f.y0)(d,g);xt=d.slice(0,t)+d.slice(g),vt=t}vt<0&&(vt=0),vt>xt.length&&(vt=xt.length),b(xt,vt,yt)}),{isActive:r}),{cursorOffset:G,cursorWidth:g?H:0,setCursorOffset:bt,displayValue:N}}function m(t,e,n){let r=e,s=!1;for(let e=0;e<n;e++){const e=(0,u.kC)(t,r);if(null==e){s=!0;break}r=e}return{pos:r,hitEnd:s}}r()}catch(O){r(O)}}))},"./src/hooks/use-theme-detection.ts":(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{A:()=>u});var s=n("../ink/build/index.js"),i=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),o=n("./src/utils/terminal-theme.ts"),l=t([s]);s=(l.then?(await l)():l)[0];var c=function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,l)}c((r=r.apply(t,e||[])).next())}))};function u(t){const e=!0===(null==t?void 0:t.ignoreEnvHint),n=(0,i.useMemo)((()=>{var t,n;if(e)return null;const r=null===(t=process.env.TERM_THEME)||void 0===t?void 0:t.toLowerCase(),s=null===(n=process.env.VSCODE_THEME)||void 0===n?void 0:n.toLowerCase();if("1"===process.env.ANSI_LIGHT)return!0;if("light"===r)return!0;if("dark"===r)return!1;if(s){if(s.includes("light"))return!0;if(s.includes("dark"))return!1}return null}),[e]),[r,l]=(0,i.useState)(n),[u,a]=(0,i.useState)(null),{stdin:f}=(0,s.mT)(),{stdout:d}=(0,s.t$)(),h=(0,i.useRef)(!1),g=(0,i.useRef)(0),m=(0,i.useCallback)((t=>c(this,void 0,void 0,(function*(){try{(0,o.jf)()}catch(t){}const e=(0,o.lf)(),n=Boolean(process.env.TMUX),r=e||n?300:100,s=yield(0,o.XH)(f,d,r);if(s)return a(s),void(t&&l((0,o.PK)(s)>.6));const i=(0,o.o6)();i&&(a(i),t&&l((0,o.PK)(i)>.6))}))),[f,d]),p=(0,i.useCallback)(((...t)=>c(this,[...t],void 0,(function*(t=!1){if(!h.current){h.current=!0;try{const e=t?null:n;null!=e?(l(e),yield m(!1)):yield m(!0),g.current=Date.now()}catch(t){}finally{h.current=!1}}}))),[n,m]);return(0,i.useEffect)((()=>{let t=!1;return(()=>{c(this,void 0,void 0,(function*(){t||(yield p())}))})(),()=>{t=!0}}),[p]),{isLightTheme:r,backgroundRgb:u,sync:(0,i.useCallback)((()=>c(this,void 0,void 0,(function*(){yield p(!0)}))),[p])}}r()}catch(a){r(a)}}))},"./src/utils/cursor-navigation.ts":(t,e,n)=>{function r(t,e){const n=Math.min(Math.max(0,e),t.length);return-1===t.indexOf("\n",n)}function s(t,e){if(-1===t.indexOf("\n"))return null;const n=Math.min(Math.max(0,e),t.length),r=n<=0?-1:t.lastIndexOf("\n",n-1);if(-1===r)return null;const s=t.lastIndexOf("\n",Math.max(0,r-1)),i=-1===s?0:s+1,o=n-(r+1),l=r-i;return i+Math.min(o,l)}function i(t,e){if(-1===t.indexOf("\n"))return null;const n=Math.min(Math.max(0,e),t.length),r=t.indexOf("\n",n);if(-1===r)return null;const s=n<=0?-1:t.lastIndexOf("\n",n-1),i=n-(-1===s?0:s+1),o=r+1,l=t.indexOf("\n",o),c=(-1===l?t.length:l)-o;return o+Math.min(i,c)}function o(t,e){const n=Math.min(Math.max(0,e),0===t.length?0:t.length-1),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r+1;return{value:`${t.slice(0,s)}\n${t.slice(s)}`,newOffset:s+1}}function l(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length)));return{value:`${t.slice(0,n)}\n${t.slice(n)}`,newOffset:n}}function c(t,e){const n=Math.min(Math.max(0,e),Math.max(0,t.length));if(n<=0)return 0;const r=t.lastIndexOf("\n",n-1);return-1===r?0:r+1}function u(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length))),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r;return 0===Math.max(0,s-n)?n:Math.min(Math.max(0,s-1),Math.max(0,t.length-1))}function a(t,e){const n=c(t,Math.min(Math.max(0,e),Math.max(0,t.length))),r=t.indexOf("\n",Math.max(0,n)),s=-1===r?t.length:r;return Math.max(0,Math.min(t.length,s))}n.d(e,{GD:()=>a,Jh:()=>c,V:()=>l,Vs:()=>o,cs:()=>u,kC:()=>i,q5:()=>r,te:()=>s})},"./src/utils/input-keys.ts":(t,e,n)=>{n.d(e,{Po:()=>s,u$:()=>i,xv:()=>o});const r=(t,e,n,r)=>e.ctrl&&1===t.length&&t.toLowerCase()===n||t===r,s=(t,e)=>e.upArrow||r(t,e,"p",""),i=(t,e)=>e.downArrow||r(t,e,"n",""),o=(t,e)=>e.escape||r(t,e,"g","")},"./src/utils/rule-command-utils.ts":(t,e,n)=>{function r(t){return t.toLowerCase().split(/\s+/).slice(0,4).join("-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")}function s(t){return t.replace(/^\/+/,"").replace(/\//g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")}function i(t){return t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}function o(t){const e=new Set(["true","false","null","yes","no","y","n","on","off"]);return/[#:[\]{}|>&*!?'"`\n\r]/.test(t)||t!==t.trim()||t.startsWith("- ")||e.has(t.toLowerCase())?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:t}function l({description:t,name:e,ruleType:n,globPattern:r}){const s=i(e),l=o(t);let c;switch(n){case"always":c=`---\ndescription: ${l}\nalwaysApply: true\n---`;break;case"auto":case"manual":c=`---\ndescription: ${l}\nalwaysApply: false\n---`;break;case"glob":c=`---\ndescription: ${l}\nglobs: ${o(r||"")}\nalwaysApply: false\n---`;break;default:throw new Error(`Unhandled rule type: ${n}`)}return`${c}\n\n# ${s}\n\n${t}\n`}function c({name:t,description:e}){return`# ${i(t)}\n\n${e}\n`}function u(t){return"skills"===t?[{value:"project",label:"Project Skill",hint:".cursor/skills/"},{value:"user",label:"Just for Me",hint:"~/.cursor/skills/"}]:[{value:"project",label:"Project "+("rules"===t?"Rule":"Command"),hint:".cursor/"},{value:"user",label:"Just for Me",hint:"~/.cursor/"}]}function a(t){return t.includes("/")}function f(){return"No slash needed - just enter the command name (e.g., 'run-tests')"}function d(t){return t.toLowerCase().split(/\s+/).slice(0,3).join("-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"")||"my-command"}n.d(e,{Fv:()=>r,K8:()=>p,TP:()=>h,Ux:()=>a,Zc:()=>d,Zs:()=>u,_M:()=>s,i5:()=>o,jh:()=>l,kt:()=>c,mc:()=>g,nQ:()=>f,uM:()=>m});const h=[{value:"always",label:"Always Apply",description:"Apply to every chat session"},{value:"auto",label:"Apply Intelligently",description:"Agent decides based on description"},{value:"glob",label:"Apply to Specific Files",description:"When file matches a pattern"},{value:"manual",label:"Apply Manually",description:"Only when @-mentioned in chat"}],g=function(t){return t.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")},m=r;function p({name:t,description:e}){const n=i(t);return`---\nname: ${t}\ndescription: ${o(e)}\n---\n\n# ${n}\n\n## Overview\n\n${e}\n\n## When to Use\n\nUse this skill when:\n- [Describe trigger scenarios]\n\n## Instructions\n\n[Add step-by-step instructions here]\n`}},"./src/utils/vim-engine.ts":(t,e,n)=>{n.d(e,{IA:()=>g,JZ:()=>p,Pg:()=>f,Qn:()=>o,Xo:()=>m,ek:()=>c,y0:()=>l});var r=n("./src/utils/cursor-navigation.ts");function s(t){return/[A-Za-z0-9_]/.test(t)}function i(t){return/\s/.test(t)}function o(t,e){let n=e;if(n<t.length&&s(t[n]))for(;n<t.length&&s(t[n]);)n++;for(;n<t.length&&!s(t[n]);)n++;return Math.min(t.length,Math.max(0,n))}function l(t,e){let n=e;if(n<=0)return 0;for(n--;n>0&&!s(t[n]);)n--;for(;n>0&&s(t[n-1]);)n--;return n}function c(t,e){const n=t.length;if(0===n)return e;let r=e;if(r>=n-1)return e;if(s(t[r])&&r+1<n&&s(t[r+1]))for(;r+1<n&&s(t[r+1]);)r++;else{for(r++;r<n&&!s(t[r]);)r++;if(r<n)for(;r+1<n&&s(t[r+1]);)r++}return Math.min(Math.max(0,n-1),r)}function u(t,e){const n=t.length;if(0===n)return e;let r=e;if(r<n&&!i(t[r]))for(;r<n&&!i(t[r]);)r++;for(;r<n&&i(t[r]);)r++;return Math.min(t.length,Math.max(0,r))}function a(t,e){const n=t.length;if(0===n||e<=0)return 0;let r=Math.min(e,n-1);for(r>0&&r--;r>0&&i(t[r]);)r--;for(;r>0&&!i(t[r-1]);)r--;return r}function f(t,e){const n=t.length;if(0===n)return e;let r=e;if(r>=n-1)return Math.min(Math.max(0,n-1),r);if(!i(t[r])&&r+1<n&&!i(t[r+1]))for(;r+1<n&&!i(t[r+1]);)r++;else{for(r++;r<n&&i(t[r]);)r++;if(r<n)for(;r+1<n&&!i(t[r+1]);)r++}return Math.min(Math.max(0,n-1),r)}function d(t,e){return(0,r.Jh)(t,e)}function h(t,e){return(0,r.GD)(t,e)}function g(t,e,n,s=1){switch(t){case"w":{let t=n;for(let n=0;n<s;n++)t=o(e,t);return{start:n,end:t}}case"W":{let t=n;for(let n=0;n<s;n++)t=u(e,t);return{start:n,end:t}}case"b":{let t=n;for(let n=0;n<s;n++)t=l(e,t);return{start:t,end:n}}case"B":{let t=n;for(let n=0;n<s;n++)t=a(e,t);return{start:t,end:n}}case"e":{let t=n;for(let n=0;n<s;n++)t=c(e,t);return{start:n,end:Math.min(e.length,t+1)}}case"E":{let t=n;for(let n=0;n<s;n++)t=f(e,t);return{start:n,end:Math.min(e.length,t+1)}}case"0":return{start:d(e,n),end:n};case"$":{let t=n;return s>1&&(t=function(t,e,n=1){let s=e,i=!1;for(let e=0;e<n;e++){const e=(0,r.kC)(t,s);if(null===e){i=!0;break}s=e}return{cursor:s,hitEnd:i}}(e,n,s-1).cursor),{start:n,end:h(e,t)}}case"h":{const t=function(t,e,n=1){return Math.max(0,e-n)}(0,n,s);return{start:t,end:n}}case"l":return{start:n,end:Math.min(e.length,n+s)};default:return{start:n,end:n}}}function m(t,e){const{start:n,end:r}=e;if(r<=n)return{text:t,cursor:n};const s=t.slice(0,n)+t.slice(r),i=Math.min(n,Math.max(0,s.length-1));return{text:s,cursor:Math.max(0,i)}}function p(t,e=1){if(null===t||0===t.length)return e;const n=Number(t);return Number.isNaN(n)?e:Math.max(0,n)||e}}};