try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="35edd8da-a038-4cc8-b936-3cabaa739ba3",e._sentryDebugIdIdentifier="sentry-dbid-35edd8da-a038-4cc8-b936-3cabaa739ba3")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.01.28-fd13201"}}catch(e){}}(),exports.id=158,exports.ids=[158],exports.modules={"./src/commands/generate-rule.tsx":(e,n,r)=>{r.a(e,(async(e,o)=>{try{r.r(n),r.d(n,{handleGenerateRule:()=>b});var i=r("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),t=r("node:fs"),s=r("node:os"),c=r("node:path"),l=r.n(c),a=r("../cursor-config/dist/index.js"),d=r("../ink/build/index.js"),u=r("../../node_modules/.pnpm/react@19.2.3/node_modules/react/index.js"),p=r("./src/components/text-input.tsx"),h=r("./src/context/theme-context.tsx"),x=r("./src/context/vim-mode-context.tsx"),m=r("./src/debug.ts"),f=r("./src/utils/git.ts"),j=r("./src/utils/rule-command-utils.ts"),g=e([d,p,h]);[d,p,h]=g.then?(await g)():g;var y=function(e,n,r,o){return new(r||(r=Promise))((function(i,t){function s(e){try{l(o.next(e))}catch(e){t(e)}}function c(e){try{l(o.throw(e))}catch(e){t(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,c)}l((o=o.apply(e,n||[])).next())}))};const E=({workspaceRoot:e,initialDescription:n,onComplete:r,onCancel:o})=>{const t=n?"scope":"description",[c,a]=(0,u.useState)(t),[h,x]=(0,u.useState)(null!=n?n:""),[m,f]=(0,u.useState)("project"),[j,g]=(0,u.useState)(0),[y,b]=(0,u.useState)(""),E=[{value:"project",label:"Project Rule",hint:"Applies to this repository only",path:l().join(e,".cursor","rules")},{value:"user",label:"User Rule",hint:"Applies to all your projects",path:l().join((0,s.homedir)(),".cursor","rules")}];(0,d.Ge)(((e,n)=>{if("scope"===c)if(n.upArrow)g((e=>e>0?e-1:E.length-1));else if(n.downArrow)g((e=>e<E.length-1?e+1:0));else if(n.return){const e=E[j];e&&(f(e.value),a("name"))}else(n.escape||n.ctrl&&"c"===e)&&o()}),{isActive:"scope"===c}),(0,d.Ge)(((e,n)=>{"scope"!==c&&(n.escape||n.ctrl&&"c"===e)&&o()}),{isActive:"scope"!==c});const w=(0,u.useCallback)((e=>{e.trim()&&(x(e.trim()),a("scope"))}),[]),z=(0,u.useCallback)((e=>{if(e.trim()){const n=e.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!n)return;b(n),r({description:h,scope:m,ruleName:n})}}),[h,m,r]),v=h.toLowerCase().split(/\s+/).slice(0,4).join("-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");return(0,i.jsxs)(d.az,{flexDirection:"column",paddingX:1,paddingY:1,children:[(0,i.jsx)(d.az,{marginBottom:1,children:(0,i.jsx)(d.EY,{bold:!0,color:"cyan",children:"ðŸ“ Create Cursor Rule"})}),"description"===c&&(0,i.jsxs)(d.az,{flexDirection:"column",children:[(0,i.jsx)(d.az,{marginBottom:1,children:(0,i.jsx)(d.EY,{children:"What should this rule instruct the AI to do?"})}),(0,i.jsxs)(d.az,{children:[(0,i.jsx)(d.EY,{color:"cyan",children:"â€º "}),(0,i.jsx)(p.A,{value:h,onChange:x,onSubmit:w,placeholder:"e.g., Always use TypeScript strict mode",focus:!0})]}),(0,i.jsx)(d.az,{marginTop:1,children:(0,i.jsx)(d.EY,{dimColor:!0,italic:!0,children:"Enter to continue â€¢ Esc to cancel"})})]}),"scope"===c&&(0,i.jsxs)(d.az,{flexDirection:"column",children:[(0,i.jsx)(d.az,{marginBottom:1,children:(0,i.jsx)(d.EY,{children:"Where should this rule be saved?"})}),E.map(((e,n)=>{const r=n===j;return(0,i.jsxs)(d.az,{flexDirection:"column",paddingLeft:1,children:[(0,i.jsxs)(d.az,{children:[(0,i.jsxs)(d.EY,{color:r?"cyan":"gray",bold:r,children:[r?"â¯ ":"  ",e.label]}),(0,i.jsxs)(d.EY,{color:"gray",dimColor:!0,children:[" ","â€” ",e.hint]})]}),r&&(0,i.jsx)(d.az,{paddingLeft:4,children:(0,i.jsxs)(d.EY,{dimColor:!0,children:[e.path,"/"]})})]},e.value)})),(0,i.jsx)(d.az,{marginTop:1,children:(0,i.jsx)(d.EY,{dimColor:!0,italic:!0,children:"â†‘â†“ to select â€¢ Enter to confirm â€¢ Esc to cancel"})})]}),"name"===c&&(0,i.jsxs)(d.az,{flexDirection:"column",children:[(0,i.jsx)(d.az,{marginBottom:1,children:(0,i.jsx)(d.EY,{children:"Rule filename (without .mdc extension):"})}),(0,i.jsxs)(d.az,{children:[(0,i.jsx)(d.EY,{color:"cyan",children:"â€º "}),(0,i.jsx)(p.A,{value:y||v,onChange:b,onSubmit:z,placeholder:v,focus:!0})]}),(0,i.jsx)(d.az,{marginTop:1,children:(0,i.jsx)(d.EY,{dimColor:!0,italic:!0,children:"Enter to create â€¢ Esc to cancel"})})]})]})};function b(e){return y(this,void 0,void 0,(function*(){var n;const r=null!==(n=e.workspace)&&void 0!==n?n:process.cwd();let o;try{o=(0,f.ky)(r)}catch(e){o=r}return new Promise(((n,r)=>{let c;const{unmount:u,waitUntilExit:p}=(0,d.XX)((0,i.jsx)(x.l,{configProvider:new a.LV,children:(0,i.jsx)(h.NP,{children:(0,i.jsx)(E,{workspaceRoot:o,initialDescription:e.description,onComplete:e=>{c&&c();try{const r="user"===e.scope?l().join((0,s.homedir)(),".cursor","rules"):l().join(o,".cursor","rules");(0,t.existsSync)(r)||(0,t.mkdirSync)(r,{recursive:!0});const c=function(e,n){const r=n.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return`---\ndescription: ${(0,j.i5)(e)}\nglobs:\nalwaysApply: false\n---\n\n# ${r}\n\n${e}\n\n## Guidelines\n\n\x3c!-- Add your specific guidelines here --\x3e\n\n## Examples\n\n\`\`\`typescript\n// âœ… Good example\n// TODO: Add good example\n\n// âŒ Bad example\n// TODO: Add bad example\n\`\`\`\n`}(e.description,e.ruleName),a=l().join(r,`${e.ruleName}.mdc`);if((0,t.existsSync)(a)){const{rerender:e}=(0,d.XX)((0,i.jsx)(d.az,{flexDirection:"column",paddingX:1,children:(0,i.jsxs)(d.EY,{color:"yellow",children:["âš ï¸ Rule already exists: ",a]})}));return void setTimeout((()=>{e(null),n()}),100)}(0,t.writeFileSync)(a,c,"utf-8");const{rerender:u}=(0,d.XX)((0,i.jsxs)(d.az,{flexDirection:"column",paddingX:1,children:[(0,i.jsx)(d.EY,{color:"green",children:"âœ“ Rule created!"}),(0,i.jsx)(d.az,{marginTop:1,children:(0,i.jsx)(d.EY,{dimColor:!0,children:a})}),(0,i.jsx)(d.az,{marginTop:1,children:(0,i.jsx)(d.EY,{children:"Edit the file to customize guidelines and examples."})})]}));setTimeout((()=>{u(null),n()}),100)}catch(e){(0,m.debugLog)("Error generating rule",{error:e});const{rerender:n}=(0,d.XX)((0,i.jsx)(d.az,{flexDirection:"column",paddingX:1,children:(0,i.jsxs)(d.EY,{color:"red",children:["âœ— Failed to create rule:"," ",e instanceof Error?e.message:String(e)]})}));setTimeout((()=>{n(null),r(e)}),100)}},onCancel:()=>{c&&c();const{rerender:e}=(0,d.XX)((0,i.jsx)(d.az,{paddingX:1,children:(0,i.jsx)(d.EY,{color:"gray",children:"Cancelled."})}));setTimeout((()=>{e(null),n()}),100)}})})}),{exitOnCtrlC:!1});c=u,p().then((()=>n()))}))}))}o()}catch(w){o(w)}}))}};