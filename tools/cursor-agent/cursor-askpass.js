(()=>{var e={27:(e,r,n)=>{e=n.nmd(e);try{process.dlopen(e,n(928).join(__dirname,n.p,"merkle-tree-napi.linux-x64-gnu.node"))}catch(e){throw new Error("node-loader:\n"+e)}},648:(e,r,n)=>{let o=null,t=null;const{platform:s,arch:i}=process;try{if("darwin"===s)if("arm64"===i)o=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.darwin-arm64.node'");throw e.code="MODULE_NOT_FOUND",e}()));else{if("x64"!==i)throw new Error(`Unsupported macOS architecture: ${i}`);o=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.darwin-x64.node'");throw e.code="MODULE_NOT_FOUND",e}()))}else if("linux"===s)if("x64"===i)o=n(27);else{if("arm64"!==i)throw new Error(`Unsupported Linux architecture: ${i}`);o=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.linux-arm64-gnu.node'");throw e.code="MODULE_NOT_FOUND",e}()))}else{if("win32"!==s)throw new Error(`Unsupported platform: ${s}`);if("x64"===i)o=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.win32-x64-msvc.node'");throw e.code="MODULE_NOT_FOUND",e}()));else{if("arm64"!==i)throw new Error(`Unsupported Windows architecture: ${i}`);o=n(Object(function(){var e=new Error("Cannot find module './merkle-tree-napi.win32-arm64-msvc.node'");throw e.code="MODULE_NOT_FOUND",e}()))}}}catch(e){t=e}if(!o){const e={"darwin-arm64":"merkle-tree-napi.darwin-arm64.node","darwin-x64":"merkle-tree-napi.darwin-x64.node","linux-x64":"merkle-tree-napi.linux-x64-gnu.node","linux-arm64":"merkle-tree-napi.linux-arm64-gnu.node","win32-x64":"merkle-tree-napi.win32-x64-msvc.node","win32-arm64":"merkle-tree-napi.win32-arm64-msvc.node"},r=`${s}-${i}`,n=`Failed to load native binding for ${s}/${i}${e[r]?` (expected: ./${e[r]})`:""}\nOriginal error: ${t&&t.stack?t.stack:t}`;throw new Error(n)}e.exports=o,e.exports.MerkleClient=o.MerkleClient,e.exports.MULTI_ROOT_ABSOLUTE_PATH=o.MULTI_ROOT_ABSOLUTE_PATH},928:e=>{"use strict";e.exports=require("path")}},r={};function n(o){var t=r[o];if(void 0!==t)return t.exports;var s=r[o]={id:o,loaded:!1,exports:{}};return e[o](s,s.exports,n),s.loaded=!0,s.exports}n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="",(()=>{"use strict";const e=require("node:crypto"),r=require("node:fs/promises"),o=require("node:net"),t=require("node:path");var s=n(648),i=function(e,r,n,o){return new(n||(n=Promise))((function(t,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}c((o=o.apply(e,r||[])).next())}))};(function(){return i(this,void 0,void 0,(function*(){const{parentPid:n,parentExePath:a}=(0,s.getParentProcessInfo)();if(a){const e=yield(0,r.realpath)(a);["sudo","doas"].includes((0,t.basename)(e))||process.exit(1);const n=yield(0,r.stat)(e);2048&n.mode||process.exit(1),0!==n.uid&&process.exit(1)}n||process.exit(1);const c=process.env.CURSOR_ASKPASS_SOCKET;c||(process.stderr.write("cursor-askpass: CURSOR_ASKPASS_SOCKET environment variable not set\n"),process.exit(1));const d=process.argv[2]||"Password:",p=(0,e.randomUUID)();try{const e=yield function(e,r,n){return i(this,void 0,void 0,(function*(){return new Promise(((t,s)=>{const i=setTimeout((()=>{a.destroy(),s(new Error("password request timed out"))}),12e4),a=(0,o.connect)(e);let c="";a.on("connect",(()=>{const e={type:"password_request",id:r,prompt:n};a.write(`${JSON.stringify(e)}\n`)})),a.on("data",(e=>{c+=e.toString("utf8");const n=c.indexOf("\n");if(-1!==n){const e=c.slice(0,n);clearTimeout(i),a.destroy();try{const n=JSON.parse(e);if(n.id!==r)return void s(new Error("response ID mismatch"));"password_response"===n.type?t(n.password):"password_denied"===n.type?t(null):s(new Error("unknown response type"))}catch(e){s(new Error("failed to parse response"))}}})),a.on("error",(e=>{clearTimeout(i),s(new Error(`socket error: ${e.message}`))})),a.on("close",(()=>{clearTimeout(i),s(new Error("connection closed unexpectedly"))}))}))}))}(c,p,d);null!==e?(process.stdout.write(e),process.exit(0)):(process.stderr.write("cursor-askpass: password request denied\n"),process.exit(1))}catch(e){const r=e instanceof Error?e.message:String(e);process.stderr.write(`cursor-askpass: ${r}\n`),process.exit(1)}}))})().catch((e=>{const r=e instanceof Error?e.message:String(e);process.stderr.write(`cursor-askpass: unhandled error: ${r}\n`),process.exit(1)}))})()})();