try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="06ec437d-8493-46d1-8edb-a1f5083b922e",e._sentryDebugIdIdentifier="sentry-dbid-06ec437d-8493-46d1-8edb-a1f5083b922e")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"agent-cli@2026.01.28-fd13201"}}catch(e){}}(),exports.id=769,exports.ids=[769],exports.modules={"./src/commands/login.tsx":(e,s,n)=>{n.a(e,(async(e,t)=>{try{n.r(s),n.d(s,{handleLogin:()=>f});var r=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../cursor-config/dist/index.js"),a=n("../ink/build/index.js"),o=n("../proto/dist/generated/aiserver/v1/dashboard_pb.js"),c=n("./src/components/login-ui.tsx"),l=n("./src/privacy.ts"),d=n("./src/statsig.ts"),u=n("./src/utils/open-browser.ts"),g=e([a,c]);[a,c]=g.then?(await g)():g;var h=function(e,s,n,t){return new(n||(n=Promise))((function(r,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function o(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var s;e.done?r(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,o)}c((t=t.apply(e,s||[])).next())}))};function f(e,s,n){return h(this,void 0,void 0,(function*(){const{rerender:t}=(0,a.XX)((0,r.jsx)(c.a,{status:"starting"}));try{const a=new i.Pl,{metadata:g,loginUrl:h}=a.startLogin();if((0,u.g1)(h)){t((0,r.jsx)(c.a,{status:"in-progress",message:`Waiting for browser authentication...\nIf your browser didn't open, use this link:\n${h}`}));try{yield(0,u.ph)(h)}catch(e){}}else t((0,r.jsx)(c.a,{status:"in-progress",message:`Waiting for browser authentication...\nOpen a browser and navigate to this link: ${h}`}));const f=yield a.waitForResult(g);if(null==f?void 0:f.accessToken)try{let i;yield e.setAuthentication(f.accessToken,f.refreshToken),yield s.transform((e=>Object.assign(Object.assign({},e),{privacyCache:void 0}))),(0,l.H)({credentialManager:e,baseUrl:"https://api2.cursor.sh",configProvider:s});let a=!1;if(n)try{const t=yield n.getMe(new o.GetMeRequest({}));i=t.email;const r=s.get().channel,c=null==i?void 0:i.endsWith("@anysphere.co"),l=""!==t.authId?t.authId:void 0;yield s.transform((e=>{var s;return Object.assign(Object.assign(Object.assign({},e),{authInfo:{email:null!==(s=t.email)&&void 0!==s?s:"",displayName:[t.firstName,t.lastName].filter(Boolean).join(" "),teamId:t.teamId,teamName:t.teamName,userId:t.userId,authId:l}}),c&&"static"!==r&&"prod-stable-internal"!==r?{channel:"lab"}:{})})),(0,d.A3)(s,e,{endpoint:"https://api2.cursor.sh"}),c&&"lab"!==r&&"static"!==r&&"prod-stable-internal"!==r&&(a=!0)}catch(e){}t((0,r.jsx)(c.a,{status:"success",message:"Authentication tokens stored securely."+(a?" agent automatically configured to use nightly channel.":""),userInfo:i?{email:i}:void 0}))}catch(e){t((0,r.jsx)(c.a,{status:"error",message:"Failed to store authentication tokens. Please try again."}))}else t((0,r.jsx)(c.a,{status:"error",message:"Login failed or timed out. Please try again."})),process.exit(1)}catch(e){const s=e instanceof Error?e.message:"An unexpected error occurred";t((0,r.jsx)(c.a,{status:"error",message:`Login error: ${s}`})),process.exit(1)}process.exit(0)}))}t()}catch(x){t(x)}}))},"./src/components/login-ui.tsx":(e,s,n)=>{n.a(e,(async(e,t)=>{try{n.d(s,{L:()=>c,a:()=>o});var r=n("../../node_modules/.pnpm/react@19.2.3/node_modules/react/jsx-runtime.js"),i=n("../ink/build/index.js"),a=e([i]);i=(a.then?(await a)():a)[0];const o=({status:e,message:s,userInfo:n,loginUrl:t})=>(0,r.jsx)(i.az,{flexDirection:"column",padding:1,children:(()=>{switch(e){case"starting":return(0,r.jsx)(i.az,{children:(0,r.jsx)(i.EY,{children:"Starting login process..."})});case"in-progress":return(0,r.jsxs)(i.az,{flexDirection:"column",gap:1,children:[(0,r.jsx)(i.az,{children:(0,r.jsx)(i.EY,{children:"Authenticating with Cursor..."})}),s&&(0,r.jsx)(i.EY,{children:s}),t&&(0,r.jsx)(i.EY,{color:"gray",wrap:"no-wrap",children:t})]});case"success":return(0,r.jsxs)(i.az,{flexDirection:"column",children:[(0,r.jsxs)(i.EY,{children:[(0,r.jsx)(i.EY,{color:"green",children:"✓ "}),(null==n?void 0:n.email)?(0,r.jsxs)(i.EY,{children:["Logged in as ",n.email]}):(null==n?void 0:n.userId)?(0,r.jsxs)(i.EY,{children:["Logged in as user id ",n.userId]}):(0,r.jsx)(i.EY,{children:"Login successful!"})]}),s&&(0,r.jsx)(i.EY,{children:s})]});case"error":return(0,r.jsx)(i.az,{flexDirection:"column",children:s&&(0,r.jsx)(i.EY,{color:"red",children:s})})}})()}),c=({status:e,message:s})=>(0,r.jsx)(i.az,{flexDirection:"column",padding:1,children:(()=>{switch(e){case"starting":return(0,r.jsx)(i.az,{children:(0,r.jsx)(i.EY,{children:"Preparing to log out..."})});case"in-progress":return(0,r.jsx)(i.az,{children:(0,r.jsx)(i.EY,{children:"Logging out..."})});case"success":return(0,r.jsxs)(i.az,{flexDirection:"column",children:[(0,r.jsx)(i.EY,{color:"green",children:"✓ Logout successful"}),s&&(0,r.jsx)(i.EY,{children:s})]});case"error":return(0,r.jsxs)(i.az,{flexDirection:"column",children:[(0,r.jsx)(i.EY,{color:"red",children:"✗ Logout failed"}),s&&(0,r.jsx)(i.EY,{color:"red",children:s})]})}})()});t()}catch(e){t(e)}}))}};